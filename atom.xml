<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>qihui</title>
  
  <subtitle>倘只看书，便变成书橱</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2020-01-19T06:31:25.299Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>齐辉</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Spring Security 简单整合JWT 处理认证授权</title>
    <link href="http://yoursite.com/2020/01/19/spring/Spring%20Security%20%E7%AE%80%E5%8D%95%E6%95%B4%E5%90%88JWT%20%E5%A4%84%E7%90%86%E8%AE%A4%E8%AF%81%E6%8E%88%E6%9D%83/"/>
    <id>http://yoursite.com/2020/01/19/spring/Spring Security 简单整合JWT 处理认证授权/</id>
    <published>2020-01-19T06:29:26.395Z</published>
    <updated>2020-01-19T06:31:25.299Z</updated>
    
    <content type="html"><![CDATA[<p>Spring Security 基于 Spring 框架，提供了一套 Web 应用安全性的完整解决方案。一般来说，Web 应用的安全性包括用户认证（Authentication）和用户授权（Authorization）两个部分。用户认证指的是验证某个用户是否为系统中的合法主体，也就是说用户能否访问该系统。用户认证一般要求用户提供用户名和密码。系统通过校验用户名和密码来完成认证过程。用户授权指的是验证某个用户是否有权限执行某个操作。在一个系统中，不同用户所具有的权限是不同的。比如对一个文件来说，有的用户只能进行读取，而有的用户可以进行修改。一般来说，系统会为不同的用户分配不同的角色，而每个角色则对应一系列的权限。</p><p>简单来说,Spring-security其实就是用filter，多请求的路径进行过滤。</p><p>本文整理一下现在比较流行的一种方式,就是使用spring security + jwt实现无状态下用户登录,即使用token做访问控制，token的访问控制主要是对token的生成和解析，对token的来源并没有强制要求，我们完全可以自己来管理，也可以用jwt token，本篇就以jwt token来讲解如何使用token做访问控制</p><p>具体实现思路<br>1.创建spring boot项目<br>2.添加spring security + jwt依赖<br>3.设计用户和角色,创建用户实体类<br>4.实现UserDetails重写的方法<br>5.创建JWT工具类<br>6.创建Token过滤器<br>7.创建sevice业务<br>8.自定义异常处理<br>9.Spring Security配置（非常重要）<br>10.认证的Controller测试</p><a id="more"></a><h4 id="项目结构"><a href="#项目结构" class="headerlink" title="项目结构"></a>项目结构</h4><ul><li><p>创建spring security + jwt依赖</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;spring-cloud-starter-security&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;2.1.0.RELEASE&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;jjwt&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;0.9.0&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure></li><li><p>项目配置文件中加入数据库以及spring security</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">server.port=8080</span><br><span class="line"></span><br><span class="line">spring.datasource.driver-class-name=com.mysql.jdbc.Driver</span><br><span class="line">spring.datasource.url=jdbc:mysql://121.196.XXX.XXX:3306/spring_security_jwt?useUnicode=true&amp;characterEncoding=utf-8</span><br><span class="line">spring.datasource.username=root</span><br><span class="line">spring.datasource.password=XXXXXX</span><br><span class="line"></span><br><span class="line">logging.level.org.springframework.security=info</span><br><span class="line"></span><br><span class="line">spring.jpa.hibernate.ddl-auto=update</span><br><span class="line">spring.jpa.show-sql=true</span><br><span class="line">spring.jackson.serialization.indent_output=true</span><br></pre></td></tr></table></figure></li></ul><h3 id="设计-创建用户"><a href="#设计-创建用户" class="headerlink" title="设计,创建用户"></a>设计,创建用户</h3><p>本文为了简化考虑,准备做出如下设计</p><ul><li>设置一张简单的用户表,包含用户名,密码,角色(role)</li><li><img src="./img/security/db.png" alt="enter description here"><br>注: 也可以将表拆分为用户表和角色表单独来设计考虑</li></ul><p>用户实体类 User<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String role;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUsername</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUsername</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPassword</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPassword</span><span class="params">(String password)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getRole</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> role;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setRole</span><span class="params">(String role)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.role = role;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"User&#123;"</span> +</span><br><span class="line">                <span class="string">"id="</span> + id +</span><br><span class="line">                <span class="string">", username='"</span> + username + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", password='"</span> + password + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", role='"</span> + role + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="UserDetails方法重写"><a href="#UserDetails方法重写" class="headerlink" title="UserDetails方法重写"></a>UserDetails方法重写</h3><p>创建JwtUser类<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"><span class="keyword">import</span> java.util.Collections;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.GrantedAuthority;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.authority.SimpleGrantedAuthority;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.userdetails.UserDetails;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> pro.qh.bean.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JwtUser</span> <span class="keyword">implements</span> <span class="title">UserDetails</span></span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> Integer id;</span><br><span class="line"><span class="keyword">private</span> String username;</span><br><span class="line"><span class="keyword">private</span> String password;</span><br><span class="line"><span class="keyword">private</span> Collection&lt;? extends GrantedAuthority&gt; authorities;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">boolean</span> enabled;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">JwtUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">super</span>();</span><br><span class="line"><span class="comment">// TODO Auto-generated constructor stub</span></span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">JwtUser</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">id = user.getId();</span><br><span class="line">        username = user.getUsername();</span><br><span class="line">        password = user.getPassword();</span><br><span class="line">        authorities = Collections.singleton(<span class="keyword">new</span> SimpleGrantedAuthority(user.getRole()));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> id;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.id = id;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUsername</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.username = username;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPassword</span><span class="params">(String password)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.password = password;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAuthorities</span><span class="params">(Collection&lt;? extends GrantedAuthority&gt; authorities)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.authorities = authorities;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    getAuthorities获取用户包含的权限，返回权限集合，权限是一个继承了GrantedAuthority的对象；</span></span><br><span class="line"><span class="comment">getPassword和getUsername用于获取密码和用户名；</span></span><br><span class="line"><span class="comment">isAccountNonExpired方法返回boolean类型，用于判断账户是否未过期，未过期返回true反之返回false；</span></span><br><span class="line"><span class="comment">isAccountNonLocked方法用于判断账户是否未锁定；</span></span><br><span class="line"><span class="comment">isCredentialsNonExpired用于判断用户凭证是否没过期，即密码是否未过期；</span></span><br><span class="line"><span class="comment">isEnabled方法用于判断用户是否可用。</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 下面为实现UserDetails而需要的重写方法</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Collection&lt;? extends GrantedAuthority&gt; getAuthorities() &#123;</span><br><span class="line">        <span class="keyword">return</span> authorities;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUsername</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPassword</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 用户账号是否过期</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isAccountNonExpired</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 用户账户是否被锁定</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isAccountNonLocked</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 用户密码是否已过期</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isCredentialsNonExpired</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 用户是否可用</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEnabled</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">"JwtUser [id="</span> + id + <span class="string">", username="</span> + username + <span class="string">", password="</span> + password + <span class="string">", authorities="</span></span><br><span class="line">+ authorities + <span class="string">"]"</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>此处所创建的 JwtUser类继承了 Spring Security的 UserDetails接口，该类封装登录用户相关信息，例如用户名，密码，权限集合等. 从而成为了一个符合 Security安全的用户，即通过继承 UserDetails，即可实现 Security中相关的安全功能。</p><h3 id="创建JWT工具类"><a href="#创建JWT工具类" class="headerlink" title="创建JWT工具类"></a>创建JWT工具类</h3><p>主要用于对 JWT Token进行各项操作，比如生成Token、验证Token、刷新Token等</p><ul><li>公共类编写<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Const</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//过期时间</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> EXPIRATION_TIME = <span class="number">432_000_000</span>;     <span class="comment">// 5天(以毫秒ms计)</span></span><br><span class="line"><span class="comment">//秘钥</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String SECRET = <span class="string">"CodeSheepSecret"</span>;      <span class="comment">// JWT密码</span></span><br><span class="line">    <span class="comment">// Token前缀</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String TOKEN_PREFIX = <span class="string">"Bearer"</span>;      <span class="comment">// Token前缀   </span></span><br><span class="line">    <span class="comment">//请求头: authorization</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String HEADER_STRING = <span class="string">"Authorization"</span>; <span class="comment">// 存放Token的Header Key</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>jwt工具类<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br></pre></td><td class="code"><pre><span class="line">import java.io.Serializable;</span><br><span class="line">import java.util.Date;</span><br><span class="line">import java.util.HashMap;</span><br><span class="line">import java.util.Map;</span><br><span class="line"></span><br><span class="line">import org.springframework.security.core.userdetails.UserDetails;</span><br><span class="line">import org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line">import io.jsonwebtoken.Claims;</span><br><span class="line">import io.jsonwebtoken.Jwts;</span><br><span class="line">import io.jsonwebtoken.SignatureAlgorithm;</span><br><span class="line">import pro.qh.bean.User;</span><br><span class="line">import pro.qh.common.Const;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * jwt 工具类</span><br><span class="line"> * @author qihui</span><br><span class="line"> *</span><br><span class="line"> */</span><br><span class="line">@Component</span><br><span class="line">public class JwtTokenUtil implements Serializable &#123;</span><br><span class="line"></span><br><span class="line">private static final long serialVersionUID = -7699238824269144292L;</span><br><span class="line"></span><br><span class="line">private static final String CLAIM_KEY_USER_ACCOUNT = &quot;sub&quot;;</span><br><span class="line"></span><br><span class="line">    private static final String CLAIM_KEY_CREATED = &quot;created&quot;;</span><br><span class="line">    </span><br><span class="line">    private static final String CLAIM_KEY_ROLE = &quot;role&quot;;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 从令牌中获取数据声明</span><br><span class="line">     * @param token 令牌</span><br><span class="line">     * @return claims 数据声明</span><br><span class="line">     */</span><br><span class="line">    private Claims getClaimsFromToken(String token)&#123;</span><br><span class="line">    Claims claims;</span><br><span class="line">    try &#123;</span><br><span class="line">    claims = Jwts.parser()</span><br><span class="line">    .setSigningKey(Const.SECRET)</span><br><span class="line">    .parseClaimsJws(token)</span><br><span class="line">    .getBody();</span><br><span class="line">&#125; catch (Exception e) &#123;</span><br><span class="line">// TODO: handle exception</span><br><span class="line">claims = null;</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line">    return claims;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    /**</span><br><span class="line">     * 从数据声明中获取令牌</span><br><span class="line">     * @param claims 数据声明</span><br><span class="line">     * @return token 令牌</span><br><span class="line">     */</span><br><span class="line">    private String generateToken(Map&lt;String, Object&gt; claims)&#123;</span><br><span class="line">    //过期时间</span><br><span class="line">    Date expirationDate = new Date(System.currentTimeMillis() + Const.EXPIRATION_TIME * 1000);</span><br><span class="line">    </span><br><span class="line">    String token = Jwts.builder()</span><br><span class="line">    //设置token信息,将验证后的authentication写入token</span><br><span class="line">    .setClaims(claims)</span><br><span class="line">    //设置过期时间</span><br><span class="line">    .setExpiration(expirationDate)</span><br><span class="line">    //加密方式以及秘钥</span><br><span class="line">    .signWith(SignatureAlgorithm.HS512, Const.SECRET)</span><br><span class="line">    .compact();</span><br><span class="line">    return token;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    /**</span><br><span class="line">     * 生成令牌</span><br><span class="line">     * @param userDetails 用户</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    public String generateToken(UserDetails userDetails)&#123;</span><br><span class="line">    Map&lt;String, Object&gt; claims = new HashMap&lt;&gt;(2);</span><br><span class="line">    </span><br><span class="line">    claims.put(CLAIM_KEY_USER_ACCOUNT, userDetails.getUsername());</span><br><span class="line">    claims.put(CLAIM_KEY_CREATED, new Date());</span><br><span class="line">    claims.put(CLAIM_KEY_ROLE, userDetails.getAuthorities());</span><br><span class="line">    </span><br><span class="line">    return generateToken(claims);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    /**</span><br><span class="line">     * 获取token用户名</span><br><span class="line">     * @param token</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    public String getUsernameFormToken(String token)&#123;</span><br><span class="line">    </span><br><span class="line">    String username;</span><br><span class="line">    try &#123;</span><br><span class="line">final Claims claims = getClaimsFromToken(token);</span><br><span class="line">username = claims.getSubject();</span><br><span class="line">&#125; catch (Exception e) &#123;</span><br><span class="line">// TODO: handle exception</span><br><span class="line">username = null;</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line">    return username;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    /**</span><br><span class="line">     * 获取令牌创建时间</span><br><span class="line">     * @param token</span><br><span class="line">     * @return create 创建时间</span><br><span class="line">     */</span><br><span class="line">    public Date getCreatedDateFromToken(String token)&#123;</span><br><span class="line">    Date create;</span><br><span class="line">    try &#123;</span><br><span class="line">    final Claims claims = getClaimsFromToken(token);</span><br><span class="line">    create = new Date((long) claims.get(CLAIM_KEY_CREATED));</span><br><span class="line">&#125; catch (Exception e) &#123;</span><br><span class="line">// TODO: handle exception</span><br><span class="line">create = null;</span><br><span class="line">&#125;</span><br><span class="line">    return create;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 获取过期时间</span><br><span class="line">     * @param token</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    public Date getExpirationDateFromToken(String token)&#123;</span><br><span class="line">    Date expiration;</span><br><span class="line">    try &#123;</span><br><span class="line">    final Claims claims = getClaimsFromToken(token);</span><br><span class="line">    expiration = claims.getExpiration();</span><br><span class="line">&#125; catch (Exception e) &#123;</span><br><span class="line">// TODO: handle exception</span><br><span class="line">expiration = null;</span><br><span class="line">&#125;</span><br><span class="line">    return expiration;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 判断令牌是否过期</span><br><span class="line"> * @param token 令牌</span><br><span class="line"> * @return</span><br><span class="line"> */</span><br><span class="line">public Boolean isTokenExpired(String token)&#123;</span><br><span class="line">try &#123;</span><br><span class="line">Claims claims = getClaimsFromToken(token);</span><br><span class="line">Date expiration = claims.getExpiration();</span><br><span class="line">return expiration.before(new Date());</span><br><span class="line">&#125; catch (Exception e) &#123;</span><br><span class="line">// TODO: handle exception</span><br><span class="line"></span><br><span class="line">return false;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 刷新令牌</span><br><span class="line"> * @param token 原令牌</span><br><span class="line"> * @return 原令牌</span><br><span class="line"> */</span><br><span class="line">public String refreshToken(String token)&#123;</span><br><span class="line">String refreshedToken;</span><br><span class="line">try &#123;</span><br><span class="line">Claims claims = getClaimsFromToken(token);</span><br><span class="line">claims.put(CLAIM_KEY_CREATED, new Date());</span><br><span class="line">refreshedToken = generateToken(claims);</span><br><span class="line">&#125; catch (Exception e) &#123;</span><br><span class="line">// TODO: handle exception</span><br><span class="line">refreshedToken = null;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">return refreshedToken;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 验证令牌</span><br><span class="line"> * @param token 令牌</span><br><span class="line"> * @param userDetails 用户</span><br><span class="line"> * @return Boolean 是否有效</span><br><span class="line"> */</span><br><span class="line">public Boolean validateToken(String token, UserDetails userDetails)&#123;</span><br><span class="line">User user = (User) userDetails;</span><br><span class="line">final String username = getUsernameFormToken(token);</span><br><span class="line"></span><br><span class="line">return (username.equals(user.getUsername()) &amp;&amp; !isTokenExpired(token));</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="创建token拦截器"><a href="#创建token拦截器" class="headerlink" title="创建token拦截器"></a>创建token拦截器</h3><p>配置拦截器<br>JWTAuthenticationFilter<br>JWTAuthenticationFilter继承于UsernamePasswordAuthenticationFilter<br>该拦截器用于获取用户登录的信息，只需创建一个token并调用authenticationManager.authenticate()让spring-security去进行验证就可以了，不用自己查数据库再对比密码了，这一步交给spring去操作。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.FilterChain;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.authentication.UsernamePasswordAuthenticationToken;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.context.SecurityContextHolder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.userdetails.UserDetails;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.userdetails.UserDetailsService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.web.authentication.WebAuthenticationDetailsSource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.filter.OncePerRequestFilter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> pro.qh.common.Const;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Token过滤器，用于每次外部对接口请求时的Token处理</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> qihui</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JwtTokenFilter</span> <span class="keyword">extends</span> <span class="title">OncePerRequestFilter</span></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> UserDetailsService UserDetailsService;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> JwtTokenUtil jwtTokenUtil;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doFilterInternal</span><span class="params">(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)</span></span></span><br><span class="line"><span class="function"><span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line"><span class="comment">//authentication 认证   authorization 授权</span></span><br><span class="line"><span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line"><span class="comment">//获取Request 中的请求头为"authorization(授权)" 的token值</span></span><br><span class="line">String authHeader = request.getHeader(Const.HEADER_STRING);</span><br><span class="line"><span class="comment">//验证是否以"Bearer"开头</span></span><br><span class="line"><span class="keyword">if</span>(authHeader != <span class="keyword">null</span> &amp;&amp; authHeader.startsWith(Const.TOKEN_PREFIX))&#123;</span><br><span class="line"><span class="comment">//截取token中"Bearer"后面的值</span></span><br><span class="line">String authToken = authHeader.substring(Const.TOKEN_PREFIX.length());</span><br><span class="line"><span class="comment">//获取用户名</span></span><br><span class="line">String username = jwtTokenUtil.getUsernameFormToken(authToken);</span><br><span class="line">System.out.println(<span class="string">"JwtAuthenticationTokenFilter[doFilterInternal] checking authentication &#123;&#125; :  "</span>+username);</span><br><span class="line"><span class="comment">//验证用户的合法性</span></span><br><span class="line"><span class="keyword">if</span>(username != <span class="keyword">null</span> &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == <span class="keyword">null</span>)&#123;</span><br><span class="line"><span class="comment">// 根据account去数据库中查询user数据，足够信任token的情况下，可以省略这一步</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//通过用户名,获取用户信息</span></span><br><span class="line">UserDetails userDetails = <span class="keyword">this</span>.UserDetailsService.loadUserByUsername(username);</span><br><span class="line"></span><br><span class="line"><span class="comment">//验证token与用户名是否匹配</span></span><br><span class="line"><span class="keyword">if</span>(jwtTokenUtil.validateToken(authToken, userDetails))&#123;</span><br><span class="line"><span class="comment">//获取保存在token中的authentication(认证)</span></span><br><span class="line"><span class="comment">//使用UsernamePasswordAuthenticationToken生成新的authentication</span></span><br><span class="line">UsernamePasswordAuthenticationToken authenticationToken = <span class="keyword">new</span> UsernamePasswordAuthenticationToken(userDetails, </span><br><span class="line"><span class="keyword">null</span>,userDetails.getAuthorities());</span><br><span class="line"></span><br><span class="line"><span class="comment">//最后绑定在request中,在后面的请求中获取用户信息</span></span><br><span class="line">authenticationToken.setDetails(<span class="keyword">new</span> WebAuthenticationDetailsSource().buildDetails(request));</span><br><span class="line"><span class="comment">//放入到SecurityContextHolder中,表示通过</span></span><br><span class="line">SecurityContextHolder.getContext().setAuthentication(authenticationToken);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">filterChain.doFilter(request, response);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Service-dao层接口"><a href="#Service-dao层接口" class="headerlink" title="Service dao层接口"></a>Service dao层接口</h3><p>主要包括用户登录和注册两个主要的业务<br>service<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">@Service(&quot;authService&quot;)</span><br><span class="line">public class AuthServiceImpl implements AuthService &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private UserMapper userMapper;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line">public int addUser(User user) &#123;</span><br><span class="line">return userMapper.insertUser(user);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line">public User getUser(String username) &#123;</span><br><span class="line">return userMapper.findByUser(username);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line">    public User findByUsername(String username) &#123;</span><br><span class="line">return userMapper.findByUser(username);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>dao层<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import pro.qh.bean.User;</span><br><span class="line"></span><br><span class="line">public interface UserMapper &#123;</span><br><span class="line"></span><br><span class="line">int insertUser(User user);</span><br><span class="line"></span><br><span class="line">User findByUser(String username);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h3><ul><li><p>用来解决匿名用户访问无权限资源时的异常</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 自定义异常处理</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> qihui</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JwtAuthenticationEntryPoint</span> <span class="keyword">implements</span> <span class="title">AuthenticationEntryPoint</span>, <span class="title">Serializable</span></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> ObjectMapper mapper;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">commence</span><span class="params">(HttpServletRequest request, HttpServletResponse response,</span></span></span><br><span class="line"><span class="function"><span class="params">AuthenticationException authException)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">response.setCharacterEncoding(<span class="string">"UTF-8"</span>);</span><br><span class="line">response.setContentType(<span class="string">"application/json; charset=utf-8"</span>);</span><br><span class="line">Msg result = <span class="keyword">null</span>;</span><br><span class="line"><span class="comment">//身份证未通过</span></span><br><span class="line"><span class="keyword">if</span> (authException <span class="keyword">instanceof</span> BadCredentialsException) &#123;</span><br><span class="line">        </span><br><span class="line">            result = Msg.fail(-<span class="number">1</span>, <span class="string">"用户名或密码错误"</span>).add(<span class="string">"msg"</span>, authException.getMessage());</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        result = Msg.fail(-<span class="number">1</span>, <span class="string">"token错误"</span>).add(<span class="string">"msg"</span>,authException.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        response.getWriter().write(mapper.writeValueAsString(result));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>自定义成功处理器</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.util.Date;</span><br><span class="line">import java.util.HashMap;</span><br><span class="line">import java.util.Map;</span><br><span class="line"></span><br><span class="line">import javax.servlet.ServletException;</span><br><span class="line">import javax.servlet.http.HttpServletRequest;</span><br><span class="line">import javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line">import org.slf4j.Logger;</span><br><span class="line">import org.slf4j.LoggerFactory;</span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.security.core.Authentication;</span><br><span class="line">import org.springframework.security.web.authentication.AuthenticationSuccessHandler;</span><br><span class="line">import org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line">import com.fasterxml.jackson.databind.ObjectMapper;</span><br><span class="line"></span><br><span class="line">import io.jsonwebtoken.Jwts;</span><br><span class="line">import io.jsonwebtoken.SignatureAlgorithm;</span><br><span class="line">import pro.qh.common.Const;</span><br><span class="line">import pro.qh.jwt.JwtTokenUtil;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 自定义成功处理器</span><br><span class="line"> * @author qihui</span><br><span class="line"> *</span><br><span class="line"> */</span><br><span class="line">@Component(&quot;myLoginSuccessHandler&quot;)</span><br><span class="line">public class MyLoginSuccessHandler implements AuthenticationSuccessHandler&#123;</span><br><span class="line"></span><br><span class="line">private Logger logger = LoggerFactory.getLogger(getClass());</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line">     * ObjectMapper这个类是java中jackson提供的，主要是用来把对象转换成为一个json字符串返回到前端,</span><br><span class="line">     */</span><br><span class="line">@Autowired</span><br><span class="line">private ObjectMapper mapper;</span><br><span class="line">@Autowired</span><br><span class="line">private JwtTokenUtil jwtTokenUtil;</span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line">public void onAuthenticationSuccess(HttpServletRequest request, HttpServletResponse response,</span><br><span class="line">Authentication authentication) throws IOException, ServletException &#123;</span><br><span class="line">// TODO Auto-generated method stub</span><br><span class="line">logger.info(&quot;登录成功&quot;);</span><br><span class="line"></span><br><span class="line">//登录后设置Jwt</span><br><span class="line">String token = Jwts.builder()</span><br><span class="line">.claim(&quot;authentication&quot;, authentication)</span><br><span class="line">.setSubject(&quot;主题&quot;)</span><br><span class="line">.setExpiration(new Date(System.currentTimeMillis() + 60 * 60 * 24 * 1000))</span><br><span class="line">.signWith(SignatureAlgorithm.HS512, Const.SECRET)</span><br><span class="line">.compact();</span><br><span class="line"></span><br><span class="line">System.out.println(&quot;token:&quot; + token);</span><br><span class="line"></span><br><span class="line">response.addHeader(&quot;Authorization&quot;, &quot;marin&quot;+token);</span><br><span class="line"></span><br><span class="line">//将Authentication以json形式返回前端,这个需要工具类objectMapper,spring已经注入</span><br><span class="line">//设置返回类型</span><br><span class="line">response.setContentType(&quot;application/json;charset=UTF-8&quot;);</span><br><span class="line">Map&lt;String, Object&gt; tokenInfo = new HashMap&lt;String, Object&gt;();</span><br><span class="line">tokenInfo.put(&quot;Authorization&quot;, &quot;marin&quot;+token);</span><br><span class="line"></span><br><span class="line">//将token信息写入</span><br><span class="line">response.getWriter().write(mapper.writeValueAsString(tokenInfo));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>失败处理器</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.AuthenticationException;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.web.authentication.AuthenticationFailureHandler;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.ObjectMapper;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 自定义失败处理器</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> qihui</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span>(<span class="string">"myLoginFailureHandler"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyLoginFailureHandler</span> <span class="keyword">implements</span> <span class="title">AuthenticationFailureHandler</span></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> Logger logger = LoggerFactory.getLogger(getClass());</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ObjectMapper是java中的jackson提供的,主要是用来把对象转换成为一个json字符串返回到前端</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> ObjectMapper mapper;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAuthenticationFailure</span><span class="params">(HttpServletRequest request, HttpServletResponse response,</span></span></span><br><span class="line"><span class="function"><span class="params">AuthenticationException exception)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//json形式返回</span></span><br><span class="line"><span class="comment">//服务器内部异常</span></span><br><span class="line">response.setStatus(<span class="number">500</span>);</span><br><span class="line"><span class="comment">//设置返回类型</span></span><br><span class="line">response.setContentType(<span class="string">"application/json;charset=UTF-8"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//将信息写入</span></span><br><span class="line">response.getWriter().write(mapper.writeValueAsString(exception.getMessage()));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="Spring-Security配置类编写（非常重要）"><a href="#Spring-Security配置类编写（非常重要）" class="headerlink" title="Spring Security配置类编写（非常重要）"></a>Spring Security配置类编写（非常重要）</h3><ul><li><p>这是一个高度综合的配置类，主要是通过重写 WebSecurityConfigurerAdapter 的部分 configure配置，来实现用户自定义的部分。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableWebSecurity</span></span><br><span class="line"><span class="meta">@EnableGlobalMethodSecurity</span>(prePostEnabled=<span class="keyword">true</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SecurityConfig</span> <span class="keyword">extends</span> <span class="title">WebSecurityConfigurerAdapter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> JwtAuthenticationEntryPoint unauthorizedHandler;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> AuthenticationManager <span class="title">authenticationManagerBean</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.authenticationManagerBean();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> JwtTokenFilter <span class="title">authenticationTokenFilterBean</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> JwtTokenFilter();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 用户加密</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">( AuthenticationManagerBuilder auth )</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        auth.userDetailsService( <span class="keyword">this</span>.userService ).passwordEncoder( passwordEncoder() );</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(HttpSecurity httpSecurity)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line"></span><br><span class="line">httpSecurity.cors().and().csrf().disable()</span><br><span class="line"><span class="comment">//为授权处理</span></span><br><span class="line">.exceptionHandling().authenticationEntryPoint(unauthorizedHandler)</span><br><span class="line">.and()</span><br><span class="line"><span class="comment">//不保存session状态</span></span><br><span class="line">.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS)</span><br><span class="line">.and()</span><br><span class="line">.authorizeRequests() <span class="comment">//所有的需要认证</span></span><br><span class="line">.antMatchers(<span class="string">"/auth/**"</span>).permitAll() <span class="comment">// 调用api不需要拦截        </span></span><br><span class="line">        .antMatchers(<span class="string">"/**"</span>).permitAll();</span><br><span class="line"><span class="comment">//.antMatchers("/auth/**").authenticated();</span></span><br><span class="line">        <span class="comment">//都需要认证</span></span><br><span class="line">        <span class="comment">/*.antMatchers(HttpMethod.POST).authenticated()</span></span><br><span class="line"><span class="comment">        .antMatchers(HttpMethod.PUT).authenticated()</span></span><br><span class="line"><span class="comment">        .antMatchers(HttpMethod.DELETE).authenticated()</span></span><br><span class="line"><span class="comment">        .antMatchers(HttpMethod.GET).authenticated();*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**将Jwt添加到UsernamePasswordAuthenticationFilter之前**/</span></span><br><span class="line">httpSecurity.addFilterBefore(authenticationTokenFilterBean(), UsernamePasswordAuthenticationFilter.class);</span><br><span class="line"></span><br><span class="line">httpSecurity.headers().cacheControl();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 密码加密</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> PasswordEncoder <span class="title">passwordEncoder</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> BCryptPasswordEncoder();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>允许跨域配置</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@AutoConfigureBefore</span>(SecurityConfig.class)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringMvcConfigurer</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span>: 允许跨域配置</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addCorsMappings</span><span class="params">(CorsRegistry registry)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//log.info("跨域已设置");</span></span><br><span class="line">        registry.addMapping(<span class="string">"/**"</span>)</span><br><span class="line">                .allowedOrigins(<span class="string">"*"</span>)</span><br><span class="line">                .allowedMethods(<span class="string">"*"</span>)</span><br><span class="line">                .allowedHeaders(<span class="string">"*"</span>)</span><br><span class="line">                .allowCredentials(<span class="keyword">true</span>)</span><br><span class="line">                .maxAge(<span class="number">3600</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="AuthController"><a href="#AuthController" class="headerlink" title="AuthController"></a>AuthController</h3><p>登录和注册的 Controller</p><ul><li><p>注册</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 注册</span><br><span class="line"> * @param user</span><br><span class="line"> * @return</span><br><span class="line"> * @throws AuthenticationException</span><br><span class="line"> */</span><br><span class="line">@RequestMapping(value = &quot;/user/register&quot;, method = RequestMethod.POST)</span><br><span class="line">@ResponseBody</span><br><span class="line">public Msg register(User user) throws AuthenticationException&#123;</span><br><span class="line"></span><br><span class="line">System.out.println(user.getUsername());</span><br><span class="line">System.out.println(user.getPassword());</span><br><span class="line"></span><br><span class="line">String username = user.getUsername();</span><br><span class="line"></span><br><span class="line">//查找用户名</span><br><span class="line">User userInfo = authService.getUser(username);</span><br><span class="line">System.out.println(&quot;userInfo:  &quot; + userInfo);</span><br><span class="line">if(userInfo != null)&#123;</span><br><span class="line">return Msg.fail(-1, &quot;用户名已存在&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//添加权限</span><br><span class="line">user.setRole(&quot;admin&quot;);</span><br><span class="line"></span><br><span class="line">final String rawPassword = user.getPassword();</span><br><span class="line">        user.setPassword(passwordEncoder.encode(rawPassword));</span><br><span class="line">        </span><br><span class="line">//保存加密数据</span><br><span class="line">int result = authService.addUser(user);</span><br><span class="line"></span><br><span class="line">if(result == 0)&#123;</span><br><span class="line">        return Msg.fail(-1, &quot;注册失败&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">       </span><br><span class="line">return Msg.fail(0, &quot;注册成功&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>登录</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 登录</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> username</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> password</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> AuthenticationException</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/user/login"</span>, method = RequestMethod.POST)</span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Msg <span class="title">login</span><span class="params">(String username, String password)</span><span class="keyword">throws</span> AuthenticationException </span>&#123;</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">"username: "</span> + username);</span><br><span class="line">System.out.println(<span class="string">"password: "</span> + password);</span><br><span class="line"></span><br><span class="line"><span class="comment">//把表单提交的username,password封装到UsernamePasswordAuthenticationToken</span></span><br><span class="line">UsernamePasswordAuthenticationToken tokenInfo = <span class="keyword">new</span> UsernamePasswordAuthenticationToken(username, password);</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> Authentication authentication = authenticationManager.authenticate(tokenInfo);</span><br><span class="line">SecurityContextHolder.getContext().setAuthentication(authentication);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> JwtUser userDetails = (JwtUser) userDetailsService.loadUserByUsername(username);</span><br><span class="line"></span><br><span class="line"><span class="comment">//生成token</span></span><br><span class="line"><span class="keyword">final</span> String token = jwtTokenUtil.generateToken(userDetails);</span><br><span class="line"><span class="keyword">if</span>(token == <span class="keyword">null</span>)&#123;</span><br><span class="line"><span class="keyword">return</span> Msg.fail(-<span class="number">1</span>, <span class="string">"用户名或密码错误"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> Msg.success(<span class="number">0</span>, <span class="string">"登录成功"</span>).add(<span class="string">"token"</span>, token);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>下面我们来测试一下，为了模拟效果比较直观点，我们使用Rest-client进行测试，</p><p>1、首先，我们调用注册的方法注册一个用户，<br><img src="./img/security/reg.png" alt="enter description here"></p><p>注册成功之后，我们看到后台返回结果，<br><img src="./img/security/resgister2.png" alt="enter description here"><br>数据库结果<br><img src="./images/reg3.png" alt="enter description here"></p><p>2、使用该用户进行登录，我们希望的是登录成功之后，后台生成一个token并返回给前端，这样后面的接口调用中直接带上这个token即可，<br><img src="./img/security/login.png" alt="enter description here"><br>看到登录成功，后台返回了token<br><img src="./img/security/loginData.png" alt="enter description here"></p><p>本篇到这里基本就结束了，关于springsecurity其实内容还是很多的，里面的用法也比较复杂,本文着重讲了用户登录和注册功能,权限管理(role)没有过多涉及,大家抽空可以做深入的研究，篇幅原因不做过多介绍了</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Spring Security 基于 Spring 框架，提供了一套 Web 应用安全性的完整解决方案。一般来说，Web 应用的安全性包括用户认证（Authentication）和用户授权（Authorization）两个部分。用户认证指的是验证某个用户是否为系统中的合法主体，也就是说用户能否访问该系统。用户认证一般要求用户提供用户名和密码。系统通过校验用户名和密码来完成认证过程。用户授权指的是验证某个用户是否有权限执行某个操作。在一个系统中，不同用户所具有的权限是不同的。比如对一个文件来说，有的用户只能进行读取，而有的用户可以进行修改。一般来说，系统会为不同的用户分配不同的角色，而每个角色则对应一系列的权限。&lt;/p&gt;
&lt;p&gt;简单来说,Spring-security其实就是用filter，多请求的路径进行过滤。&lt;/p&gt;
&lt;p&gt;本文整理一下现在比较流行的一种方式,就是使用spring security + jwt实现无状态下用户登录,即使用token做访问控制，token的访问控制主要是对token的生成和解析，对token的来源并没有强制要求，我们完全可以自己来管理，也可以用jwt token，本篇就以jwt token来讲解如何使用token做访问控制&lt;/p&gt;
&lt;p&gt;具体实现思路&lt;br&gt;1.创建spring boot项目&lt;br&gt;2.添加spring security + jwt依赖&lt;br&gt;3.设计用户和角色,创建用户实体类&lt;br&gt;4.实现UserDetails重写的方法&lt;br&gt;5.创建JWT工具类&lt;br&gt;6.创建Token过滤器&lt;br&gt;7.创建sevice业务&lt;br&gt;8.自定义异常处理&lt;br&gt;9.Spring Security配置（非常重要）&lt;br&gt;10.认证的Controller测试&lt;/p&gt;
    
    </summary>
    
    
      <category term="spring" scheme="http://yoursite.com/tags/spring/"/>
    
  </entry>
  
  <entry>
    <title>spring boot配置tomcat</title>
    <link href="http://yoursite.com/2019/08/05/spring/spring%20boot%E9%85%8D%E7%BD%AEtomcat/"/>
    <id>http://yoursite.com/2019/08/05/spring/spring boot配置tomcat/</id>
    <published>2019-08-05T13:18:22.931Z</published>
    <updated>2019-08-05T14:29:52.863Z</updated>
    
    <content type="html"><![CDATA[<p>SpringBoot是内置一个tomcat容器的,用起来叶很方便,但考虑到实际的情形中，我们的Tomcat服务器一般是另外部署好了的，有专门的维护方式。此时我们需要剥离掉SBT应用内置的Tomcat服务器，进而将应用发布并部署到外置的Tomcat容器之中，所以有时需要在云服务器上部署tomcat</p><h4 id="下载tomcat"><a href="#下载tomcat" class="headerlink" title="下载tomcat"></a>下载tomcat</h4><p>tomcat下载的地址，下载到本地，<br><a href="https://mirrors.tuna.tsinghua.edu.cn/apache/tomcat/" target="_blank" rel="noopener">https://mirrors.tuna.tsinghua.edu.cn/apache/tomcat/</a></p><a id="more"></a><p><img src="/img/spring/t1.png" alt="enter description here"><br><img src="/img/spring/t2.png" alt="enter description here"></p><p>上述是把本地下载的apache-tomcat-9.0.20tar传输到服务器的/usr/local目录下，<br>在xshell中解压apache-tomcat-9.0.20.tar<br><img src="/img/spring/t3.png" alt="enter description here"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local</span><br><span class="line">解压apache-tomcat-9.0.20.tar</span><br><span class="line"></span><br><span class="line">tar -zxvf apache-tomcat-9.0.20.tar.gz</span><br></pre></td></tr></table></figure><p>这目录中将apache-tomcat-9.0.20.tar文件夹修改为tomcat</p><h4 id="设置JVM参数"><a href="#设置JVM参数" class="headerlink" title="设置JVM参数"></a>设置JVM参数</h4><p>运行命令vim /usr/local/tomcat/bin/setenv.sh，<br>创建/usr/local/tomcat/bin/setenv.sh。<br>按下i键进入编辑模式，添加以下内容,保存<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">JAVA_OPTS=&apos;-Djava.security.egd=file:/dev/./urandom -server -Xms256m -Xmx496m -Dfile.encoding=UTF-8&apos;</span><br></pre></td></tr></table></figure></p><h4 id="设置Tomcat-自启动脚本"><a href="#设置Tomcat-自启动脚本" class="headerlink" title="设置Tomcat 自启动脚本"></a>设置Tomcat 自启动脚本</h4><p>下载脚本：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/lj2007331/oneinstack/raw/master/init.d/Tomcat-init</span><br></pre></td></tr></table></figure></p><p>重命名Tomcat-init<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv Tomcat-init /etc/init.d/tomcat</span><br></pre></td></tr></table></figure></p><p>修改/etc/init.d/tomcat中的jdk,tomcat地址<br><img src="/img/spring/t4.png" alt="enter description here"></p><p>设置权限:<br>chmod 755 tomcat<br>添加到系统服务<br>chkconfig –add tomcat<br>查看系统服务:<br>chkconfig –list<br><img src="/img/spring/t6.png" alt="enter description here"></p><p>启动,停止tomcat:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">service tomcat start</span><br><span class="line">service tomcat stop</span><br></pre></td></tr></table></figure></p><p>在轻量级服务器中 设置防火墙<br><img src="/img/spring/t7.png" alt="enter description here"></p><p>最后访问服务器8080端口<br><img src="/img/spring/t8.png" alt="enter description here"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;SpringBoot是内置一个tomcat容器的,用起来叶很方便,但考虑到实际的情形中，我们的Tomcat服务器一般是另外部署好了的，有专门的维护方式。此时我们需要剥离掉SBT应用内置的Tomcat服务器，进而将应用发布并部署到外置的Tomcat容器之中，所以有时需要在云服务器上部署tomcat&lt;/p&gt;
&lt;h4 id=&quot;下载tomcat&quot;&gt;&lt;a href=&quot;#下载tomcat&quot; class=&quot;headerlink&quot; title=&quot;下载tomcat&quot;&gt;&lt;/a&gt;下载tomcat&lt;/h4&gt;&lt;p&gt;tomcat下载的地址，下载到本地，&lt;br&gt;&lt;a href=&quot;https://mirrors.tuna.tsinghua.edu.cn/apache/tomcat/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://mirrors.tuna.tsinghua.edu.cn/apache/tomcat/&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="spring" scheme="http://yoursite.com/categories/spring/"/>
    
    
      <category term="spring" scheme="http://yoursite.com/tags/spring/"/>
    
  </entry>
  
  <entry>
    <title>spring boot 部署阿里云</title>
    <link href="http://yoursite.com/2019/08/05/spring/spring%20boot%20%E9%83%A8%E7%BD%B2%E9%98%BF%E9%87%8C%E4%BA%91/"/>
    <id>http://yoursite.com/2019/08/05/spring/spring boot 部署阿里云/</id>
    <published>2019-08-05T06:29:01.463Z</published>
    <updated>2019-08-05T14:15:04.732Z</updated>
    
    <content type="html"><![CDATA[<h5 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h5><pre><code>首先得买个阿里云的服务器本地连接阿里云服务器工具:SecureCRT或xshell</code></pre><a id="more"></a><p><img src="/img/spring/a2.png" alt="enter description here"></p><pre><code>文件上传阿里云: xftp</code></pre><p><img src="/img/spring/a1.png" alt="enter description here"></p><h5 id="安装jdk"><a href="#安装jdk" class="headerlink" title="安装jdk"></a>安装jdk</h5><p>1.去官网下载JDK,这里下载的版本为1.8<br><img src="/img/spring/a3.png" alt="enter description here"><br>    一般常见的做法是下载下来然后用工具传到Linux服务器上，这里推荐使用xftp上传<br>2.创建java文件目录<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 切换目录</span><br><span class="line">cd /usr/local</span><br><span class="line"># 创建一个文件夹 Java </span><br><span class="line">mkdir java</span><br><span class="line">#查看文件是否创建</span><br><span class="line">ls</span><br><span class="line">aegis  bin  etc  games  include  java  lib  lib64  libexec  sbin  share  src</span><br><span class="line">#进入java目录</span><br><span class="line">cd java</span><br></pre></td></tr></table></figure></p><p><img src="/img/spring/a4.png" alt="enter description here"></p><p>使用xftp将java文件上传到java目录中<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#解压java文件 ,tar -zxvf + 文件名</span><br><span class="line">tar -zxvf jdk-<span class="number">8</span>u201-linux-x64.tar.gz</span><br></pre></td></tr></table></figure></p><p>将解压好的文件重命名便于配置环境变量,我这里命名为jdk8<br>4.设置环境变量：<br>a . 打开/etc/profile：vim /etc/profile,按i进入编辑模式<br>b . 将以下信息复制进去，注意自己的版本号<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> JAVA_HOME=<span class="regexp">/usr/</span>java/jdk8</span><br><span class="line"><span class="keyword">export</span> CLASSPATH=$JAVA_HOME/lib/</span><br><span class="line"><span class="keyword">export</span> PATH=$PATH:$JAVA_HOME/bin</span><br><span class="line"><span class="keyword">export</span> PATH JAVA_HOME CLASSPATH</span><br></pre></td></tr></table></figure></p><p><img src="/img/spring/a5.png" alt="enter description here"></p><pre><code>按esc 退出, :wq 保存然后让profile立即生效source /etc/profile 输出 java -version,显示java信息至此Java的环境变量全部配置成功 </code></pre><p><img src="/img/spring/a6.png" alt="enter description here"></p><h5 id="安装mysql"><a href="#安装mysql" class="headerlink" title="安装mysql"></a>安装mysql</h5><p>安装前，要检查系统有没有自带安装 MySQL: rpm -qa | grep mysql<br>如果系统有安装就需要卸载:</p><pre><code>rpm -e mysql　　// 普通删除模式rpm -e --nodeps mysql　　//强力删除模式，如果使用上面命令删除时，提示有依赖的其它文件，则用该命令可以对其进行强力删除</code></pre><p>安装 MySQL：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># wget https://dev.mysql.com/get/mysql57-community-release-el7-9.noarch.rpm</span><br><span class="line"># rpm -ivh mysql57-community-release-el7-9.noarch.rpm</span><br><span class="line"># yum install mysql-server</span><br></pre></td></tr></table></figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">安装完成后启动 MySQL： systemctl start mysqld</span><br><span class="line">查看 MySQL 运行状态： systemctl status mysqld</span><br><span class="line">MySQL启动了，当你想进入MySQL时会发现，并没有对MySQL进行设置啊，于是就会报错：</span><br><span class="line"></span><br><span class="line">Access denied for user &apos;root&apos;@&apos;localhost&apos; (using password: NO)</span><br></pre></td></tr></table></figure><p>解决这个问题，先关闭MYSQL:   systemctl stop mysqld<br>然后 vim etc/my.cnf 添加skip-grant-tables<br><img src="/img/spring/a7.png" alt="enter description here"></p><p>保存,然后重启MySQL：systemctl start mysqld<br>这时候就可以进入mysql了，然后修改密码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; use mysql;</span><br><span class="line">mysql&gt;  update user set authentication_string=password(&quot;123456&quot;) where user=&apos;root&apos;;</span><br><span class="line">mysql&gt; flush privileges;  # 刷新权限</span><br></pre></td></tr></table></figure></p><p>注意:安装完mysql 之后，登陆以后，有出现不管运行任何命令，总是提示这个<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show databases;</span><br><span class="line">ERROR 1820 (HY000): You must reset your password using ALTER USER statement before executing this statement.</span><br><span class="line">mysql&gt; use mysql;</span><br><span class="line">ERROR 1820 (HY000): You must reset your password using ALTER USER statement before executing</span><br></pre></td></tr></table></figure></p><p>解决方式如下：</p><p>MySQL版本5.7.6版本以前用户可以使用如下命令：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SET PASSWORD = PASSWORD(&apos;123456&apos;);</span><br></pre></td></tr></table></figure></p><p>MySQL版本5.7.6版本开始的用户可以使用如下命令：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; ALTER USER USER() IDENTIFIED BY &apos;123456&apos;;</span><br></pre></td></tr></table></figure></p><p>如果不清楚自己是什么版本，可以将两条都尝试一下。<br>原因分析：</p><pre><code>MySQL版本5.6.6版本起，添加了password_expired功能，它允许设置用户的过期时间。这个特性已经添加到mysql.user数据表，但是它的默认值是”N”，可以使用ALTER USER语句来修改这个值。如果嫌麻烦可以将密码设为永不过期</code></pre><h5 id="导入本地数据库"><a href="#导入本地数据库" class="headerlink" title="导入本地数据库"></a>导入本地数据库</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show databases; #查看所有数据库</span><br><span class="line">mysql&gt; use 数据库名; #使用该数据进行编辑</span><br><span class="line">mysql&gt; show tables; #查看某数据库所有表</span><br><span class="line">导入数据库</span><br><span class="line">1、首先建空数据库</span><br><span class="line">mysql&gt;create database dbname ;</span><br><span class="line">2、导入数据库</span><br><span class="line">（1）选择数据库</span><br><span class="line">mysql&gt;use dbname ;</span><br><span class="line">（2）设置数据库编码</span><br><span class="line">mysql&gt;set names utf8;</span><br><span class="line">（3）导入数据（注意sql文件的路径）</span><br><span class="line">mysql&gt;source /home/xxxx/dbname .sql;</span><br></pre></td></tr></table></figure><p><img src="/img/spring/a8.png" alt="enter description here"></p><pre><code>使用xftp工具将本地数据库sql上传服务器中,我这里上传的位置为home,创建sql文件夹存放sql文件即文件路径为/home/sql/dbname.sql</code></pre><p>​<br><img src="/img/spring/a9.png" alt="enter description here"></p><p>查看数据库表结构<br>show tabes;<br><img src="/img/spring/a10.png" alt="enter description here"></p><p>终于把数据库安装导入成功！</p><p>至此，SpringBoot所需要的环境都已安装完成，即需要运行的环境Java和数据库的运行环境MySQL。</p>]]></content>
    
    <summary type="html">
    
      &lt;h5 id=&quot;环境搭建&quot;&gt;&lt;a href=&quot;#环境搭建&quot; class=&quot;headerlink&quot; title=&quot;环境搭建&quot;&gt;&lt;/a&gt;环境搭建&lt;/h5&gt;&lt;pre&gt;&lt;code&gt;首先得买个阿里云的服务器
本地连接阿里云服务器工具:SecureCRT或xshell
&lt;/code&gt;&lt;/pre&gt;
    
    </summary>
    
      <category term="spring" scheme="http://yoursite.com/categories/spring/"/>
    
    
      <category term="spring" scheme="http://yoursite.com/tags/spring/"/>
    
  </entry>
  
  <entry>
    <title>MySql数据库操作</title>
    <link href="http://yoursite.com/2019/01/02/mysql/MySql%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C/"/>
    <id>http://yoursite.com/2019/01/02/mysql/MySql数据库操作/</id>
    <published>2019-01-02T08:03:02.250Z</published>
    <updated>2019-01-02T08:04:58.517Z</updated>
    
    <content type="html"><![CDATA[<h4 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h4><p>MySQL 是最流行的关系型数据库管理系统，在WEB应用方面 MySQL 是最好的RDBMS(Relational Database Management System：关系数据库管理系统)应用软件之一。<br><a id="more"></a></p><h5 id="MYSQL文件夹"><a href="#MYSQL文件夹" class="headerlink" title="MYSQL文件夹:"></a>MYSQL文件夹:</h5><p>1.bin目录，存储可执行文件<br>2.data:存储数据文件<br>3.include:存储包含的头文件<br>4.lib目录，存储库文件<br>5.docs目录，文件<br>share目录，错误消息和字符集文件<br>my.ini文件，MYSQL的配置文件，设置字符集<br>客户端字符集[mysql]:default-character-set=utf8<br>服务器端字符集[mysql]:character-set-server=utf8</p><h5 id="mysql开启与关闭"><a href="#mysql开启与关闭" class="headerlink" title="mysql开启与关闭"></a>mysql开启与关闭</h5><p>开启mysql -uroot -p或net start mysql56<br>关闭net stop mysql57 ,   退出exit或quit或\q<br>设置命令提示符<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Ctrl-C强制退出</span><br><span class="line">设置字符集：</span><br><span class="line">\s </span><br><span class="line">查看：status</span><br><span class="line">-u用户名</span><br><span class="line">-p密码</span><br><span class="line">-h服务器名称</span><br><span class="line">-p端口号</span><br><span class="line">-D打开指定数据库</span><br><span class="line">--prompt=name,设置命令提示符（只对当前连接符）</span><br><span class="line">--delimiter=name,指定分隔符</span><br><span class="line">-V,--version,输出版本信息并退出</span><br></pre></td></tr></table></figure></p><ul><li><p>1.命令提示符用的参数：<br>连接上客户端后，用prompt命令修改提示符参数:<br>\D:完整日期<br>\d:当前数据库<br>\h:服务器名称<br>\u:当前用户名</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">如 prompt \h~\u~\D~\d</span><br></pre></td></tr></table></figure></li><li><p>2.MYSQL常用命令<br> SELECT VERSION();显示当前版本<br> SELECT NOW();当前日期时间<br> SELECT USER();显示当前用户</p></li><li>3.MYSQL语句的规范：<br>  关键字与函数名称全部大写<br>  数据库名称，表名称，字段名称全部小写<br>sql语句必须以分隔符结尾<br>sql语句支持折行操作，1.只要不把单词,标记或者引号字符串分割成两部分，<pre><code>可以在下一行继续写</code></pre>数据库名称、表名称、字段名称尽量不用MYSQL保留字，<br>如果需要使用的时候使用反引号<code></code>将括号括起来。</li><li><p>4.修改默认分隔符<br>DELIMITER 分割符</p></li><li><p>5.上下键调出之前的命令</p></li><li><p>6.开启mysql的输出日志<br> \T</p></li><li><p>7.结束mysql的输出日志<br> \t</p><h4 id="mysql-数据库操作"><a href="#mysql-数据库操作" class="headerlink" title="mysql 数据库操作"></a>mysql 数据库操作</h4><h5 id="表基本操作"><a href="#表基本操作" class="headerlink" title="表基本操作"></a>表基本操作</h5></li><li><p>查看表</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW TABLES [FROM db_name] [LIKE &apos;pattern&apos;|WHEAR expr];</span><br></pre></td></tr></table></figure></li><li><p>查看列（表的组织结构）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SHOW COLUMNS FROM tb_name;</span><br><span class="line">DESC tb_name;</span><br></pre></td></tr></table></figure></li></ul><p>以上两条语句都可以。 </p><ul><li><p>查看表的内容</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM tb_name;</span><br></pre></td></tr></table></figure></li><li><p>插入数据</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INSERT [INTO] tb_name [(col_name,...)] VALUES(val,...);</span><br></pre></td></tr></table></figure></li></ul><p>如果不指明任何字段名，那么插入的数据必须要包含所有的字段</p><h5 id="插入记录"><a href="#插入记录" class="headerlink" title="插入记录"></a>插入记录</h5><p><strong>共有三种Insert语句</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INSERT [INTO] tb_name [(col_name,.....)] &#123;VALUE|VALUES&#125; (&#123;expr|DEFAULT&#125;,...) (...),...</span><br></pre></td></tr></table></figure></p><p>values是标准SQL关键字，value是MySQL自己的。<br>插入语句可以一次使用: value<br>插入多条记录使用: values<br>值可以是：函数,数学表达式,等</p><p>默认值 在创建数据表的时候可以设置DEFAUTL。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE users(</span><br><span class="line">id SAMLLINT UNSIGNED PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">username SAMLLINT VARCHAR(20) NOT NULL,</span><br><span class="line">password SAMLLINT VARCHAR(20) NOT NULL,</span><br><span class="line">age TINYINT UNSIGNED NOT NULL DEFAULT 10,</span><br><span class="line">sex BOOLEAN</span><br><span class="line">);</span><br></pre></td></tr></table></figure></p><p>例子<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">-- 修改第一个用户的信息 id=1</span><br><span class="line">UPDATE user SET age=29 WHERE id=1;</span><br><span class="line"></span><br><span class="line">-- 修改id=3的用户，username age email</span><br><span class="line">UPDATE user SET age=47,email=&apos;lilys@qq.com&apos;,username=&apos;lilys&apos; WHERE id=3;</span><br><span class="line"></span><br><span class="line">-- 所有用户年龄+10</span><br><span class="line">UPDATE user SET age=age+10;</span><br><span class="line"></span><br><span class="line">-- 将id&lt;=5的用户年龄改为-20，将邮箱改为默认值</span><br><span class="line">UPDATE user SET age=age-20,email=DEFAULT WHERE id&lt;=5;</span><br></pre></td></tr></table></figure></p><p>例子<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">-- 不指定字段名称</span><br><span class="line">INSERT user VALUE(1,&apos;king&apos;,24,&apos;382771946@qq.com&apos;);</span><br><span class="line">INSERT user VALUES(NULL,&apos;queen&apos;,25,&apos;queen@qq.com&apos;);</span><br><span class="line">INSERT user VALUES(DEFAULT,&apos;lily&apos;,26,&apos;lily@qq.com&apos;);</span><br><span class="line"></span><br><span class="line">-- 列出指定字段的形式</span><br><span class="line">INSERT user(username,email) VALUES(&apos;rose&apos;,&apos;rose@qq.com&apos;);</span><br><span class="line">INSERT user(age,email,id,username) VALUES(34,&apos;imooc@qq.com&apos;,5,&apos;imooc&apos;);</span><br><span class="line"></span><br><span class="line">-- 一次插入3条记录</span><br><span class="line">INSERT user VALUES(NULL,&apos;a&apos;,DEFAULT,DEFAULT),</span><br><span class="line">(NULL,&apos;b&apos;,56,&apos;b@qq.com&apos;),</span><br><span class="line">(NULL,&apos;c&apos;,14,&apos;c@qq.com&apos;);</span><br><span class="line"></span><br><span class="line">-- INSERT ...SET 的形式</span><br><span class="line">INSERT user SET username=&apos;d&apos;,age=45,email=&apos;d@qq.com&apos;;</span><br><span class="line"></span><br><span class="line">-- INSERT SELECT</span><br><span class="line">INSERT user(username) SELECT a FROM test;</span><br></pre></td></tr></table></figure></p><h5 id="单表删除"><a href="#单表删除" class="headerlink" title="单表删除"></a>单表删除</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DELETE FROM tb_name [WHERE where_condition];</span><br><span class="line">没有where部分则会删除全部记录。</span><br></pre></td></tr></table></figure><h5 id="更新记录"><a href="#更新记录" class="headerlink" title="更新记录"></a>更新记录</h5><ul><li><p>单表更新</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">UPDATE [LOW_PRIORITY] [IGNORE] tb_reference </span><br><span class="line">SET col_name1=&#123;expr|DEFAULT&#125; [,col_name2=&#123;expr|DEFAULT&#125;]...</span><br><span class="line">[WHERE where_condition]</span><br><span class="line">不写where会更新全部的记录。</span><br></pre></td></tr></table></figure></li><li><p>多表更新</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">UPDATE table_references </span><br><span class="line">SET col_name1=&#123;expr1|DEFAULT&#125;</span><br><span class="line">[,col_name2=&#123;expr2|DEFAULT&#125;]...</span><br><span class="line">[WHERE where_condition]</span><br></pre></td></tr></table></figure></li></ul><p><strong>CREATE…SELECT 创建数据表同时将查询结果写入到数据表</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE [IF NOT EXISTS]tb_name</span><br><span class="line">[(create_definetion,...)]</span><br><span class="line">select_statement</span><br></pre></td></tr></table></figure></p><p>比如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE tall (</span><br><span class="line">    tall_id SMALLINT UNSIGNED PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">    num INT</span><br><span class="line">) SELECT 身高 AS num FROM</span><br><span class="line">    av</span><br><span class="line">GROUP BY 身高;</span><br></pre></td></tr></table></figure></p><p>创建新表tall，并从av表中选取身高字段插入到tall表的num字段。 ##连接 ###语法结构<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">table_reference</span><br><span class="line">&#123;[INNER|CROSS] JOIN|&#123;LELT|RIGHT&#125;[OUTER] JOIN&#125;</span><br><span class="line">table_reference</span><br><span class="line">ON conditional_expr</span><br></pre></td></tr></table></figure></p><ul><li>ON为条件。<br>三种连接，即：内连接,  左外连接,   右外连接<ul><li>内连接 显示左表及右表符合连接条件的记录（交集）</li><li>左外连接 显示左表的全部记录及右表符合连接条件的记录 </li><li>右外连接 类别左外连接 ###UPDATE..JOIN..SET 比如<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">UPDATE actor AS a</span><br><span class="line">        INNER JOIN</span><br><span class="line">    tall AS b ON a.tall = b.num </span><br><span class="line">SET </span><br><span class="line">    a.tall = b.tall_id;</span><br></pre></td></tr></table></figure></li></ul></li></ul><p>依据实际情况，选择是否使用别名。（如果两个表中进行比较的字段名相同，则需要别名）<br>该语句完成了一个替换，将actor表中具体的身高数值，替换为tall表中身高的对应id。</p><h5 id="查询语句"><a href="#查询语句" class="headerlink" title="查询语句"></a>查询语句</h5><p>查询就是SELECT语句</p><h5 id="查询记录"><a href="#查询记录" class="headerlink" title="查询记录"></a>查询记录</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">SELECT select_expr [,select_expr ...]</span><br><span class="line">[</span><br><span class="line">FROM table_references</span><br><span class="line">    [WHERE where_condition]</span><br><span class="line">    [GROUP BY &#123;col_name|position&#125; [ASC|DESC],...]</span><br><span class="line">    [HAVING where_condition]</span><br><span class="line">    [ORDER BY &#123;col_name|expr|position&#125; [ASC|DESC],...]</span><br><span class="line">    [LIMIT &#123;[offset,] row_count|row_count OFFSET offset&#125;]</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h5 id="使用别名查询"><a href="#使用别名查询" class="headerlink" title="使用别名查询"></a>使用别名查询</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT id AS userId，username AS uname FROM users;</span><br></pre></td></tr></table></figure><p>查询出来的列名，就变成了别名。AS其实可以省略，但可能会出现问题。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT id username  FROM users;</span><br></pre></td></tr></table></figure></p><p>这样会将username视作id的别名。 </p><h5 id="分组GROUP-BY"><a href="#分组GROUP-BY" class="headerlink" title="分组GROUP BY"></a>分组GROUP BY</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[GROUP BY &#123;col_name|position&#125; [ASC|DESC],...]</span><br></pre></td></tr></table></figure><p><strong>ASC和DESC分别是升序（缺省）和降序</strong><br>看一个脚本：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM users;</span><br><span class="line">SELECT sex FROM users GROUP BY sex;</span><br></pre></td></tr></table></figure></p><p>两条语句的执行结果分别为：<br><img src="/img/mysql/1.png" alt="enter description here"><br><img src="/img/mysql/2.png" alt="enter description here"></p><p>也可以使用编号代替字段名，但是这样不鼓励。比如上面的分组语句可以写成：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT sex FROM users GROUP BY 1;</span><br></pre></td></tr></table></figure></p><p>后面的数字1，值得是在SELECT选取的字段中的顺序。这里只选了一个字段，当然为1。<br>HAVING 与GROUP BY分组联用。<br>只对部分记录做分组操作。有两种用法，比如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT sex,age FROM users GROUP BY sex HAVING age &gt; 35;</span><br><span class="line">SELECT sex FROM users GROUP BY sex HAVING count(id) &gt;=2;</span><br></pre></td></tr></table></figure></p><p>第一种，注意后面的HAVING的字段必须在前面SELECT部分出现才行。<br>第二种，在HAVING后面使用聚合函数，前面无需出现相应字段。<br>!!!Having放在group by后面 ###排序ORDER BY<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[ORDER BY &#123;col_name|expr|position&#125; [ASC|DESC],...]</span><br></pre></td></tr></table></figure></p><p>比如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM users ORDER BY id DESC;</span><br></pre></td></tr></table></figure></p><p>可以排序多个字段，如果第一个字段能排出结果，就不会用到第2个字段。比如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM users ORDER BY id ,id DESC;</span><br></pre></td></tr></table></figure></p><p>因为年龄age有相同的，继续排序就要用到id的降序。 </p><h5 id="LIMIT-限制返回记录的数量"><a href="#LIMIT-限制返回记录的数量" class="headerlink" title="LIMIT 限制返回记录的数量"></a>LIMIT 限制返回记录的数量</h5><p><strong> LIMIT有两种语法结构，第一种比较常见.</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[LIMIT &#123;[offset,] row_count|row_count OFFSET offset&#125;]</span><br></pre></td></tr></table></figure></p><p>起始位置，偏移量<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM users ;</span><br><span class="line">SELECT * FROM users LIMIT 3,2;</span><br><span class="line">SELECT * FROM users LIMIT 2;</span><br></pre></td></tr></table></figure></p><p>3，2：表示从第3条开始返回，返回两条记录。注意记录从0开始编号，即结果集中的从第0条开始。<br>如果LIMIT后面只有一个参数，认作是偏移量，起始位置缺省为0。<br><img src="/img/mysql/3.png" alt="enter description here"><br><img src="/img/mysql/4.png" alt="enter description here"></p><h5 id="合并查询结果UNION"><a href="#合并查询结果UNION" class="headerlink" title="合并查询结果UNION"></a>合并查询结果UNION</h5><p>在多条查询语句之间，使用UNION关键字会何必所有查询结果。<br>默认会去掉重复行，如果不想去掉重复行，请使用UNION ALL<br>需要注意的是，要联合的查询结果必须有相同的列数（列名可以不同）<br>去重效率比不去重效率低</p><h5 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h5><p>子查询（Subquery）是指嵌套在查询内部，且必须始终出现在圆括号内。</p><p>外面的查询并非只是指的查找。</p><ul><li>可以包含的关键字或条件 DISTINCT、GROUP BY、ORDER BY、LIMIT、函数等 <ul><li>外层的查询可以是<br>SELECT<br>INSERT<br>UPDATE<br>SET<br>DO</li></ul></li><li><strong>使用比较运算符的子查询</strong></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">=,&gt;,&lt;,&gt;=,&lt;=,&lt;&gt;,!=,&lt;=&gt;</span><br></pre></td></tr></table></figure><p>语法结构<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">operand comparison_operator &#123;ANY|SOME|ALL&#125; (subquery)</span><br></pre></td></tr></table></figure></p><p>比如：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM av WHERE 身高&gt;=(SELECT AVG(身高) FROM av);</span><br></pre></td></tr></table></figure><p>字段名不加引号 </p><ul><li><strong>修饰比较运算符</strong></li></ul><p>使用ANY、SOME、ALL，ANY和SOME是等价的。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ANYALL</span><br><span class="line">&gt;,&gt;=最小值最大值</span><br><span class="line">&lt;,&lt;=最大值最小值</span><br><span class="line">=,&lt;=&gt;任意值</span><br><span class="line">&lt;&gt;,!=任意值</span><br></pre></td></tr></table></figure></p><p>比如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM av WHERE 胸围&gt;=ALL(SELECT 胸围 FROM av WHERE  身高&lt;160);</span><br></pre></td></tr></table></figure></p><ul><li><strong>使用[NOT]IN的子查询</strong><br>语法结构 operand comparison_operator [NOT] IN (subquery) =ANY和IN等效<br>!=ALL和NOT IN等效<ul><li><strong>使用[NOT]EXISTS的子查询</strong><br>如果子查询返回任何行，EXISTS将返回TRUE，否则返回FALSE。<br>该类子查询使用较少</li></ul></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;MySQL&quot;&gt;&lt;a href=&quot;#MySQL&quot; class=&quot;headerlink&quot; title=&quot;MySQL&quot;&gt;&lt;/a&gt;MySQL&lt;/h4&gt;&lt;p&gt;MySQL 是最流行的关系型数据库管理系统，在WEB应用方面 MySQL 是最好的RDBMS(Relational Database Management System：关系数据库管理系统)应用软件之一。&lt;br&gt;
    
    </summary>
    
      <category term="mysql" scheme="http://yoursite.com/categories/mysql/"/>
    
    
      <category term="数据库,mysql" scheme="http://yoursite.com/tags/%E6%95%B0%E6%8D%AE%E5%BA%93-mysql/"/>
    
  </entry>
  
  <entry>
    <title>mysql增删改查实例</title>
    <link href="http://yoursite.com/2019/01/02/mysql/mysql%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5%E5%AE%9E%E4%BE%8B/"/>
    <id>http://yoursite.com/2019/01/02/mysql/mysql增删改查实例/</id>
    <published>2019-01-02T08:03:02.249Z</published>
    <updated>2019-01-02T00:01:56.000Z</updated>
    
    <content type="html"><![CDATA[<h4 id="添加记录"><a href="#添加记录" class="headerlink" title="添加记录"></a>添加记录</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 测试添加记录</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> <span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> king <span class="keyword">DEFAULT</span> <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> <span class="string">'UTF8'</span>;</span><br><span class="line"><span class="keyword">USE</span> king;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> <span class="keyword">user</span>(</span><br><span class="line">    <span class="keyword">id</span> <span class="built_in">INT</span> <span class="keyword">UNSIGNED</span> AUTO_INCREMENT <span class="keyword">KEY</span> <span class="keyword">COMMENT</span> <span class="string">'编号'</span>,</span><br><span class="line">    username <span class="built_in">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">UNIQUE</span> <span class="keyword">COMMENT</span> <span class="string">'用户名'</span>,</span><br><span class="line">    age TINYINT <span class="keyword">UNSIGNED</span> <span class="keyword">DEFAULT</span> <span class="number">18</span> <span class="keyword">COMMENT</span> <span class="string">'年龄'</span>,</span><br><span class="line">    email <span class="built_in">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'imooc@qq.com'</span> <span class="keyword">COMMENT</span> <span class="string">'邮箱'</span></span><br><span class="line">)<span class="keyword">ENGINE</span>=<span class="keyword">INNODB</span> <span class="keyword">CHARSET</span>=UTF8;</span><br></pre></td></tr></table></figure><a id="more"></a><p>添加数据三种方式<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 不指定字段名称</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">user</span> <span class="keyword">VALUE</span>(<span class="number">1</span>,<span class="string">'king'</span>,<span class="number">24</span>,<span class="string">'382771946@qq.com'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">user</span> <span class="keyword">VALUES</span>(<span class="literal">NULL</span>,<span class="string">'queen'</span>,<span class="number">25</span>,<span class="string">'queen@qq.com'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">user</span> <span class="keyword">VALUES</span>(<span class="keyword">DEFAULT</span>,<span class="string">'lily'</span>,<span class="number">26</span>,<span class="string">'lily@qq.com'</span>);</span><br></pre></td></tr></table></figure></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 列出指定字段的形式</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">user</span>(username,email) <span class="keyword">VALUES</span>(<span class="string">'rose'</span>,<span class="string">'rose@qq.com'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">user</span>(age,email,<span class="keyword">id</span>,username) <span class="keyword">VALUES</span>(<span class="number">34</span>,<span class="string">'imooc@qq.com'</span>,<span class="number">5</span>,<span class="string">'imooc'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 一次插入3条记录</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">user</span> <span class="keyword">VALUES</span>(<span class="literal">NULL</span>,<span class="string">'a'</span>,<span class="keyword">DEFAULT</span>,<span class="keyword">DEFAULT</span>),</span><br><span class="line">(<span class="literal">NULL</span>,<span class="string">'b'</span>,<span class="number">56</span>,<span class="string">'b@qq.com'</span>),</span><br><span class="line">(<span class="literal">NULL</span>,<span class="string">'c'</span>,<span class="number">14</span>,<span class="string">'c@qq.com'</span>);</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- INSERT ...SET 的形式</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">user</span> <span class="keyword">SET</span> username=<span class="string">'d'</span>,age=<span class="number">45</span>,email=<span class="string">'d@qq.com'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- INSERT SELECT</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">user</span>(username) <span class="keyword">SELECT</span> a <span class="keyword">FROM</span> <span class="keyword">test</span>;</span><br></pre></td></tr></table></figure><h4 id="删除记录"><a href="#删除记录" class="headerlink" title="删除记录"></a>删除记录</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 测试删除语句</span></span><br><span class="line"><span class="comment">-- 删除用户名为king</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">WHERE</span> username=<span class="string">'king'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除年龄为24的用户</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">WHERE</span> age=<span class="number">24</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除表中所有记录</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> <span class="keyword">user</span>;</span><br></pre></td></tr></table></figure><h4 id="修改记录"><a href="#修改记录" class="headerlink" title="修改记录"></a>修改记录</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 测试更新语句</span></span><br><span class="line"><span class="comment">-- 修改第一个用户的信息 id=1</span></span><br><span class="line"><span class="keyword">UPDATE</span> <span class="keyword">user</span> <span class="keyword">SET</span> age=<span class="number">29</span> <span class="keyword">WHERE</span> <span class="keyword">id</span>=<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 修改id=3的用户，username age email</span></span><br><span class="line"><span class="keyword">UPDATE</span> <span class="keyword">user</span> <span class="keyword">SET</span> age=<span class="number">47</span>,email=<span class="string">'lilys@qq.com'</span>,username=<span class="string">'lilys'</span> <span class="keyword">WHERE</span> <span class="keyword">id</span>=<span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 所有用户年龄+10</span></span><br><span class="line"><span class="keyword">UPDATE</span> <span class="keyword">user</span> <span class="keyword">SET</span> age=age+<span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 将id&lt;=5的用户年龄改为-20，将邮箱改为默认值</span></span><br><span class="line"><span class="keyword">UPDATE</span> <span class="keyword">user</span> <span class="keyword">SET</span> age=age<span class="number">-20</span>,email=<span class="keyword">DEFAULT</span> <span class="keyword">WHERE</span> <span class="keyword">id</span>&lt;=<span class="number">5</span>;</span><br></pre></td></tr></table></figure><h4 id="查询记录"><a href="#查询记录" class="headerlink" title="查询记录"></a>查询记录</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 测试查询操作</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> user1(</span><br><span class="line"><span class="keyword">id</span> <span class="built_in">INT</span> <span class="keyword">UNSIGNED</span> AUTO_INCREMENT <span class="keyword">KEY</span>,</span><br><span class="line">username <span class="built_in">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">UNIQUE</span> <span class="keyword">COMMENT</span> <span class="string">'编号'</span>,</span><br><span class="line">age TINYINT <span class="keyword">UNSIGNED</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">18</span>  <span class="keyword">COMMENT</span> <span class="string">'年龄'</span>,</span><br><span class="line">sex ENUM(<span class="string">'男'</span>,<span class="string">'女'</span>,<span class="string">'保密'</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'保密'</span> <span class="keyword">COMMENT</span> <span class="string">'性别'</span>,</span><br><span class="line">addr <span class="built_in">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'北京'</span>,</span><br><span class="line">married TINYINT(<span class="number">1</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span> <span class="keyword">COMMENT</span> <span class="string">'0代表未结婚，1代表已婚'</span>,</span><br><span class="line">salary <span class="built_in">FLOAT</span>(<span class="number">8</span>,<span class="number">2</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span> <span class="keyword">COMMENT</span> <span class="string">'薪水'</span></span><br><span class="line">)<span class="keyword">ENGINE</span>=<span class="keyword">INNODB</span> <span class="keyword">CHARSET</span>=UTF8;</span><br><span class="line"><span class="keyword">INSERT</span> user1 <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="string">'king'</span>,<span class="number">23</span>,<span class="string">'男'</span>,<span class="string">'北京'</span>,<span class="number">1</span>,<span class="number">50000</span>);</span><br><span class="line"><span class="keyword">INSERT</span> user1(username,age,sex,addr,married,salary) <span class="keyword">VALUES</span>(<span class="string">'queen'</span>,<span class="number">27</span>,<span class="string">'女'</span>,<span class="string">'上海'</span>,<span class="number">0</span>,<span class="number">25000</span>);</span><br><span class="line"><span class="keyword">INSERT</span> user1 <span class="keyword">SET</span> username=<span class="string">'imooc'</span>,age=<span class="number">31</span>,sex=<span class="string">'女'</span>,addr=<span class="string">'北京'</span>,salary=<span class="number">40000</span>;</span><br><span class="line"><span class="keyword">INSERT</span> user1 <span class="keyword">VALUES</span>(<span class="literal">NULL</span>,<span class="string">'张三'</span>,<span class="number">38</span>,<span class="string">'男'</span>,<span class="string">'上海'</span>,<span class="number">0</span>,<span class="number">15000</span>),</span><br><span class="line">(<span class="literal">NULL</span>,<span class="string">'张三风'</span>,<span class="number">38</span>,<span class="string">'男'</span>,<span class="string">'上海'</span>,<span class="number">0</span>,<span class="number">15000</span>),</span><br><span class="line">(<span class="literal">NULL</span>,<span class="string">'张子怡'</span>,<span class="number">39</span>,<span class="string">'女'</span>,<span class="string">'北京'</span>,<span class="number">1</span>,<span class="number">85000</span>),</span><br><span class="line">(<span class="literal">NULL</span>,<span class="string">'汪峰'</span>,<span class="number">42</span>,<span class="string">'男'</span>,<span class="string">'深圳'</span>,<span class="number">1</span>,<span class="number">95000</span>),</span><br><span class="line">(<span class="literal">NULL</span>,<span class="string">'刘德华'</span>,<span class="number">58</span>,<span class="string">'男'</span>,<span class="string">'广州'</span>,<span class="number">0</span>,<span class="number">115000</span>),</span><br><span class="line">(<span class="literal">NULL</span>,<span class="string">'吴亦凡'</span>,<span class="number">28</span>,<span class="string">'男'</span>,<span class="string">'北京'</span>,<span class="number">0</span>,<span class="number">75000</span>),</span><br><span class="line">(<span class="literal">NULL</span>,<span class="string">'奶茶妹'</span>,<span class="number">18</span>,<span class="string">'女'</span>,<span class="string">'北京'</span>,<span class="number">1</span>,<span class="number">65000</span>),</span><br><span class="line">(<span class="literal">NULL</span>,<span class="string">'刘嘉玲'</span>,<span class="number">36</span>,<span class="string">'女'</span>,<span class="string">'广州'</span>,<span class="number">0</span>,<span class="number">15000</span>);</span><br></pre></td></tr></table></figure><p>查询操作<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询表中所有记录</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> user1;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- username,addr,age</span></span><br><span class="line"><span class="keyword">SELECT</span> username,addr,age <span class="keyword">FROM</span> user1;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询king数据库下user1表中的所有记录</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> king.user1;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询user1表中的id 编号 username 用户名 sex 性别</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span> <span class="keyword">AS</span> <span class="string">'编号'</span>,username <span class="keyword">AS</span> <span class="string">'用户名'</span>, sex <span class="keyword">AS</span> <span class="string">'性别'</span></span><br><span class="line"><span class="keyword">FROM</span> user1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span> age,age <span class="keyword">id</span>,username <span class="keyword">FROM</span> user1;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 给表起别名</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username <span class="keyword">FROM</span> user1 <span class="keyword">AS</span> u;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 测试表名.字段名</span></span><br><span class="line"><span class="keyword">SELECT</span> user1.id,user1.username,user1.age <span class="keyword">FROM</span> user1 ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> u.id,u.username,u.addr,u.sex <span class="keyword">FROM</span> user1 <span class="keyword">AS</span> u;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 测试WHERE 条件的比较运算符</span></span><br><span class="line"><span class="comment">-- 查询id,username,age id=5的用户</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age <span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">id</span>=<span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age <span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">id</span>=<span class="number">50</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 添加desc字段 VARCHAR(100)</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> user1</span><br><span class="line"><span class="keyword">ADD</span> userDesc <span class="built_in">VARCHAR</span>(<span class="number">100</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 更新id&lt;=9的用户 userDesc='this is a test'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">UPDATE</span> user1 <span class="keyword">SET</span> userDesc=<span class="string">'this is a test'</span></span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">id</span>&lt;=<span class="number">9</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询用户userDesc 为NULL的用户</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age,userDesc <span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">WHERE</span> userDesc=<span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 检测NULL值</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age,userDesc <span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">WHERE</span> userDesc&lt;=&gt;<span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- IS [NOT] NULL检测NULL值</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age,userDesc <span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">WHERE</span> userDesc <span class="keyword">IS</span> <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 测试范围BETWEEN AND</span></span><br><span class="line"><span class="comment">-- 查询年龄在18~30之间的用户</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age,sex <span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">WHERE</span> age <span class="keyword">BETWEEN</span> <span class="number">18</span> <span class="keyword">AND</span> <span class="number">30</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询薪水在10000~50000之间的用户</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age,salary <span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="keyword">BETWEEN</span> <span class="number">10000</span> <span class="keyword">AND</span> <span class="number">50000</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age,salary <span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="keyword">NOT</span> <span class="keyword">BETWEEN</span> <span class="number">10000</span> <span class="keyword">AND</span> <span class="number">50000</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 测试指定集合 IN</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询编号为1,3,5,7,9</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age <span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">id</span> <span class="keyword">IN</span>(<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">9</span>,<span class="number">29</span>,<span class="number">45</span>,<span class="number">78</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age <span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">WHERE</span> username <span class="keyword">IN</span>(<span class="string">'king'</span>,<span class="string">'queen'</span>,<span class="string">'lily'</span>,<span class="string">'rose'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 测试逻辑运算符</span></span><br><span class="line"><span class="comment">-- 查询性别为男并且年龄&gt;=20的用户</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age,sex <span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">WHERE</span> sex=<span class="string">'男'</span> <span class="keyword">AND</span> age&gt;=<span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- id&gt;=5 &amp;&amp; age&lt;=30</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age,sex <span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">id</span>&gt;=<span class="number">5</span> <span class="keyword">AND</span> age&lt;=<span class="number">30</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age,sex <span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">id</span>&gt;=<span class="number">5</span> <span class="keyword">AND</span> age&lt;=<span class="number">30</span> <span class="keyword">AND</span> sex=<span class="string">'男'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 要求sex='女' 并且 addr='北京'</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age,sex,addr <span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">WHERE</span> sex=<span class="string">'女'</span> <span class="keyword">AND</span> addr=<span class="string">'北京'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询薪水范围在60000~10000并且性别为男 addr='北京'</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age,sex,salary,addr <span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="keyword">BETWEEN</span> <span class="number">60000</span> <span class="keyword">AND</span> <span class="number">100000</span> <span class="keyword">AND</span> sex=<span class="string">'男'</span> <span class="keyword">AND</span> addr=<span class="string">'北京'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询id=1 或者 用户名为queen</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age <span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">id</span>=<span class="number">1</span> <span class="keyword">OR</span> username=<span class="string">'queen'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 测试模糊查询</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age <span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">WHERE</span> username=<span class="string">'king'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age <span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">WHERE</span> username <span class="keyword">LIKE</span> <span class="string">'king'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 要求用户名中包含三</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age,sex <span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">WHERE</span> username <span class="keyword">LIKE</span> <span class="string">'%三%'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 用户名中包含n</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age <span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">WHERE</span> username <span class="keyword">LIKE</span> <span class="string">'%in%'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 要求查询出姓张的用户</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age <span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">WHERE</span> username <span class="keyword">LIKE</span> <span class="string">'张%'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询以风结尾的用户</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age <span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">WHERE</span> username <span class="keyword">LIKE</span> <span class="string">'%风'</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 用户名长度为三位的用户</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age,sex <span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">WHERE</span> username <span class="keyword">LIKE</span> <span class="string">'___'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age,sex <span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">WHERE</span> username <span class="keyword">LIKE</span> <span class="string">'张_'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age,sex <span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">WHERE</span> username <span class="keyword">LIKE</span> <span class="string">'张_%'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 测试分组</span></span><br><span class="line"><span class="comment">-- 按照性别分组sex</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age,sex <span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> sex;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 按照addr分组</span></span><br><span class="line"><span class="keyword">SELECT</span> username,age,sex,addr <span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> addr;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 按照性别分组，查询组中的用户名有哪些</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">GROUP_CONCAT</span>(username),age,sex,addr <span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> sex;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">GROUP_CONCAT</span>(username),age,sex,<span class="keyword">GROUP_CONCAT</span>(addr) <span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> sex;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 测试COUNT()</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(*) <span class="keyword">FROM</span> user1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(<span class="keyword">id</span>) <span class="keyword">FROM</span> user1;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 按照sex分组，得到用户名详情，并且分别组中的总人数</span></span><br><span class="line"><span class="keyword">SELECT</span> sex,<span class="keyword">GROUP_CONCAT</span>(username) <span class="keyword">AS</span> usersDetail,<span class="keyword">COUNT</span>(*) <span class="keyword">AS</span> totalUsers <span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> sex;</span><br></pre></td></tr></table></figure></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 按照addr分组，得到用户名的详情，总人数，得到组中年龄的总和，年龄的最大值、最小值、平均值和</span></span><br><span class="line"><span class="keyword">SELECT</span> addr,</span><br><span class="line"><span class="keyword">GROUP_CONCAT</span>(username) <span class="keyword">AS</span> usersDetail,</span><br><span class="line"><span class="keyword">COUNT</span>(*) <span class="keyword">AS</span> totalUsers,</span><br><span class="line"><span class="keyword">SUM</span>(age) <span class="keyword">AS</span> sum_age,</span><br><span class="line"><span class="keyword">MAX</span>(age) <span class="keyword">AS</span> max_age,</span><br><span class="line"><span class="keyword">MIN</span>(age) <span class="keyword">AS</span> min_age,</span><br><span class="line"><span class="keyword">AVG</span>(age) <span class="keyword">AS</span> avg_age</span><br><span class="line"><span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> addr;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 按照sex分组，统计组中总人数、用户名详情，得到薪水总和，薪水最大值、最小值、平均值</span></span><br><span class="line"><span class="keyword">SELECT</span> sex,</span><br><span class="line"><span class="keyword">GROUP_CONCAT</span>(username) <span class="keyword">AS</span> usersDetail,</span><br><span class="line"><span class="keyword">COUNT</span>(*) <span class="keyword">AS</span> totalUsers,</span><br><span class="line"><span class="keyword">SUM</span>(salary) <span class="keyword">AS</span> sum_salary,</span><br><span class="line"><span class="keyword">MAX</span>(salary) <span class="keyword">AS</span> max_salary,</span><br><span class="line"><span class="keyword">MIN</span>(salary) <span class="keyword">AS</span> min_salary,</span><br><span class="line"><span class="keyword">AVG</span>(salary) <span class="keyword">AS</span> avg_salary</span><br><span class="line"><span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> sex;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">GROUP_CONCAT</span>(username) <span class="keyword">AS</span> usersDetail,</span><br><span class="line"><span class="keyword">COUNT</span>(*) <span class="keyword">AS</span> totalUsers</span><br><span class="line"><span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> sex</span><br><span class="line"><span class="keyword">WITH</span> <span class="keyword">ROLLUP</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 按照字段的位置来分组</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,sex,</span><br><span class="line"><span class="keyword">GROUP_CONCAT</span>(username) <span class="keyword">AS</span> usersDetail,</span><br><span class="line"><span class="keyword">COUNT</span>(*) <span class="keyword">AS</span> totalUsers,</span><br><span class="line"><span class="keyword">SUM</span>(salary) <span class="keyword">AS</span> sum_salary,</span><br><span class="line"><span class="keyword">MAX</span>(salary) <span class="keyword">AS</span> max_salary,</span><br><span class="line"><span class="keyword">MIN</span>(salary) <span class="keyword">AS</span> min_salary,</span><br><span class="line"><span class="keyword">AVG</span>(salary) <span class="keyword">AS</span> avg_salary</span><br><span class="line"><span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询age&gt;=30的用户并且按照sex分组</span></span><br><span class="line"><span class="keyword">SELECT</span> sex,<span class="keyword">GROUP_CONCAT</span>(username) <span class="keyword">AS</span> usersDetail,</span><br><span class="line"><span class="keyword">COUNT</span>(*) <span class="keyword">AS</span> totalUsers</span><br><span class="line"><span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">WHERE</span> age&gt;=<span class="number">30</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> sex;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 按照addr分组，统计总人数</span></span><br><span class="line"><span class="keyword">SELECT</span> addr,</span><br><span class="line"><span class="keyword">GROUP_CONCAT</span>(username) <span class="keyword">AS</span> usersDetail,</span><br><span class="line"><span class="keyword">COUNT</span>(*) <span class="keyword">AS</span> totalUsers</span><br><span class="line"><span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> addr;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 对于分组结果进行二次筛选，条件是组中总人数&gt;=3</span></span><br><span class="line"><span class="keyword">SELECT</span> addr,</span><br><span class="line"><span class="keyword">GROUP_CONCAT</span>(username) <span class="keyword">AS</span> usersDetail,</span><br><span class="line"><span class="keyword">COUNT</span>(*) <span class="keyword">AS</span> totalUsers</span><br><span class="line"><span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> addr</span><br><span class="line"><span class="keyword">HAVING</span> <span class="keyword">COUNT</span>(*)&gt;=<span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> addr,</span><br><span class="line"><span class="keyword">GROUP_CONCAT</span>(username) <span class="keyword">AS</span> usersDetail,</span><br><span class="line"><span class="keyword">COUNT</span>(*) <span class="keyword">AS</span> totalUsers</span><br><span class="line"><span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> addr</span><br><span class="line"><span class="keyword">HAVING</span> totalUsers&gt;=<span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 按照addr分组，</span></span><br><span class="line"><span class="keyword">SELECT</span> addr,</span><br><span class="line"><span class="keyword">GROUP_CONCAT</span>(username) <span class="keyword">AS</span> usersDetail,</span><br><span class="line"><span class="keyword">COUNT</span>(*) <span class="keyword">AS</span> totalUsers,</span><br><span class="line"><span class="keyword">SUM</span>(salary) <span class="keyword">AS</span> sum_salary,</span><br><span class="line"><span class="keyword">MAX</span>(salary) <span class="keyword">AS</span> max_salary,</span><br><span class="line"><span class="keyword">MIN</span>(salary) <span class="keyword">AS</span> min_salary,</span><br><span class="line"><span class="keyword">AVG</span>(salary) <span class="keyword">AS</span> avg_salary</span><br><span class="line"><span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> addr;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 要求平均薪水&gt;=40000</span></span><br><span class="line"><span class="keyword">SELECT</span> addr,</span><br><span class="line"><span class="keyword">GROUP_CONCAT</span>(username) <span class="keyword">AS</span> usersDetail,</span><br><span class="line"><span class="keyword">COUNT</span>(*) <span class="keyword">AS</span> totalUsers,</span><br><span class="line"><span class="keyword">SUM</span>(salary) <span class="keyword">AS</span> sum_salary,</span><br><span class="line"><span class="keyword">MAX</span>(salary) <span class="keyword">AS</span> max_salary,</span><br><span class="line"><span class="keyword">MIN</span>(salary) <span class="keyword">AS</span> min_salary,</span><br><span class="line"><span class="keyword">AVG</span>(salary) <span class="keyword">AS</span> avg_salary</span><br><span class="line"><span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> addr</span><br><span class="line"><span class="keyword">HAVING</span> avg_salary&gt;=<span class="number">40000</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 测试排序</span></span><br><span class="line"><span class="comment">-- 按照id降序排列</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age</span><br><span class="line"><span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">id</span> <span class="keyword">DESC</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 按照age升序</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age</span><br><span class="line"><span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> age ;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 按照多个字段排序</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age</span><br><span class="line"><span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> age <span class="keyword">ASC</span>,<span class="keyword">id</span> <span class="keyword">ASC</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 测试条件+排序</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age</span><br><span class="line"><span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">WHERE</span> age&gt;=<span class="number">30</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age</span><br><span class="line"><span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">WHERE</span> age&gt;=<span class="number">30</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> age <span class="keyword">DESC</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 实现随机记录</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age</span><br><span class="line"><span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">RAND</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 测试LIMIT语句</span></span><br><span class="line"><span class="comment">-- 显示结果集的前5条记录</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age,sex</span><br><span class="line"><span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">LIMIT</span> <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age,sex</span><br><span class="line"><span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">LIMIT</span> <span class="number">0</span>,<span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 显示前3条记录</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age,sex</span><br><span class="line"><span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">LIMIT</span> <span class="number">0</span>,<span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age,sex</span><br><span class="line"><span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">LIMIT</span> <span class="number">3</span>,<span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 更新前3条记录，将age+5</span></span><br><span class="line"><span class="keyword">UPDATE</span> user1 <span class="keyword">SET</span> age=age+<span class="number">5</span> <span class="keyword">LIMIT</span> <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 按照id降序排列，更新前三条记录，将age-10</span></span><br><span class="line"><span class="keyword">UPDATE</span> user1 <span class="keyword">SET</span> age=age<span class="number">-10</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">id</span> <span class="keyword">DESC</span> <span class="keyword">LIMIT</span> <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除前三条记录</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">LIMIT</span> <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">id</span> <span class="keyword">DESC</span></span><br><span class="line"><span class="keyword">LIMIT</span> <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 测试完整SELECT 语句的形式</span></span><br><span class="line"><span class="keyword">SELECT</span> addr,</span><br><span class="line"><span class="keyword">GROUP_CONCAT</span>(username) <span class="keyword">AS</span> usersDetail,</span><br><span class="line"><span class="keyword">COUNT</span>(*) <span class="keyword">AS</span> totalUsers,</span><br><span class="line"><span class="keyword">SUM</span>(age) <span class="keyword">AS</span> sum_age,</span><br><span class="line"><span class="keyword">MAX</span>(age) <span class="keyword">AS</span> max_age,</span><br><span class="line"><span class="keyword">MIN</span>(age) <span class="keyword">AS</span> min_age,</span><br><span class="line"><span class="keyword">AVG</span>(age) <span class="keyword">AS</span> avg_age</span><br><span class="line"><span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">id</span>&gt;=<span class="number">2</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> addr;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> addr,</span><br><span class="line"><span class="keyword">GROUP_CONCAT</span>(username) <span class="keyword">AS</span> usersDetail,</span><br><span class="line"><span class="keyword">COUNT</span>(*) <span class="keyword">AS</span> totalUsers,</span><br><span class="line"><span class="keyword">SUM</span>(age) <span class="keyword">AS</span> sum_age,</span><br><span class="line"><span class="keyword">MAX</span>(age) <span class="keyword">AS</span> max_age,</span><br><span class="line"><span class="keyword">MIN</span>(age) <span class="keyword">AS</span> min_age,</span><br><span class="line"><span class="keyword">AVG</span>(age) <span class="keyword">AS</span> avg_age</span><br><span class="line"><span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">id</span>&gt;=<span class="number">2</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> addr</span><br><span class="line"><span class="keyword">HAVING</span> totalUsers&gt;=<span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> addr,</span><br><span class="line"><span class="keyword">GROUP_CONCAT</span>(username) <span class="keyword">AS</span> usersDetail,</span><br><span class="line"><span class="keyword">COUNT</span>(*) <span class="keyword">AS</span> totalUsers,</span><br><span class="line"><span class="keyword">SUM</span>(age) <span class="keyword">AS</span> sum_age,</span><br><span class="line"><span class="keyword">MAX</span>(age) <span class="keyword">AS</span> max_age,</span><br><span class="line"><span class="keyword">MIN</span>(age) <span class="keyword">AS</span> min_age,</span><br><span class="line"><span class="keyword">AVG</span>(age) <span class="keyword">AS</span> avg_age</span><br><span class="line"><span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">id</span>&gt;=<span class="number">2</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> addr</span><br><span class="line"><span class="keyword">HAVING</span> totalUsers&gt;=<span class="number">2</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> totalUsers <span class="keyword">ASC</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> addr,</span><br><span class="line"><span class="keyword">GROUP_CONCAT</span>(username) <span class="keyword">AS</span> usersDetail,</span><br><span class="line"><span class="keyword">COUNT</span>(*) <span class="keyword">AS</span> totalUsers,</span><br><span class="line"><span class="keyword">SUM</span>(age) <span class="keyword">AS</span> sum_age,</span><br><span class="line"><span class="keyword">MAX</span>(age) <span class="keyword">AS</span> max_age,</span><br><span class="line"><span class="keyword">MIN</span>(age) <span class="keyword">AS</span> min_age,</span><br><span class="line"><span class="keyword">AVG</span>(age) <span class="keyword">AS</span> avg_age</span><br><span class="line"><span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">id</span>&gt;=<span class="number">2</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> addr</span><br><span class="line"><span class="keyword">HAVING</span> totalUsers&gt;=<span class="number">2</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> totalUsers <span class="keyword">ASC</span></span><br><span class="line"><span class="keyword">LIMIT</span> <span class="number">0</span>,<span class="number">2</span>;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;添加记录&quot;&gt;&lt;a href=&quot;#添加记录&quot; class=&quot;headerlink&quot; title=&quot;添加记录&quot;&gt;&lt;/a&gt;添加记录&lt;/h4&gt;&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;-- 测试添加记录&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;DATABASE&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;IF&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;EXISTS&lt;/span&gt; king &lt;span class=&quot;keyword&quot;&gt;DEFAULT&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;CHARACTER&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;SET&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;UTF8&#39;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;USE&lt;/span&gt; king;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;TABLE&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;IF&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;EXISTS&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;user&lt;/span&gt;(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;INT&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;UNSIGNED&lt;/span&gt; AUTO_INCREMENT &lt;span class=&quot;keyword&quot;&gt;KEY&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;COMMENT&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;编号&#39;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    username &lt;span class=&quot;built_in&quot;&gt;VARCHAR&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;20&lt;/span&gt;) &lt;span class=&quot;keyword&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;UNIQUE&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;COMMENT&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;用户名&#39;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    age TINYINT &lt;span class=&quot;keyword&quot;&gt;UNSIGNED&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;DEFAULT&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;18&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;COMMENT&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;年龄&#39;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    email &lt;span class=&quot;built_in&quot;&gt;VARCHAR&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;50&lt;/span&gt;) &lt;span class=&quot;keyword&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;DEFAULT&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;imooc@qq.com&#39;&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;COMMENT&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;邮箱&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;span class=&quot;keyword&quot;&gt;ENGINE&lt;/span&gt;=&lt;span class=&quot;keyword&quot;&gt;INNODB&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;CHARSET&lt;/span&gt;=UTF8;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="mysql" scheme="http://yoursite.com/categories/mysql/"/>
    
    
      <category term="数据库,mysql" scheme="http://yoursite.com/tags/%E6%95%B0%E6%8D%AE%E5%BA%93-mysql/"/>
    
  </entry>
  
  <entry>
    <title>初识数据库</title>
    <link href="http://yoursite.com/2019/01/02/mysql/%E5%88%9D%E8%AF%86%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    <id>http://yoursite.com/2019/01/02/mysql/初识数据库/</id>
    <published>2019-01-02T08:02:47.384Z</published>
    <updated>2019-01-02T00:01:56.000Z</updated>
    
    <content type="html"><![CDATA[<h4 id="初识数据库"><a href="#初识数据库" class="headerlink" title="初识数据库"></a>初识数据库</h4><h5 id="什么是数据库"><a href="#什么是数据库" class="headerlink" title="什么是数据库"></a>什么是数据库</h5><p>数据库（Database）是按照数据结构来组织、存储和管理数据的仓库，</p><p>每个数据库都有一个或多个不同的API用于创建，访问，管理，搜索和复制所保存的数据。</p><p>我们也可以将数据存储在文件中，但是在文件中读写数据速度相对较慢。</p><p>所以，现在我们使用关系型数据库管理系统（RDBMS）来存储和管理的大数据量。所谓的关系型数据库，是建立在关系模型基础上的数据库，借助于集合代数等数学概念和方法来处理数据库中的数据。<br><a id="more"></a><br>RDBMS即关系数据库管理系统(Relational Database Management System)的特点：</p><p>1.数据以表格的形式出现<br>2.每行为各种记录名称<br>3.每列为记录名称所对应的数据域<br>4.许多的行和列组成一张表单</p><p>常见的数据库</p><ul><li>Oracle</li><li>DB2</li><li>SQL server</li><li>Postgre SQL</li><li>MySql</li></ul><p>数据库相关的术语</p><ul><li>数据库系统(DataBase System): DBS<ul><li>数据库(DataBase)</li><li>数据库管理系统(DataBase Management System):DBMS</li><li>应用开发工具</li><li>管理员及用户</li></ul></li><li>SQL语言(Structured Query Language：结构化查询语言)<ul><li>DDL   数据定义语言</li><li>DML  数据操作语言</li><li>DQL 数据查询语言</li><li>DCL 数据控制语言</li></ul></li></ul><p>RDBMS 术语</p><ul><li>数据库: 数据库是一些关联表的集合。</li><li>数据表: 表是数据的矩阵。在一个数据库中的表看起来像一个简单的电子表格。</li><li>列: 一列(数据元素) 包含了相同的数据, 例如邮政编码的数据。</li><li>行：一行（=元组，或记录）是一组相关的数据，例如一条用户订阅的数据。</li><li>冗余：存储两倍数据，冗余降低了性能，但提高了数据的安全性。</li><li>主键：主键是唯一的。一个数据表中只能包含一个主键。你可以使用主键来查询数据。</li><li>外键：外键用于关联两个表。</li><li>复合键：复合键（组合键）将多个列作为一个索引键，一般用于复合索引。</li><li>索引：使用索引可快速访问数据库表中的特定信息。索引是对数据库表中一列或多列的值进行排序的一种结构。类似于书籍的目录。</li><li>参照完整性: 参照的完整性要求关系中不允许引用不存在的实体。与实体完整性是关系模型必须满足的完整性约束条件，目的是保证数据的一致性。<h4 id="MySql-相关操作"><a href="#MySql-相关操作" class="headerlink" title="MySql 相关操作"></a>MySql 相关操作</h4>MySQL 是最流行的关系型数据库管理系统，在WEB应用方面 MySQL 是最好的RDBMS(Relational Database Management System：关系数据库管理系统)应用软件之一。<br>配置下 MySQL 的配置文件my.ini <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[mysql]</span><br><span class="line"># 设置mysql客户端默认字符集</span><br><span class="line">default-character-set=utf8</span><br><span class="line"> </span><br><span class="line">[mysqld]</span><br><span class="line"># 设置3306端口</span><br><span class="line">port = 3306</span><br><span class="line"># 设置mysql的安装目录</span><br><span class="line">basedir=C:\\web\\mysql-8.0.11</span><br><span class="line"># 设置 mysql数据库的数据的存放目录，MySQL 8+ 不需要以下配置，系统自己生成即可，否则有可能报错</span><br><span class="line"># datadir=C:\\web\\sqldata</span><br><span class="line"># 允许最大连接数</span><br><span class="line">max_connections=20</span><br><span class="line"># 服务端使用的字符集默认为8比特编码的latin1字符集</span><br><span class="line">character-set-server=utf8</span><br><span class="line"># 创建新表时将使用的默认存储引擎</span><br><span class="line">default-storage-engine=INNODB</span><br></pre></td></tr></table></figure></li></ul><h5 id="登录-退出MySql"><a href="#登录-退出MySql" class="headerlink" title="登录/退出MySql"></a>登录/退出MySql</h5><ul><li>登录<ul><li>mysql -uroot -p</li><li>mysql -uroot -proot</li><li>得到版本号<br>mysql -V<br>nysql –version</li><li>登录的同时打开指定的数据库<br>mysql -uroot -p -D db_name</li></ul></li><li>退出<ul><li>exit</li><li>quit</li></ul></li><li>登录信息中需要掌握的<ul><li>命令行结束符默认使用; 或者\g来结束</li><li>可以通过help或者\h或者?加上关键字来查看手册</li><li>\c可以取消当前命令的执行<h5 id="SQL语句语法规范"><a href="#SQL语句语法规范" class="headerlink" title="SQL语句语法规范"></a>SQL语句语法规范</h5></li></ul></li><li>常用的MySQL的关键字我们需要大写,库名,表名,字段名称等使用小写</li><li>SQL语句支持折行操作,拆分的时候不能把完整单词拆开</li><li>数据库名称,表名称,字段名称不要使用MySQL的保留字,如果必须要使用,需要加反引号 <code></code> 将其括起来<h5 id="常用的SQL语句"><a href="#常用的SQL语句" class="headerlink" title="常用的SQL语句"></a>常用的SQL语句</h5></li><li><p>获取登录的用户</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT USER()</span><br></pre></td></tr></table></figure></li><li><p>获取MySQl的版本信息</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT VERSION()</span><br></pre></td></tr></table></figure></li><li><p>获取当前的日期信息</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT NOW()</span><br></pre></td></tr></table></figure></li><li><p>获取当前打开的数据库</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT DATABASE()</span><br></pre></td></tr></table></figure></li></ul><h4 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//方式一</span><br><span class="line">CREATE DATABASE db_name;</span><br><span class="line">//方式二</span><br><span class="line">CREATE SCHEMA db_name;</span><br></pre></td></tr></table></figure><ul><li><p>检测数据库名称是否存在,不存在就创建</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CREATE DATABASE [IF NOT EXISTS] db_name; </span><br><span class="line">//方括号中的(可选)可写可不写</span><br></pre></td></tr></table></figure></li><li><p>在创建数据库的同时制定编码方式</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE DATABASE [IF NOT EXISTS] db_name [DEFAULT] CHARACTER SET [=] charset;</span><br></pre></td></tr></table></figure></li></ul><p>注意:<br>数据库名称最好有意义<br>名称中不能包含特殊字符或者是Mysql关键字</p><ul><li><p>查看当前服务器下全部数据库</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//方式一</span><br><span class="line">SHOW DATABASES;</span><br><span class="line">//方式二</span><br><span class="line">SHOW SCHEMAS;</span><br></pre></td></tr></table></figure></li><li><p>查看指定数据的详细信息</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW CREATE DATABASE db_name;</span><br></pre></td></tr></table></figure></li><li><p>修改指定数据库的编码方式</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ALTER DATABASE db_name [DEFAULT] CHARACTER SET [=] charset;</span><br><span class="line"></span><br><span class="line">ALTER DATABASE db_name [DEFAULT] CAHRACTER SET [=] charset;</span><br></pre></td></tr></table></figure></li><li><p>打开指定的数据库</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">USE db_name;</span><br></pre></td></tr></table></figure></li><li><p>获取当前打开的数据库</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//方式一</span><br><span class="line">SELECT DATABASE();</span><br><span class="line">//方式二</span><br><span class="line">SELECT SCHEMA();</span><br></pre></td></tr></table></figure></li><li><p>删除指定的数据库</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DROP DATABASE db_name;</span><br><span class="line">//如果数据库存在</span><br><span class="line">DROP DATABASE [IF EXISTS] db_name;</span><br></pre></td></tr></table></figure></li><li><p>查看警告</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW WARNINGS;</span><br></pre></td></tr></table></figure></li></ul><h4 id="数据库支持的类型"><a href="#数据库支持的类型" class="headerlink" title="数据库支持的类型"></a>数据库支持的类型</h4><ul><li>1.整数类<br>  help tinyint查看详细信息<br>  \h INT</li><li>2.浮点类型<br>  FLOAT<br>  DOUBLE<br>  DECIMAL和double一样，内部以字符串形式存储</li><li>3.字符串类型<br>  CHAR 定长字符串<br>  VARCHAR 变长字符串<br>  TEXT 文本字符串<br>  ENUM:枚举(可用于性别)<br>  SET<br>  。。。</li><li>4.日期时间类<br>  TIME<br>  DATE<br>  DATETIME<br>  TIMESTAMP<br>  YEAR<br>  整型保存时间戳</li><li>5.二进制类(用的少)</li></ul><h4 id="数据表"><a href="#数据表" class="headerlink" title="数据表"></a>数据表</h4><ul><li><p>创建数据表</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE [IF NOT EXISTS] tbl_name(</span><br><span class="line">字段名称 字段类型 [完整性约束条件]</span><br><span class="line">)ENGINE=引擎名称CHARSET=&apos;编码方式&apos;;</span><br></pre></td></tr></table></figure></li><li><p>完整性约束条件：</p><ul><li>PRIMARY KEY                主键</li><li>AUTO_INCREMENT       自增长</li><li>FOREIGN KEY                外键</li><li>NOT NULL                      非空</li><li>UNIQUE KEY                  唯一</li><li>DEFAULT                        默认值</li></ul></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;初识数据库&quot;&gt;&lt;a href=&quot;#初识数据库&quot; class=&quot;headerlink&quot; title=&quot;初识数据库&quot;&gt;&lt;/a&gt;初识数据库&lt;/h4&gt;&lt;h5 id=&quot;什么是数据库&quot;&gt;&lt;a href=&quot;#什么是数据库&quot; class=&quot;headerlink&quot; title=&quot;什么是数据库&quot;&gt;&lt;/a&gt;什么是数据库&lt;/h5&gt;&lt;p&gt;数据库（Database）是按照数据结构来组织、存储和管理数据的仓库，&lt;/p&gt;
&lt;p&gt;每个数据库都有一个或多个不同的API用于创建，访问，管理，搜索和复制所保存的数据。&lt;/p&gt;
&lt;p&gt;我们也可以将数据存储在文件中，但是在文件中读写数据速度相对较慢。&lt;/p&gt;
&lt;p&gt;所以，现在我们使用关系型数据库管理系统（RDBMS）来存储和管理的大数据量。所谓的关系型数据库，是建立在关系模型基础上的数据库，借助于集合代数等数学概念和方法来处理数据库中的数据。&lt;br&gt;
    
    </summary>
    
      <category term="mysql" scheme="http://yoursite.com/categories/mysql/"/>
    
    
      <category term="数据库,mysql" scheme="http://yoursite.com/tags/%E6%95%B0%E6%8D%AE%E5%BA%93-mysql/"/>
    
  </entry>
  
  <entry>
    <title>java IO流(一)</title>
    <link href="http://yoursite.com/2018/12/24/java/java%20IO%E6%B5%81(%E4%B8%80)/"/>
    <id>http://yoursite.com/2018/12/24/java/java IO流(一)/</id>
    <published>2018-12-24T03:31:10.784Z</published>
    <updated>2018-12-24T03:34:11.257Z</updated>
    
    <content type="html"><![CDATA[<h4 id="I-O流"><a href="#I-O流" class="headerlink" title="I/O流"></a>I/O流</h4><ul><li>Java语言定义的许多类专门负责各种方式的输入/输出,这些类都被放在java.io包中.其中,所有的输入流都是抽象类InputStream(字节输入流)或抽象类Render(字符输入流)的子类;而所有输出流都是抽象类OutputStream(字节输出流)或抽象类Writer(字符输出流)的子类.</li></ul><a id="more"></a><h4 id="输入流-InputStream"><a href="#输入流-InputStream" class="headerlink" title="输入流 InputStream"></a>输入流 InputStream</h4><p>InputStream类是字节输入流的抽象类,是所有字符输入流的父类.InputStream类的具体层次结构如下:<br><img src="/img/java/InputStream.png" alt="enter description here"></p><p>该类中所有方法遇见错误都会引发IOException异常.<br>常用方法</p><ul><li>read() :  从输入流中读取数据到下一个字节.返回0~255范围类的 int 字节值.如果因为已经到达流末尾而没有可用的字节,则返回值为-1.</li><li>read(byte[] b)  : 从输入流中读入一定长度的字节,并以整数的形式返回字节数</li><li>mark( int readlimit )方法  : 在输入流当前位置放置一个标记,readlimit 参数告知此输入流在标记位置失效之前允许读取的字节数</li><li>reset()方法: 将输入指针返回到当前所做的标记处</li><li>skip(long n)方法: 跳过输入流上的n个字节并返回实际跳过的字节数</li><li>markSupported()方法: 如果当前流支持mark()/reset()操作就返回true</li><li>close()方法: 关闭此输入流并释放与该流关联的所有系统资源</li></ul><h5 id="Reader类"><a href="#Reader类" class="headerlink" title="Reader类"></a>Reader类</h5><p>java中的字符Unicode编码,是双字符.InputStream是用来处理字节的,并不适合处理字符文本. Java为字符文本专门提供了一套单独的类Reader,但是Reader并不是InputStream类的替换者,只是在处理字符串简化了编程.Reader类是字符输入流的抽象类,所有字符输入流的实现都是他的子类.<br><img src="/img/java/render.png" alt="enter description here"></p><h4 id="输出流-OutputStream"><a href="#输出流-OutputStream" class="headerlink" title="输出流 OutputStream"></a>输出流 OutputStream</h4><h6 id="OutputStream-类"><a href="#OutputStream-类" class="headerlink" title="OutputStream 类"></a>OutputStream 类</h6><p>OutputStream 类是字节输出流的抽象类,此抽象类是表示输出字节流的所有类的超类.<br>OutputStream类的具体层次结构如下:<br><img src="/img/java/OutputStream_1.png" alt="enter description here"></p><p>OutputStream 类中的所有方法均返回void, 在遇到错误会引发IOException 异常<br>常用方法</p><ul><li>write(int b)方法: 将指定的字节写入此输出流.</li><li>write(byte[] b)方法: 将b个字节重指定的byte数组写入输出流</li><li>write(byte[] b, int off, int len)方法: 将指定byte数组中偏移量off开始的len个字节写入此输出流.</li><li>flush()方法: 彻底完成输出并清空缓存区</li><li>close()方法区: 关闭输出流</li></ul><h6 id="Write-类"><a href="#Write-类" class="headerlink" title="Write 类"></a>Write 类</h6><p>Write类是字符输出流的抽象类,所有的字符输出类的实现都是它的子类.Write类的层次结构如下:<br><img src="/img/java/Write.png" alt="enter description here"></p>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;I-O流&quot;&gt;&lt;a href=&quot;#I-O流&quot; class=&quot;headerlink&quot; title=&quot;I/O流&quot;&gt;&lt;/a&gt;I/O流&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;Java语言定义的许多类专门负责各种方式的输入/输出,这些类都被放在java.io包中.其中,所有的输入流都是抽象类InputStream(字节输入流)或抽象类Render(字符输入流)的子类;而所有输出流都是抽象类OutputStream(字节输出流)或抽象类Writer(字符输出流)的子类.&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="java" scheme="http://yoursite.com/categories/java/"/>
    
    
      <category term="java" scheme="http://yoursite.com/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>java集合框架</title>
    <link href="http://yoursite.com/2018/12/20/java%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/"/>
    <id>http://yoursite.com/2018/12/20/java集合框架/</id>
    <published>2018-12-20T06:27:27.840Z</published>
    <updated>2018-12-20T06:30:21.498Z</updated>
    
    <content type="html"><![CDATA[<h4 id="java的集合"><a href="#java的集合" class="headerlink" title="java的集合"></a>java的集合</h4><ul><li>面向对象语言对事物的体现都是以对象的形式，所以为了方便对多个对象的操作，Java就提供了集合类。常用的集合有List集合,Set集合和Map集合.其中List集合和Set集合继承Collection接口,各接口还提供了不同的类.<h5 id="Java集合类之间的继承关系"><a href="#Java集合类之间的继承关系" class="headerlink" title="Java集合类之间的继承关系"></a>Java集合类之间的继承关系</h5>Java集合类之间的继承关系</li><li>java的集合类主要是有两个接口派生而出的: Collection和Map</li><li>Collection和Map是Java集合框架的根接口</li></ul><p>Java集合类之间的继承关系:<br>Java的集合类主要由两个接口派生而出：Collection和Map,<br>Collection和Map是Java集合框架的根接口。<br><img src="/img/java/1.png" alt="enter description here"></p><a id="more"></a><p>图中，ArrayList,HashSet,LinkedList,TreeSet是我们经常会有用到的已实现的集合类。</p><h5 id="集合与数组的区别"><a href="#集合与数组的区别" class="headerlink" title="集合与数组的区别"></a>集合与数组的区别</h5><ul><li>长度不同,<ul><li>数组的长度是固定的</li><li>集合的长度是可变的</li></ul></li><li>储存数据类型的区别<ul><li>数组可以储存基本数据类型,也可以储存引用数据类型</li><li>集合只能储存引用数据类型</li></ul></li><li>内容区别<ul><li>数组只能储存同种的数据类型</li><li>集合可以储存不同的数据类型</li></ul></li></ul><h4 id="Collection接口"><a href="#Collection接口" class="headerlink" title="Collection接口"></a>Collection接口</h4><ul><li><p>简介</p><ul><li>Collection接口是Set,List的父接口。该接口不能直接操作,Collection接口中定义了多种方法可供其子类进行实现，以实现数据操作。由于List接口与Set接口都继承Collection接口,因此这些方法对于List集合和Set集合都是通用的.</li></ul></li><li><p>接口中定义的方法<br>  <img src="/img/java/Collection接口.png" alt="enter description here"><br>  可以看出Collection用法有：添加元素，删除元素，返回Collection集合的个数以及清空集合等。<br>  其中重点介绍iterator()方法，该方法的返回值是Iterator<e></e></p><p>  使用Iterator遍历集合元素<br>  Iterator接口经常被称作迭代器，它是Collection接口的父接口。但Iterator主要用于遍历集合中的元素。<br>  Iterator接口中主要定义了2个方法：<br><img src="/img/java/Iterator.png" alt="enter description here"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">public class CollectionDemo &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        // Iterator iterator():     使用迭代器进行遍历(重点*********)</span><br><span class="line">        // 创建Collection集合对象</span><br><span class="line">        Collection col = new ArrayList() ;</span><br><span class="line">        // 添加元素</span><br><span class="line">        col.add(&quot;张三&quot;) ;</span><br><span class="line">        col.add(&quot;李四&quot;) ;</span><br><span class="line">        col.add(&quot;王五&quot;) ;</span><br><span class="line">        col.add(&quot;赵六&quot;) ;</span><br><span class="line">        // 使用迭代器对其进行遍历</span><br><span class="line">        // 1. 获取迭代器对象</span><br><span class="line">        Iterator it = col.iterator() ;   // 返回时实现了Iterator这个接口的子类对象</span><br><span class="line">        // 2. 调用迭代器对象中的方法完成遍历</span><br><span class="line">        // E next(): 获取元素的同时,将指针向后移动一位</span><br><span class="line">        while(it.hasNext()) &#123;</span><br><span class="line">            System.out.println(it.next());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><strong>注意</strong> : 当使用Iterator对集合元素进行迭代时,Iterator并不是把集合元素本身传给了迭代变量,而是把集合元素的值给了迭代变量(就如同参数传递是值传递，基本数据类型传递的是值，引用类型传递的仅仅是对象的引用变量),所以修改迭代变量的值对集合元素本身没有任何影响<br>例如下面这个例子</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">import java.util.Arrays;</span><br><span class="line">import java.util.Iterator;</span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">public class IteratorExample &#123;</span><br><span class="line">    public static void main(String[] args)&#123;</span><br><span class="line">        List&lt;String&gt; list =Arrays.asList(&quot;java语言&quot;,&quot;C语言&quot;,&quot;C++语言&quot;);</span><br><span class="line">        Iterator&lt;String&gt; iterator = list.iterator();</span><br><span class="line">        while(iterator.hasNext())&#123;</span><br><span class="line">            String next = iterator.next();//集合元素的值传给了迭代变量，仅仅传递了对象引用。保存的仅仅是指向对象内存空间的地址</span><br><span class="line">            next =&quot;修改后的&quot;;</span><br><span class="line">            System.out.println(next);</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(list);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>输出结果<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">修改后的</span><br><span class="line">修改后的</span><br><span class="line">修改后的</span><br><span class="line">[java语言, C语言, C++语言]</span><br></pre></td></tr></table></figure></p><h4 id="List集合"><a href="#List集合" class="headerlink" title="List集合"></a>List集合</h4><p>List集合包含List接口以及List接口所有实现的类,List集合中的元素可以重复,各元素的的顺序就是对象插入的顺序.类似数组,用户可以通过索引来访问集合中的元素.</p><h5 id="List接口"><a href="#List接口" class="headerlink" title="List接口"></a>List接口</h5><ul><li>List接口继承了Collection接口,因此包含了Collection中所有的方法,此外List接口还定义了已下两个重要的方法<pre><code>* get(int index)  获取指定索引位置的元素* set(int index, Object obj) 将集合指定索引位置的对象修改为指定对象</code></pre><h5 id="List接口实现的类"><a href="#List接口实现的类" class="headerlink" title="List接口实现的类"></a>List接口实现的类</h5>比较常用的类有ArrayList和LinkedList，还有一个比较类似的Vector</li><li>ArrayList<ul><li>是使用的动态数组来实现的,对于数据的随机get和set或是少量数据的插入或删除,效率会比较高.ArrayList是线程不安全的,在不考虑线程安全的情况下速度也比较快.ArrayList插入数据可以重复,也是有序的,按照插入的顺序来排序.<br>根据序号来读取数据只需要直接获取数组对应的脚标数据.</li></ul></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">public class ListTest &#123;</span><br><span class="line">    public static void main(String[] args)&#123;</span><br><span class="line">        List&lt;String&gt; arrayList = new ArrayList&lt;&gt;();</span><br><span class="line">        arrayList.add(&quot;1&quot;);</span><br><span class="line">        arrayList.add(&quot;1&quot;);</span><br><span class="line">        arrayList.add(&quot;2&quot;);</span><br><span class="line">        arrayList.remove(&quot;1&quot;);</span><br><span class="line">        for(String s : arrayList)&#123;</span><br><span class="line">            System.out.println(s);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">输出: </span><br><span class="line">1</span><br><span class="line">2</span><br></pre></td></tr></table></figure><ul><li><p>LinkedList</p><ul><li>内部是使用链表的形式来实现的,在插入大量数据的时候效率比较快</li><li>LinkedList根据序号获取数据,是二分进行遍历,如果序号小于总长度的一半,就从链表头部开始往后遍历,直到找到对应的序号.如果序号大于总长度的一半，就从链表尾部往前进行遍历，直到找到对应的序号。拿到数据。</li><li>链表实现的代码<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">private static class Node&lt;E&gt; &#123;</span><br><span class="line">    E item;</span><br><span class="line">    Node&lt;E&gt; next;</span><br><span class="line">    Node&lt;E&gt; prev;</span><br><span class="line"></span><br><span class="line">    Node(Node&lt;E&gt; prev, E element, Node&lt;E&gt; next) &#123;</span><br><span class="line">        this.item = element;</span><br><span class="line">        this.next = next;</span><br><span class="line">        this.prev = prev;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">往容器最后面添加元素的代码是:</span><br><span class="line"> /**</span><br><span class="line">     * Pointer to first node.</span><br><span class="line">     * Invariant: (first == null &amp;&amp; last == null) ||</span><br><span class="line">     *            (first.prev == null &amp;&amp; first.item != null)</span><br><span class="line">     */</span><br><span class="line">    transient Node&lt;E&gt; first;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Pointer to last node.</span><br><span class="line">     * Invariant: (first == null &amp;&amp; last == null) ||</span><br><span class="line">     *            (last.next == null &amp;&amp; last.item != null)</span><br><span class="line">     */</span><br><span class="line">    transient Node&lt;E&gt; last;</span><br><span class="line"></span><br><span class="line">void linkLast(E e) &#123;</span><br><span class="line">    final Node&lt;E&gt; l = last;</span><br><span class="line">    final Node&lt;E&gt; newNode = new Node&lt;&gt;(l, e, null);</span><br><span class="line">    last = newNode;</span><br><span class="line">    if (l == null)</span><br><span class="line">        first = newNode;</span><br><span class="line">    else</span><br><span class="line">        l.next = newNode;</span><br><span class="line">    size++;</span><br><span class="line">    modCount++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">往容器最前面添加元素的代码</span><br><span class="line">private void linkFirst(E e) &#123;</span><br><span class="line">    final Node&lt;E&gt; f = first;</span><br><span class="line">    final Node&lt;E&gt; newNode = new Node&lt;&gt;(null, e, f);</span><br><span class="line">    first = newNode;</span><br><span class="line">    if (f == null)</span><br><span class="line">        last = newNode;</span><br><span class="line">    else</span><br><span class="line">        f.prev = newNode;</span><br><span class="line">    size++;</span><br><span class="line">    modCount++;</span><br><span class="line">&#125;</span><br><span class="line">根据序号获取数据：</span><br><span class="line">public E get(int index) &#123;</span><br><span class="line">    //判断index序号是否是合法的</span><br><span class="line">    checkElementIndex(index);</span><br><span class="line">    return node(index).item;</span><br><span class="line">&#125;</span><br><span class="line">Node&lt;E&gt; node(int index) &#123;</span><br><span class="line">    // assert isElementIndex(index);</span><br><span class="line">    if (index &lt; (size &gt;&gt; 1)) &#123;//判断序号在总长度一半之前还是之后</span><br><span class="line">        Node&lt;E&gt; x = first;</span><br><span class="line">        for (int i = 0; i &lt; index; i++)</span><br><span class="line">            x = x.next;</span><br><span class="line">        return x;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        Node&lt;E&gt; x = last;</span><br><span class="line">        for (int i = size - 1; i &gt; index; i--)</span><br><span class="line">            x = x.prev;</span><br><span class="line">        return x;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>Vector</p><ul><li>Vector的使用方法和内部实现基本和ArrayList相同，只不过它在add(), remove(), get()等方法中都加了同步。所以它是线程安全的。但是使用效率上就不如ArrayList了。</li></ul></li></ul><h4 id="Set集合【一般使用的有TreeSet和HashSet】"><a href="#Set集合【一般使用的有TreeSet和HashSet】" class="headerlink" title="Set集合【一般使用的有TreeSet和HashSet】"></a>Set集合【一般使用的有TreeSet和HashSet】</h4><p>Set集合与Collection集合基本相同,继承了Collection接口,因此包含了Collection中所有的方法。实际上Set就是Collection，只是行为略有不同（Set不允许包含重复元素）。<br>Set集合不允许包含相同的元素，如果试图把两个相同的元素加入同一个Set集合中，则添加操作失败，add()方法返回false，且新元素不会被加入。</p><ul><li>HashSet是根据hashCode来决定存储位置的，是通过HashMap实现的，所以对象必须实现hashCode()方法，存储的数据无序不能重复，可以存储null,但是只能存一个。</li><li>TreeSet是根据二叉树实现的，也就是TreeMap, 放入数据不能重复且不能为null,可以重写compareTo()方法来确定元素大小，从而进行升序排序。</li></ul><h4 id="Map集合"><a href="#Map集合" class="headerlink" title="Map集合"></a>Map集合</h4><ul><li>Map集合没有继承Collection接口,其提供的是Key到Value的映射.</li><li>键（key值）不可重复，value值可以重复，一个value值可以和很多key值形成对应关系，每个建最多只能映射到一个值。</li><li>Map中的键值对以Entry类型的对象实例形式存在；</li><li>Map支持泛型，形式如：Map&lt;K,V&gt;</li><li>Map中使用put(K key,V value)方法添加</li></ul><h5 id="Map接口"><a href="#Map接口" class="headerlink" title="Map接口"></a>Map接口</h5><p>Map接口提供了Key映射到值的对象.一个映射不能包含重复的key,每个key最多只能映射到一个值.Map同样提供了集合常用的方法.<br><img src="/img/java/map接口方法.png" alt="enter description here"></p><h4 id="Map实现的类"><a href="#Map实现的类" class="headerlink" title="Map实现的类"></a>Map实现的类</h4><p>Map接口常用的实现类有: HashMap，TreeMap，HashTable.<br>Map用户保存具有映射关系的数据，因此Map集合里保存着两组数，一组值用户保存Map里的key,另一组值用户保存Map里的value，key和value都可以是任何引用类型的数据。Map的key不允许重复，即同一个Map对象的任何两个key通过equals方法比较总是返回false。</p><ul><li>Map集合与Set集合、List集合的关系<br>1.与Set集合的关系<br>如果 把Map里的所有key放在一起看，它们就组成了一个Set集合（所有的key没有顺序，key与key之间不能重复），实际上Map确实包含了一个keySet()方法，用户返回Map里所有key组成的Set集合。<br>2.与List集合的关系<br>如果把Map里的所有value放在一起来看，它们又非常类似于一个List：元素与元素之间可以重复，每个元素可以根据索引来查找，只是Map中索引不再使用整数值，而是以另外一个对象作为索引。</li><li><p>hashMap<br>我们最常用的Map，它根据key的HashCode 值来存储数据,根据key可以直接获取它的Value，同时它具有很快的访问速度。HashMap最多只允许一条记录的key值为Null(多条会覆盖);允许多条记录的Value为 Null。非同步的。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;String, String&gt; hashMap = new HashMap&lt;&gt;();</span><br><span class="line">hashMap.put(&quot;1&quot;, &quot;a&quot;);//存储</span><br><span class="line">hashMap.put(&quot;2&quot;, &quot;b&quot;);</span><br><span class="line"></span><br><span class="line">hashMap.remove(&quot;1&quot;);//根据key来删除</span><br><span class="line">hashMap.get(&quot;2&quot;);//根据key获取</span><br><span class="line"></span><br><span class="line">//map的遍历,有很多方法遍历,这里只列举一种。</span><br><span class="line">for(Map.Entry&lt;String, String&gt; entry : hashMap.entrySet())&#123;</span><br><span class="line">    entry.getKey();//获取key</span><br><span class="line">    entry.getValue();//获取value</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>TreeMap</p><ul><li>TreeMap的使用大致跟HashMap类似，但是内部实现是根据红黑树来实现的。红黑树是一种平衡有序的二叉树，TreeMap的插入删除查询都是依据红黑树的规则来进行的。</li></ul></li><li>HashTable<ul><li>HashMap和TreeMap都是线程不安全的,多线程操作的时候可能会造成数据错误。Hashtable是线程安全的。其他内部实现，与HashMap都是一样的。</li></ul></li></ul><h4 id="Queue集合"><a href="#Queue集合" class="headerlink" title="Queue集合"></a>Queue集合</h4><ul><li>Queue用户模拟队列这种数据结构，队列通常是指“先进先出”(FIFO，first-in-first-out)的容器。队列的头部是在队列中存放时间最长的元素，队列的尾部是保存在队列中存放时间最短的元素。新元素插入（offer）到队列的尾部，访问元素（poll）操作会返回队列头部的元素。通常，队列不允许随机访问队列中的元素。</li><li>队列的种类<br>单队列（单队列就是常见的队列, 每次添加元素时，都是添加到队尾，存在“假溢出”的问题也就是明明有位置却不能添加的情况）<br>循环队列（避免了“假溢出”的问题）</li><li>Java 集合框架中的队列 Queue<ul><li>Java 集合中的 Queue 继承自 Collection 接口 ，Deque, LinkedList, PriorityQueue, BlockingQueue 等类都实现了它。Queue 用来存放 等待处理元素 的集合，这种场景一般用于缓冲、并发访问。除了继承 Collection 接口的一些方法，Queue 还添加了额外的 添加、删除、查询操作。</li></ul></li></ul><p>接口中定义的方法<br><img src="/img/java/Queue集合.png" alt="enter description here"></p><h4 id="Queue队列"><a href="#Queue队列" class="headerlink" title="Queue队列"></a>Queue队列</h4><ul><li>什么是队列<br>队列是数据结构中比较重要的一种类型，它支持 FIFO，尾部添加、头部删除（先进队列的元素先出队列），跟我们生活中的排队类似。</li><li>队列的种类<br>单队列（单队列就是常见的队列, 每次添加元素时，都是添加到队尾，存在“假溢出”的问题也就是明明有位置却不能添加的情况）<br>循环队列（避免了“假溢出”的问题）</li><li>Java 集合框架中的队列 Queue<ul><li>Java 集合中的 Queue 继承自 Collection 接口 ，Deque, LinkedList, PriorityQueue, BlockingQueue 等类都实现了它。Queue 用来存放 等待处理元素 的集合，这种场景一般用于缓冲、并发访问。除了继承 Collection 接口的一些方法，Queue 还添加了额外的 添加、删除、查询操作。</li></ul></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;java的集合&quot;&gt;&lt;a href=&quot;#java的集合&quot; class=&quot;headerlink&quot; title=&quot;java的集合&quot;&gt;&lt;/a&gt;java的集合&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;面向对象语言对事物的体现都是以对象的形式，所以为了方便对多个对象的操作，Java就提供了集合类。常用的集合有List集合,Set集合和Map集合.其中List集合和Set集合继承Collection接口,各接口还提供了不同的类.&lt;h5 id=&quot;Java集合类之间的继承关系&quot;&gt;&lt;a href=&quot;#Java集合类之间的继承关系&quot; class=&quot;headerlink&quot; title=&quot;Java集合类之间的继承关系&quot;&gt;&lt;/a&gt;Java集合类之间的继承关系&lt;/h5&gt;Java集合类之间的继承关系&lt;/li&gt;
&lt;li&gt;java的集合类主要是有两个接口派生而出的: Collection和Map&lt;/li&gt;
&lt;li&gt;Collection和Map是Java集合框架的根接口&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Java集合类之间的继承关系:&lt;br&gt;Java的集合类主要由两个接口派生而出：Collection和Map,&lt;br&gt;Collection和Map是Java集合框架的根接口。&lt;br&gt;&lt;img src=&quot;/img/java/1.png&quot; alt=&quot;enter description here&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="java" scheme="http://yoursite.com/categories/java/"/>
    
    
      <category term="java" scheme="http://yoursite.com/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>java基础(七) 类,对象与接口</title>
    <link href="http://yoursite.com/2018/12/19/java/java%E5%9F%BA%E7%A1%80(%E4%B8%83)%20%E7%B1%BB,%E5%AF%B9%E8%B1%A1%E4%B8%8E%E6%8E%A5%E5%8F%A3/"/>
    <id>http://yoursite.com/2018/12/19/java/java基础(七) 类,对象与接口/</id>
    <published>2018-12-19T08:51:54.666Z</published>
    <updated>2018-12-19T00:50:10.000Z</updated>
    
    <content type="html"><![CDATA[<h4 id="类的概念"><a href="#类的概念" class="headerlink" title="类的概念"></a>类的概念</h4><h5 id="类"><a href="#类" class="headerlink" title="类"></a>类</h5><ul><li>一个类可以包含以下类型变量：<ul><li>局部变量：在方法、构造方法或者语句块中定义的变量被称为局部变量。<pre><code>变量声明和初始化都是在方法中，方法结束后，变量就会自动销毁。</code></pre></li><li>成员变量：成员变量是定义在类中，方法体之外的变量。<pre><code>这种变量在创建对象的时候实例化。成员变量可以被类中方法、构造方法和特定类的语句块访问。</code></pre></li><li>类变量：类变量也声明在类中，方法体之外，但必须声明为static类型。</li><li>每个类都有构造方法。如果没有显式地为类定义构造方法，Java编译器将会为该类提供一个默认构造方法。<br>在创建一个对象的时候，至少要调用一个构造方法。构造方法的名称必须与类同名，一个类可以有多个构造方法</li></ul></li></ul><a id="more"></a><h5 id="抽象类"><a href="#抽象类" class="headerlink" title="抽象类"></a>抽象类</h5><ul><li>抽象类和抽象方法都使用 abstract 关键字进行声明。抽象类一般会包含抽象方法，抽象方法一定位于抽象类中。</li><li>抽象类和普通类最大的区别是，抽象类不能被实例化，需要继承抽象类才能实例化其子类。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">public abstract class AbstractClassExample &#123;</span><br><span class="line"></span><br><span class="line">    protected int x;</span><br><span class="line">    private int y;</span><br><span class="line"></span><br><span class="line">    public abstract void func1();</span><br><span class="line"></span><br><span class="line">    public void func2() &#123;</span><br><span class="line">        System.out.println(&quot;func2&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public class AbstractExtendClassExample extends AbstractClassExample &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void func1() &#123;</span><br><span class="line">        System.out.println(&quot;func1&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h4><ul><li>创建对象<br>对象是根据类创建的。在Java中，使用关键字new来创建一个新的对象。创建对象需要以下三步：</li><li>声明：声明一个对象，包括对象名称和对象类型。</li><li>实例化：使用关键字new来创建一个对象。</li><li>初始化：使用new创建对象时，会调用构造方法初始化对象。</li></ul><h4 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h4><ul><li>接口: java编程语言中的抽象类型,是抽象方法的集合,接口通常以interface来声明.<ul><li>一个类通过继承的接口的方式,从而继承接口的抽象方法.</li><li>类实现接口通常用implements表示<ul><li>格式: class 类名 implements 接口名{}</li></ul></li><li>接口不能实例化,需要用多态的方式去实现,接口子类重写</li><li>接口的子类<ul><li>可以是抽象类,但是意义不大</li><li>可以是具体类,要重写接口中的所有的抽象方法(推荐)</li></ul></li></ul></li><li>类实现接口<pre><code>当类实现接口时,类要实现接口中所有的方法,否者类必须声明为抽象类,类使用implements关键字实现接口.在类声明中,implement声明放在class后面</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">//接口</span><br><span class="line"></span><br><span class="line">interface Animal&#123;</span><br><span class="line">public void eat();</span><br><span class="line"></span><br><span class="line">public void travel();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public class MammalInt implements Animal&#123;</span><br><span class="line">public void eat()&#123;</span><br><span class="line">System.out.println(&quot;MammalInt eat&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public void travel()&#123;</span><br><span class="line">System.out.println(&quot;MammalInt travel&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public int onOfLegs()&#123;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public static void main(String args [])&#123;</span><br><span class="line">MammalInt m = new MammalInt();</span><br><span class="line">m.eat();</span><br><span class="line">m.travel();</span><br><span class="line">m.onOfLegs();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="接口与类不同点"><a href="#接口与类不同点" class="headerlink" title="接口与类不同点"></a>接口与类不同点</h4><ul><li><p>接口并不是类,编写接口的方式和类很相似,但是属于不同的概念.<br>类描述对象的属性和方法,接口则包含类要实现的方法<br>除非要实现接口的类是抽象类,否则该类要定义接口的所有方法</p></li><li><p>接口无法被实例化,但是可以被实现.一个实现接口的类,必须实现接口内所描述的所有方法,否者必须声明为抽象类.</p></li><li><p>接口与类相似点：</p><ul><li>一个接口可以有多个方法。</li><li>接口文件保存在 .java 结尾的文件中，文件名使用接口名。</li><li>接口的字节码文件保存在 .class 结尾的文件中。</li><li>接口相应的字节码文件必须在与包名称相匹配的目录结构中。</li></ul></li><li><p>接口与类的区别：</p><ul><li>接口不能用于实例化对象。</li><li>接口没有构造方法。</li><li>接口中所有的方法必须是抽象方法。</li><li>接口不能包含成员变量，除了 static 和 final 变量。</li><li>接口不是被类继承了，而是要被类实现。</li><li>接口支持多继承。</li></ul></li><li><p>接口成员特点</p><ul><li>成员变量: 接口的变量默认是常量无法修改, 只能是常量,并且是静态的,<pre><code>默认修饰的 public static final</code></pre></li><li>构造方法:<pre><code>接口没有构造方法</code></pre></li><li>成员方法: 只能是抽象方法<pre><code>默认修饰方法 public abstract建议手动给出</code></pre></li></ul></li></ul><p>所有的都默认继承一个类: object();<br>类object是类层次结构的根类.每个类都使用object作为超类</p>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;类的概念&quot;&gt;&lt;a href=&quot;#类的概念&quot; class=&quot;headerlink&quot; title=&quot;类的概念&quot;&gt;&lt;/a&gt;类的概念&lt;/h4&gt;&lt;h5 id=&quot;类&quot;&gt;&lt;a href=&quot;#类&quot; class=&quot;headerlink&quot; title=&quot;类&quot;&gt;&lt;/a&gt;类&lt;/h5&gt;&lt;ul&gt;
&lt;li&gt;一个类可以包含以下类型变量：&lt;ul&gt;
&lt;li&gt;局部变量：在方法、构造方法或者语句块中定义的变量被称为局部变量。&lt;pre&gt;&lt;code&gt;变量声明和初始化都是在方法中，方法结束后，变量就会自动销毁。
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;成员变量：成员变量是定义在类中，方法体之外的变量。&lt;pre&gt;&lt;code&gt;这种变量在创建对象的时候实例化。成员变量可以被类中方法、构造方法和特定类的语句块访问。
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;类变量：类变量也声明在类中，方法体之外，但必须声明为static类型。&lt;/li&gt;
&lt;li&gt;每个类都有构造方法。如果没有显式地为类定义构造方法，Java编译器将会为该类提供一个默认构造方法。&lt;br&gt;在创建一个对象的时候，至少要调用一个构造方法。构造方法的名称必须与类同名，一个类可以有多个构造方法&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="新建,模板,小书匠" scheme="http://yoursite.com/tags/%E6%96%B0%E5%BB%BA-%E6%A8%A1%E6%9D%BF-%E5%B0%8F%E4%B9%A6%E5%8C%A0/"/>
    
  </entry>
  
  <entry>
    <title>java基础(六) java封装继承多态</title>
    <link href="http://yoursite.com/2018/12/17/java/java%E5%9F%BA%E7%A1%80(%E5%85%AD)%20java%E5%B0%81%E8%A3%85%E7%BB%A7%E6%89%BF%E5%A4%9A%E6%80%81/"/>
    <id>http://yoursite.com/2018/12/17/java/java基础(六) java封装继承多态/</id>
    <published>2018-12-17T07:35:45.125Z</published>
    <updated>2018-12-17T07:52:00.290Z</updated>
    
    <content type="html"><![CDATA[<h4 id="面向对象的特征"><a href="#面向对象的特征" class="headerlink" title="面向对象的特征"></a>面向对象的特征</h4><ul><li>有三个特征<ul><li>封装</li><li>继承</li><li>多态<h5 id="封装"><a href="#封装" class="headerlink" title="封装"></a>封装</h5>是指隐藏对象的属性和实现细节，仅对外提供公共访问方式</li></ul></li><li>原则: <pre><code>将不需要的对外提供的内容隐藏起来,把属性隐藏，提供公共的对外访问方法</code></pre></li><li><p>封装的优点</p><pre><code>1. 良好的封装能够减少耦合。2. 类内部的结构可以自由修改。3. 可以对成员变量进行更精确的控制。4. 隐藏信息，实现细节。</code></pre><ul><li>以下 Person 类封装 name、gender、age 等属性，外界只能通过 get() 方法获取一个 Person 对象的 name 属性和 gender 属性，而无法获取 age 属性，但是 age 属性可以供 work() 方法使用。</li><li>注意到gender属性使用int数据类型进行存储，封装使得用户注意不到这种实现细节。并且在需要修改 gender属性使用的数据类型时，也可以在不影响客户端代码的情况下进行。</li></ul></li></ul><a id="more"></a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">public class Person &#123;</span><br><span class="line"></span><br><span class="line">    private String name;</span><br><span class="line">    private int gender;</span><br><span class="line">    private int age;</span><br><span class="line"></span><br><span class="line">    public String getName() &#123;</span><br><span class="line">        return name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setName(String name)&#123;</span><br><span class="line">this.name = name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    public String getGender() &#123;</span><br><span class="line">        return gender == 0 ? &quot;man&quot; : &quot;woman&quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void work() &#123;</span><br><span class="line">        if (18 &lt;= age &amp;&amp; age &lt;= 50) &#123;</span><br><span class="line">            System.out.println(name + &quot; is working very hard!&quot;);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            System.out.println(name + &quot; can&apos;t work any more!&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>构造方法<br>每个类都有构造方法。如果没有显式地为类定义构造方法，Java编译器将会为该类提供一个默认构造方法。<br>在创建一个对象的时候，至少要调用一个构造方法。构造方法的名称必须与类同名，一个类可以有多个构造方法。</p><ul><li>构造方法概述和作用<br>  给对象中的成员进行初始化</li><li>构造方法格式特点<br>  方法名与类名相同；没有返回值类型，连void都没有</li><li>构造方法注意事项<br>如果我们没有给出构造方法，系统将自动提供一个无参构造方法。<br>如果我们给出了构造方法，系统将不再提供默认的无参构造方法。</li><li>注意：这个时候，如果我们还想使用无参构造方法，就必须自己给出。建议永远自己给出无参构造方法<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public class Puppy&#123;</span><br><span class="line">    public Puppy()&#123;</span><br><span class="line">//无参构造方法</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public Puppy(String name)&#123;</span><br><span class="line">        // 这个构造器仅有一个参数：name</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>paivate关键字</p><ul><li>private关键字特点<br>  是一个权限修饰符<br>  可以修饰成员变量和成员方法<br>  被其修饰的成员只能在本类中被访问<br>  private最常见的应用<br>  把成员变量用private修饰，提供对应的getXxx()和setXxx()方法</li></ul></li><li>this关键字<ul><li>为什么要有this<br>  当我们的局部变量和成员变量相同的时候,如果我们不使用this关键字,那么会导致一个问题:就是局部变量隐藏了成员变量的问题</li><li>this关键字特点<br>  是当前类的对象引用<br>  简单的记，它就代表当前类的一个对象。谁调用这个方法,那么该方法的内部的this就代表谁</li><li>this的应用场景<br>  解决局部变量隐藏成员变量</li></ul></li></ul><h4 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h4><p>继承是子类继承父类的特征和行为,使得子类对象(实例)具有父类的实例域和方法,或子类从父类继承方法,使子类具有父类的行为.</p><ul><li>继承的特性<ul><li>子类拥有父类非private的属性，方法。</li><li>子类可以拥有自己的属性和方法，即子类可以对父类进行扩展。</li><li>子类可以用自己的方式实现父类的方法。</li><li>Java的继承是单继承，但是可以多重继承，单继承就是一个子类只能继承一个父类，多重继承就是，例如A类继承B类，B类继承C类，所以按照关系就是C类是B类的父类，B类是A类的父类，这是java继承区别于C++继承的一个特性。</li><li>提高了类之间的耦合性（继承的缺点，耦合度高就会造成代码之间的联系越紧密，代码独立性越差）。</li></ul></li><li>继承的格式<ul><li>在 Java 中通过 extends 关键字可以申明一个类是从另外一个类继承而来的<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">class 父类 &#123;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">class 子类 extends 父类 &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">/父类 动物</span><br><span class="line">class Animal&#123;</span><br><span class="line">private String name;</span><br><span class="line">private int id;</span><br><span class="line"></span><br><span class="line">public Animal(String myName, int myId)&#123;</span><br><span class="line">name = myName;</span><br><span class="line">id = myId;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public void eat()&#123;</span><br><span class="line">System.out.println(name+&quot;正在吃&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public void sleep()&#123;</span><br><span class="line">System.out.println(name+&quot;正在谁&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//介绍 introduction</span><br><span class="line">public void introduction()&#123;</span><br><span class="line">System.out.println(&quot;我是&quot;+  id  +&quot;的&quot;+name);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//子类 企鹅</span><br><span class="line">class Penguin extends Animal&#123;</span><br><span class="line">public Penguin(String myName, int myId)&#123;</span><br><span class="line">super(myName,myId);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//子类 老鼠</span><br><span class="line">class Mouse extends Animal&#123;</span><br><span class="line">public Mouse(String myName,int myId)&#123;</span><br><span class="line">super(myName,myId);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public class AnimalDemo&#123;</span><br><span class="line">public AnimalDemo()&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public static void main(String [] args)&#123;</span><br><span class="line">Penguin p = new Penguin(&quot;企鹅&quot;,1);</span><br><span class="line">p.eat();</span><br><span class="line">p.sleep();</span><br><span class="line">p.introduction();</span><br><span class="line"></span><br><span class="line">Mouse m = new Mouse(&quot;老鼠&quot;,2);</span><br><span class="line">m.eat();</span><br><span class="line">m.sleep();</span><br><span class="line">m.introduction();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>继承类型<br>需要注意的是 Java 不支持多继承，但支持多重继承。<br><img src="/img/es6/types_of_inheritance_1.png" alt="enter description here"></li><li><p>继承关键字<br>继承可以使用 extends 和 implements 这两个关键字来实现继承，而且所有的类都是继承于 java.lang.Object，当一个类没有继承的两个关键字，则默认继承object（这个类在 java.lang 包中，所以不需要 import）祖先类。</p></li><li><p>extends关键字<br>在 Java 中，类的继承是单一继承，也就是说，一个子类只能拥有一个父类，所以 extends 只能继承一个类。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class Animal &#123; </span><br><span class="line">    private String name;   </span><br><span class="line">    private int id; </span><br><span class="line">    public Animal(String myName, String myid) &#123; </span><br><span class="line">        //初始化属性值</span><br><span class="line">    &#125; </span><br><span class="line">    public void eat() &#123;  //吃东西方法的具体实现  &#125; </span><br><span class="line">    public void sleep() &#123; //睡觉方法的具体实现  &#125; </span><br><span class="line">&#125; </span><br><span class="line"> </span><br><span class="line">public class Penguin  extends  Animal&#123; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="多态"><a href="#多态" class="headerlink" title="多态"></a>多态</h4><ul><li>多态: 多态是同一个行为具有不同表现的形式或形态的能力<pre><code>多态就是一个接口,使用不同实例而执行不同操作多态是对象多种表现形式的体现    </code></pre></li><li>多态的优点<pre><code>1.消除类型之间的耦合关系2.可替换性3.可扩充性4.接口器5.灵活性6.简化性</code></pre></li><li>缺点<pre><code>不能使用子类的特有的功能解决: 把父类中的引用强制转换成子类的引用(向下转型)        Fu f = new Zi();        Zi z = (zi)f;  //向下转型    </code></pre></li><li>对象之间的转型<pre><code>向上转型    Fu f = new Zi();向下转型    Zi z = (zi)f;  //要求改f必须是能够转换成Zi的        </code></pre></li><li>多态存在的三个必要条件<pre><code>继承重写父类引用子类对象</code></pre></li><li><p>多态的实现方式<br>  方式一：重写<br>  方式二：接口<br>  方式三：抽象类和抽象方法</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">多态</span><br><span class="line">*</span><br><span class="line">/</span><br><span class="line">public class Test&#123;</span><br><span class="line">public static void main(String args [])&#123;</span><br><span class="line">show(new Cat()); //以Cat对象调用show方法</span><br><span class="line">show(new Dog()); //以Dog对象调用show方法</span><br><span class="line"></span><br><span class="line">Animal a = new Cat(); //向上转型</span><br><span class="line">a.eat();//调用的事Cat的eat方法</span><br><span class="line">Cat c = (Cat)a;  //向下转型</span><br><span class="line">c.work();   //调用的是Cat的work方法</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public static void show(Animal a)&#123;</span><br><span class="line">a.eat();</span><br><span class="line">//类型判断</span><br><span class="line">if( a instanceof Cat)&#123;//猫做的事</span><br><span class="line">Cat c = (Cat)a;</span><br><span class="line">c.work();</span><br><span class="line">&#125;else if(a instanceof Dog)&#123;//狗做的事</span><br><span class="line">Dog c = (Dog)a;</span><br><span class="line">c.work();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">abstract class Animal&#123;</span><br><span class="line">abstract void eat();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Cat extends Animal&#123;</span><br><span class="line">public void eat()&#123;</span><br><span class="line">System.out.println(&quot;吃鱼&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public void work()&#123;</span><br><span class="line">System.out.println(&quot;抓老鼠&quot;);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Dog extends Animal&#123;</span><br><span class="line">public void eat()&#123;</span><br><span class="line">System.out.println(&quot;吃骨头&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public void work()&#123;</span><br><span class="line">System.out.println(&quot;看家&quot;);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>多态的成员访问特点</p><pre><code>访问成员变量    编译看左边,运行也看左边构造方法    创建子类对象的时候,访问父类的构造方法,对父类的数据进行初始化成员方法    编译看左边,运行看右边静态方法    编译看左边,运行看左边    (静态方法和类有关,算不上重写,所以,访问还是看左边)由于成员方法存在方法重写,所以运行时看右边</code></pre></li><li><p>多态报错<br>ClassCastException 类型转换异常, 一般在多态的向下转型中出现</p></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;面向对象的特征&quot;&gt;&lt;a href=&quot;#面向对象的特征&quot; class=&quot;headerlink&quot; title=&quot;面向对象的特征&quot;&gt;&lt;/a&gt;面向对象的特征&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;有三个特征&lt;ul&gt;
&lt;li&gt;封装&lt;/li&gt;
&lt;li&gt;继承&lt;/li&gt;
&lt;li&gt;多态&lt;h5 id=&quot;封装&quot;&gt;&lt;a href=&quot;#封装&quot; class=&quot;headerlink&quot; title=&quot;封装&quot;&gt;&lt;/a&gt;封装&lt;/h5&gt;是指隐藏对象的属性和实现细节，仅对外提供公共访问方式&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;原则: &lt;pre&gt;&lt;code&gt;将不需要的对外提供的内容隐藏起来,把属性隐藏，提供公共的对外访问方法
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;封装的优点&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;1. 良好的封装能够减少耦合。
2. 类内部的结构可以自由修改。
3. 可以对成员变量进行更精确的控制。
4. 隐藏信息，实现细节。
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;以下 Person 类封装 name、gender、age 等属性，外界只能通过 get() 方法获取一个 Person 对象的 name 属性和 gender 属性，而无法获取 age 属性，但是 age 属性可以供 work() 方法使用。&lt;/li&gt;
&lt;li&gt;注意到gender属性使用int数据类型进行存储，封装使得用户注意不到这种实现细节。并且在需要修改 gender属性使用的数据类型时，也可以在不影响客户端代码的情况下进行。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="java" scheme="http://yoursite.com/categories/java/"/>
    
    
      <category term="java" scheme="http://yoursite.com/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>java基础(五) 面向对象</title>
    <link href="http://yoursite.com/2018/12/17/java/java%E5%9F%BA%E7%A1%80(%E4%BA%94)%20%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"/>
    <id>http://yoursite.com/2018/12/17/java/java基础(五) 面向对象/</id>
    <published>2018-12-17T07:35:45.117Z</published>
    <updated>2018-12-18T01:00:08.198Z</updated>
    
    <content type="html"><![CDATA[<h4 id="面向对象的思想"><a href="#面向对象的思想" class="headerlink" title="面向对象的思想"></a>面向对象的思想</h4><ul><li><p>在理解面向对象思想,我们可以先来看看什么是面向过程?</p><ul><li>面向过程思想概述<br>我们来回想一下，这几天我们完成一个需求的步骤：首先是搞清楚我们要做什么，然后在分析怎么做，最后我们再代码体现。<br>一步一步去实现，而具体的每一步都需要我们去实现和操作。这些步骤相互调用和协作，完成我们的需求。<br>在上面的每一个具体步骤中我们都是参与者，并且需要面对具体的每一个步骤和过程，这就是面向过程最直接的体现。<br>那么什么是面向过程开发呢? 面向过程开发，其实就是面向着具体的每一个步骤和过程，把每一个步骤和过程完成，然后由这些功能方法相互调用，完成需求。<br>面向过程的代表语言：C语言</li></ul></li><li><p>然后我们再来了解面向对象</p><ul><li>面向对象思想概述<br>当需求单一，或者简单时，我们一步一步去操作没问题，并且效率也挺高。<br>可随着需求的更改，功能的增多，发现需要面对每一个步骤很麻烦了。这时就开始思索，<br>能不能把这些步骤和功能在进行封装，封装时根据不同的功能，进行不同的封装，功能类似的封装在一起。<br>这样结构就清晰了很多。用的时候，找到对应的类就可以了。这就是面向对象的思想。</li><li>面向对象思想特点<br>  是一种更符合我们思想习惯的思想<br>可以将复杂的事情简单化<br>将我们从执行者变成了指挥者<br>  角色发生了转换<a id="more"></a></li></ul></li></ul><h4 id="类与对象及其应用"><a href="#类与对象及其应用" class="headerlink" title="类与对象及其应用"></a>类与对象及其应用</h4><ul><li>属性： 该事物的描述信息    </li><li>行为： 该事物能够做什么    </li></ul><table><thead><tr><th>现实事物</th><th style="text-align:center">类</th></tr></thead><tbody><tr><td>属性</td><td style="text-align:center">成员变量</td></tr><tr><td>行为</td><td style="text-align:center">成员方法</td></tr></tbody></table><ul><li>类： 是一组相同属性和行为的集合。这是一个抽象的概念</li><li>对象：是该类事物的具体表现形式，具体存在的个体。<br>  例子<pre><code>学生： 类班长： 对象</code></pre></li></ul><h4 id="成员变量和局部变量的区别"><a href="#成员变量和局部变量的区别" class="headerlink" title="成员变量和局部变量的区别"></a>成员变量和局部变量的区别</h4><p>成员变量就是方法外部,类的内部定义的变量;<br>局部变量就是方法或语句块内部定义的变量.局部变量必须初始化.</p><ul><li>在类中的位置不同<br>成员变量：在类中方法外<br>局部变量：在方法定义中或者方法声明上</li><li>在内存中的位置不同<br>成员变量：在堆内存<br>局部变量：在栈内存</li><li>生命周期不同<br>成员变量：随着对象的创建而存在，随着对象的消失而消失<br>局部变量：随着方法的调用而存在，随着方法的调用完毕而消失</li><li>初始化值不同<br>成员变量：有默认初始化值<br>局部变量：没有默认初始化值，必须定义，赋值，然后才能使用。<br>注意事项：: 局部变量名称可以和成员变量名称一样，在方法中使用的时候，采用的是就近原则</li></ul><h4 id="匿名对象"><a href="#匿名对象" class="headerlink" title="匿名对象"></a>匿名对象</h4><ul><li>什么是匿名对象<br>就是没有名字的对象</li><li>匿名对象应用场景<ul><li>调用方法，仅仅只调用一次的时候。</li><li>匿名对象可以作为实际参数传递</li></ul></li></ul><h4 id="方法的重写-方法重载"><a href="#方法的重写-方法重载" class="headerlink" title="方法的重写,方法重载"></a>方法的重写,方法重载</h4><h5 id="方法重写"><a href="#方法重写" class="headerlink" title="方法重写"></a>方法重写</h5><ul><li>方法重写是子类对父类的允许访问方法的实现过程进行重新编写,返回值和形参都不变.<br>即外壳不变,核心改变<ul><li>方法重写好处在于子类可以根据需求定义特定自己的行为,也就是说子类可以根据需求实现父类的方法</li><li>注意: 重写的方法不能抛出新的异常或者比被重写方法申明更加宽泛的异常</li><li>当子类中应用父类被重写的方法时,要使用super关键字<br>super表示对父类对象的引用。使用了super显示的调用父类的某个构造方法后，<br>那么在执行的时候就寻找super()对应的构造方法，而不再寻找父类的不带参数的构造方法。</li><li>super必须作为构造方法的第一条执行语句。<br>在写类的时候，一定要写默认无参的构造方法，如果一个构造方法的第一句既不是this(),<br>也不是super()时，那么就会在这里隐含的调用他的父类的无参的构造方法，即隐含的调用super()。</li></ul></li><li>方法重写应用<br>当子类需要父类的功能，而功能主体子类有自己特有内容时，可以重写父类中的方法。<br>这样，即沿袭了父类的功能，又定义了子类特有的内容。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">*重写</span><br><span class="line">*/</span><br><span class="line">class Animal&#123;</span><br><span class="line">public void move()&#123;</span><br><span class="line">System.out.println(&quot;动物可以移动&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">class Dog extends Animal&#123;</span><br><span class="line">public void move ()&#123;</span><br><span class="line">super.move(); //应用super类方法</span><br><span class="line">System.out.println(&quot;狗也可以跑和走&quot;);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">public class TestDog&#123;</span><br><span class="line">public static void main(String args[])&#123;</span><br><span class="line">//Animal a = new Animal();</span><br><span class="line">Animal b = new Dog();</span><br><span class="line"></span><br><span class="line">//a.move();// 执行 Animal 类的方法</span><br><span class="line"> </span><br><span class="line">        b.move();//执行 Dog 类的方法</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h5 id="方法重载"><a href="#方法重载" class="headerlink" title="方法重载"></a>方法重载</h5><ul><li>重载: overload是在一个类里面,方法名字相同,而参数不同,返回类型可以相同也可以不同<ul><li>每一个重载的方法(或者构造函数)都必须有一个独一无二的参数型列表</li><li>最常用的就是构造器重载</li><li>被重载的方法必须改变参数列表(参数的个数或类型不一样)</li></ul></li><li>方法重载原则<br>方法名相同；方法的参数类型不同，或者参数个数不同；与方法的参数名，返回类型和修饰符无关</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">/*</span><br><span class="line">* 重载</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">public class OverLoading&#123;</span><br><span class="line">public int test()&#123;</span><br><span class="line">System.out.println(&quot;test1&quot;);</span><br><span class="line">return 1;</span><br><span class="line">&#125;</span><br><span class="line">//一个参数</span><br><span class="line">public void test(int a)&#123;</span><br><span class="line">System.out.println(&quot;test2&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//以下两个参数顺序不同</span><br><span class="line">public String test(int a,String s)&#123;</span><br><span class="line">System.out.println(&quot;test3&quot;);</span><br><span class="line">return &quot;return test3&quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//以下两个参数顺序不同</span><br><span class="line">public String test(String s,int a)&#123;</span><br><span class="line">System.out.println(&quot;test4&quot;);</span><br><span class="line">return &quot;return test4&quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">public static void main(String args [])&#123;</span><br><span class="line">OverLoading o = new OverLoading();</span><br><span class="line">System.out.println(o.test());</span><br><span class="line">o.test(1);</span><br><span class="line">System.out.println(o.test(1,&quot;test3&quot;));</span><br><span class="line">        System.out.println(o.test(&quot;test4&quot;,1));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;面向对象的思想&quot;&gt;&lt;a href=&quot;#面向对象的思想&quot; class=&quot;headerlink&quot; title=&quot;面向对象的思想&quot;&gt;&lt;/a&gt;面向对象的思想&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;在理解面向对象思想,我们可以先来看看什么是面向过程?&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;面向过程思想概述&lt;br&gt;我们来回想一下，这几天我们完成一个需求的步骤：首先是搞清楚我们要做什么，然后在分析怎么做，最后我们再代码体现。&lt;br&gt;一步一步去实现，而具体的每一步都需要我们去实现和操作。这些步骤相互调用和协作，完成我们的需求。&lt;br&gt;在上面的每一个具体步骤中我们都是参与者，并且需要面对具体的每一个步骤和过程，这就是面向过程最直接的体现。&lt;br&gt;那么什么是面向过程开发呢? 面向过程开发，其实就是面向着具体的每一个步骤和过程，把每一个步骤和过程完成，然后由这些功能方法相互调用，完成需求。&lt;br&gt;面向过程的代表语言：C语言&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;然后我们再来了解面向对象&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;面向对象思想概述&lt;br&gt;当需求单一，或者简单时，我们一步一步去操作没问题，并且效率也挺高。&lt;br&gt;可随着需求的更改，功能的增多，发现需要面对每一个步骤很麻烦了。这时就开始思索，&lt;br&gt;能不能把这些步骤和功能在进行封装，封装时根据不同的功能，进行不同的封装，功能类似的封装在一起。&lt;br&gt;这样结构就清晰了很多。用的时候，找到对应的类就可以了。这就是面向对象的思想。&lt;/li&gt;
&lt;li&gt;面向对象思想特点&lt;br&gt;  是一种更符合我们思想习惯的思想&lt;br&gt;可以将复杂的事情简单化&lt;br&gt;将我们从执行者变成了指挥者&lt;br&gt;  角色发生了转换
    
    </summary>
    
      <category term="java" scheme="http://yoursite.com/categories/java/"/>
    
    
      <category term="java" scheme="http://yoursite.com/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>Java中的栈堆以及内存分配</title>
    <link href="http://yoursite.com/2018/12/17/java/Java%E4%B8%AD%E7%9A%84%E6%A0%88%E5%A0%86%E4%BB%A5%E5%8F%8A%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D/"/>
    <id>http://yoursite.com/2018/12/17/java/Java中的栈堆以及内存分配/</id>
    <published>2018-12-17T02:28:04.069Z</published>
    <updated>2018-12-17T04:08:54.905Z</updated>
    
    <content type="html"><![CDATA[<h4 id="堆栈的概念"><a href="#堆栈的概念" class="headerlink" title="堆栈的概念"></a>堆栈的概念</h4><ul><li>栈<ul><li>栈: 基本数据类型,局部变量都是存放在栈内存中的,用完后消失.</li><li>特点<br>函数定义的基本数据类型变量,对象引用变量都是在栈内存中分配<br>栈内存的特点,数据一执行完毕,变量会立即释放,节约内存空间<br>栈内存的数据,没有默认初始值,需要手动定义</li><li>局部变量: 在方法定义或者方法声明上的变量都是局部变量</li></ul></li><li>堆<ul><li>堆: new创建的实例对象和数组,是存放在堆内存中的,用完之后是靠垃圾回收机制不定时清除的</li><li>特点<br>堆内存用来存放new创建的对象和数组<br>堆内存中的实体都有对应的内存地址<br>堆内存中的实体是用来封装数据的,都有默认的初始值<br>堆内存中实体不在指向时,java会启动垃圾回收机制,自动清除</li></ul></li></ul><a id="more"></a><ul><li>方法区<ul><li>又叫静态区,跟堆一样,被所有的线程共享.方法区包含所有的class和static变量</li><li>方法区中包含的都是在整个程序中永远唯一的元素.如class,static变量<h4 id="java的内存机制"><a href="#java的内存机制" class="headerlink" title="java的内存机制"></a>java的内存机制</h4></li></ul></li><li>Java把内存划分为两种: 一种是栈内存,另一种是堆内存.<ul><li>在函数中定义的一些基本类型的变量和对象的引用变量都是在函数的栈内存中分配.当在一段代码块定义一个变量时,Java就在栈中为这个变量分配内存空间,当超过变量的作用域后,Java会自动释放掉该变量分配的内存空间,该内存空间可以立即被另做他用.</li><li>堆内存是用来存放new创建的对象和数组,在堆中分配的内存,由Java虚拟机(JVM)的自动垃圾回收器来管理.在堆中产生了一个数组或者对象之后,还可以在栈中定义一个特殊的变量,让栈中的这个变量的取值等于数组或对象在堆内存中的首地址,栈中的这个变量就成了数组或对象的引用变量,以后就可以在程序中使用栈中的引用变量来访问堆中的数组或者对象.</li><li>引用变量就相当于是为数组或者对象起的一个名称。引用变量是普通的变量，定义时在栈中分配，引用变量在程序运行到其作用域之外后被释放。而数组和对象本身在堆中分配，即使程序运行到使用 new 产生数组或者对象的语句所在的代码块之外，数组和对象本身占据的内存不会被释放，数组和对象在没有引用变量指向它的时候，才变为垃圾，不能在被使用，但仍然占据内存空间不放，在随后的一个不确定的时间被垃圾回收器收走（释放掉）。</li><li>这也是 Java 比较占内存的原因，实际上，栈中的变量指向堆内存中的变量，这就是 Java 中的指针！</li></ul></li></ul><h4 id="java中变量在内存中的分配"><a href="#java中变量在内存中的分配" class="headerlink" title="java中变量在内存中的分配"></a>java中变量在内存中的分配</h4><ul><li>对于成员变量和局部变量<ul><li>成员变量就是方法外部,类的内部定义的变量;</li><li>局部变量就是方法或语句块内部定义的变量.局部变量必须初始化.</li></ul></li><li>形式参数是局部变量,局部变量的数据存在于栈内存中. 栈内存中的局部变量随着方法的消失而消失.</li><li>成员变量储存在堆中的对象里面,由垃圾回收器负责回收.</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;堆栈的概念&quot;&gt;&lt;a href=&quot;#堆栈的概念&quot; class=&quot;headerlink&quot; title=&quot;堆栈的概念&quot;&gt;&lt;/a&gt;堆栈的概念&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;栈&lt;ul&gt;
&lt;li&gt;栈: 基本数据类型,局部变量都是存放在栈内存中的,用完后消失.&lt;/li&gt;
&lt;li&gt;特点&lt;br&gt;函数定义的基本数据类型变量,对象引用变量都是在栈内存中分配&lt;br&gt;栈内存的特点,数据一执行完毕,变量会立即释放,节约内存空间&lt;br&gt;栈内存的数据,没有默认初始值,需要手动定义&lt;/li&gt;
&lt;li&gt;局部变量: 在方法定义或者方法声明上的变量都是局部变量&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;堆&lt;ul&gt;
&lt;li&gt;堆: new创建的实例对象和数组,是存放在堆内存中的,用完之后是靠垃圾回收机制不定时清除的&lt;/li&gt;
&lt;li&gt;特点&lt;br&gt;堆内存用来存放new创建的对象和数组&lt;br&gt;堆内存中的实体都有对应的内存地址&lt;br&gt;堆内存中的实体是用来封装数据的,都有默认的初始值&lt;br&gt;堆内存中实体不在指向时,java会启动垃圾回收机制,自动清除&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="java" scheme="http://yoursite.com/categories/java/"/>
    
    
      <category term="java Thinking" scheme="http://yoursite.com/tags/java-Thinking/"/>
    
  </entry>
  
  <entry>
    <title>java基础(四) 泛型</title>
    <link href="http://yoursite.com/2018/12/16/java/java%E5%9F%BA%E7%A1%80(%E5%9B%9B)%20%E6%B3%9B%E5%9E%8B/"/>
    <id>http://yoursite.com/2018/12/16/java/java基础(四) 泛型/</id>
    <published>2018-12-16T13:28:32.177Z</published>
    <updated>2018-12-16T13:31:57.349Z</updated>
    
    <content type="html"><![CDATA[<p>首先我们来看一段代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">List arrayList = new ArrayList();</span><br><span class="line">arrayList.add(&quot;aaaa&quot;);</span><br><span class="line">arrayList.add(&quot;bbb&quot;);</span><br><span class="line">arrayList.add(100);</span><br><span class="line"></span><br><span class="line">for(int i = 0; i&lt; arrayList.size();i++)&#123;</span><br><span class="line">String item = (String)arrayList.get(i);</span><br><span class="line">Log.d(&quot;泛型测试&quot;,&quot;item = &quot; + item);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>毫无疑问，程序的运行结果会以崩溃结束：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">java.lang.ClassCastException: </span><br><span class="line">java.lang.Integer cannot be cast to java.lang.String</span><br></pre></td></tr></table></figure></p><a id="more"></a><ul><li>定义了一个ArrayList类型的集合,先向其中加入两个字符串类型的值,随后加入一个Integer类型的值.这是完全没有问题的,因为此时List默认的类型为Object类型.<br>ArrayList可以存放任意类型，例子中添加了一个String类型，添加了一个Integer类型，再使用时都以String的方式使用，因此程序崩溃了。为了解决类似这样的问题（在编译阶段就可以解决），泛型应运而生。</li></ul><h4 id="泛型"><a href="#泛型" class="headerlink" title="泛型"></a>泛型</h4><p>泛型在java中有很重要的地位，在面向对象编程及各种设计模式中有非常广泛的应用。<br>什么是泛型？为什么要使用泛型？</p><ul><li>泛型,即”参数化类型”. 一提到参数,最熟悉的就是定义方法时有形参,然后调用方法传递实参.那么参数化类型怎么理解呢?<br>顾名思义,就是讲类型由原来具体的类型参数化,类似于方法中的变量参数,此时类型也定义成参数形式(可以称之为类型形参),然后在使用(或调用)是传入具体的类型(类型实参)<br>泛型的本质是为了参数化类型(在不创建新的类型情况下,通过泛型指定的不同类型来控制形参具体限制的类型).<br>也就是说在泛型的使用过程中,操作的数据类型被指定为一个参数,这种参数类型可以用在类,接口和方法中,<br>它们分别称为<strong>泛型类,泛型接口,泛型方法</strong>.</li></ul><h4 id="格式"><a href="#格式" class="headerlink" title="格式"></a>格式</h4><ul><li>泛型格式<ul><li>&lt;数据类型&gt; 这里的数据类型只能是引用数据类型</li><li>&lt;数据类型1 , 数据类型2 , ….&gt;</li></ul></li></ul><h4 id="泛型的好处"><a href="#泛型的好处" class="headerlink" title="泛型的好处"></a>泛型的好处</h4><ul><li>把运行时期的问题提前到了编译期间</li><li>避免了强制类型转换</li><li>优化的程序设计</li></ul><h4 id="泛型的使用"><a href="#泛型的使用" class="headerlink" title="泛型的使用"></a>泛型的使用</h4><ul><li><strong>泛型类: 把泛型定义在类上</strong><ul><li>定义格式: public class 类名&lt;泛型类型1,…&gt;</li><li>注意事项: 泛型类型必须是引用类型</li><li>泛型类的类型参数声明部分也包含一个或多个类型参数，参数间用逗号隔开。一个泛型参数，也被称为一个类型变量，是用于指定一个泛型类型名称的标识符。因为他们接受一个或多个参数，这些类被称为参数化的类或参数化的类型。</li></ul></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">public class Box&lt;T&gt; &#123;</span><br><span class="line">  </span><br><span class="line">  private T t;</span><br><span class="line"></span><br><span class="line">  public void add(T t) &#123;</span><br><span class="line">this.t = t;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  public T get() &#123;</span><br><span class="line">return t;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  public static void main(String[] args) &#123;</span><br><span class="line">Box&lt;Integer&gt; integerBox = new Box&lt;Integer&gt;();</span><br><span class="line">Box&lt;String&gt; stringBox = new Box&lt;String&gt;();</span><br><span class="line"></span><br><span class="line">integerBox.add(new Integer(10));</span><br><span class="line">stringBox.add(new String(&quot;123132&quot;));</span><br><span class="line"></span><br><span class="line">System.out.printf(&quot;整型值为 :%d\n\n&quot;, integerBox.get());</span><br><span class="line">System.out.printf(&quot;字符串为 :%s\n&quot;, stringBox.get());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><strong>泛型方法: 把泛型定义在方法上</strong><ul><li>定义格式: public &lt;泛型类型&gt; 返回类型 方法名(泛型类型 变量名)</li><li>所有泛型方法声明都有一个类型参数声明部分（由尖括号分隔），该类型参数声明部分在方法返回类型之前（在下面例子中的<e>）。<br>每一个类型参数声明部分包含一个或多个类型参数，参数间用逗号隔开。一个泛型参数，也被称为一个类型变量，是用于指定一个泛型类型名称的标识符。<br>类型参数能被用来声明返回值类型，并且能作为泛型方法得到的实际参数类型的占位符。<br>泛型方法体的声明和其他方法一样。注意类型参数只能代表引用型类型，不能是原始类型（像int,double,char的等）。</e></li></ul></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">public class GenericMethodTest&#123;</span><br><span class="line">   // 泛型方法 printArray                         </span><br><span class="line">   public static &lt; E &gt; void printArray( E[] inputArray )&#123;</span><br><span class="line">  // 输出数组元素            </span><br><span class="line"> for ( E element : inputArray )&#123;        </span><br><span class="line">System.out.printf( &quot;%s &quot;, element );</span><br><span class="line"> &#125;</span><br><span class="line"> System.out.println();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public static void main( String args[] )&#123;</span><br><span class="line">// 创建不同类型数组： Integer, Double 和 Character</span><br><span class="line">Integer[] intArray = &#123; 1, 2, 3, 4, 5 &#125;;</span><br><span class="line">Double[] doubleArray = &#123; 1.1, 2.2, 3.3, 4.4 &#125;;</span><br><span class="line">Character[] charArray = &#123; &apos;H&apos;, &apos;E&apos;, &apos;L&apos;, &apos;L&apos;, &apos;O&apos; &#125;;</span><br><span class="line"></span><br><span class="line">System.out.println( &quot;整型数组元素为:&quot; );</span><br><span class="line">printArray( intArray  ); // 传递一个整型数组</span><br><span class="line"></span><br><span class="line">System.out.println( &quot;\n双精度型数组元素为:&quot; );</span><br><span class="line">printArray( doubleArray ); // 传递一个双精度型数组</span><br><span class="line"></span><br><span class="line">System.out.println( &quot;\n字符型数组元素为:&quot; );</span><br><span class="line">printArray( charArray ); // 传递一个字符型数组</span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><strong>泛型接口:把泛型定义在接口上</strong><ul><li>定义格式: public interface 接口名&lt;泛型类型&gt;<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 泛型接口的定义格式:        </span><br><span class="line"> * 修饰符  interface 接口名&lt;数据类型&gt; &#123;&#125;</span><br><span class="line"> */</span><br><span class="line">public interface Inter&lt;T&gt; &#123;</span><br><span class="line">public abstract void show(T t) ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 子类是泛型类</span><br><span class="line"> */</span><br><span class="line">public class InterImpl&lt;E&gt; implements Inter&lt;E&gt; &#123;</span><br><span class="line">@Override</span><br><span class="line">public void show(E t) &#123;</span><br><span class="line">System.out.println(t);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Inter&lt;String&gt; inter = new InterImpl&lt;String&gt;() ;</span><br><span class="line">inter.show(&quot;hello&quot;) ;</span><br></pre></td></tr></table></figure></li></ul></li></ul><h4 id="泛型高级之通配符"><a href="#泛型高级之通配符" class="headerlink" title="泛型高级之通配符"></a>泛型高级之通配符</h4><ul><li><p>为什么要使用通配符</p><ul><li>通配符的设计存在一定的场景，例如在使用泛型后，首先声明了一个Animal的类，而后声明了一个继承Animal类的Cat类，显然Cat类是Animal类的子类，但是List却不是List的子类型，而在程序中往往需要表达这样的逻辑关系。为了解决这种类似的场景，在泛型的参数类型的基础上新增了通配符的用法。</li></ul></li><li><p>&lt;? extends T&gt; 上界通配符</p><ul><li>上界通配符顾名思义，&lt;? extends T&gt;表示的是类型的上界【 包含自身】，因此通配的参数化类型可能是T或T的子类。正因为无法确定具体的类型是什么，add方法受限（可以添加null，因为null表示任何类型），但可以从列表中获取元素后赋值给父类型。如上图中的第一个例子，第三个add()操作会受限，原因在于List和List是List&lt;? extends Animal&gt;的子类型。</li></ul></li><li><p>&lt;? super T&gt; 下界通配符</p><ul><li>下界通配符&lt;? super T&gt;表示的是参数化类型是T的超类型（包含自身），层层至上，直至Object，编译器无从判断get()返回的对象的类型是什么，因此get()方法受限。但是可以进行add()方法，add()方法可以添加T类型和T类型的子类型，如第二个例子中首先添加了一个Cat类型对象，然后添加了两个Cat子类类型的对象，这种方法是可行的，但是如果添加一个Animal类型的对象，显然将继承的关系弄反了，是不可行的。</li></ul></li><li><p>&lt;?&gt; 无界通配符</p><ul><li>任意类型，如果没有明确，那么就是Object以及任意的Java类了<br>无界通配符用&lt;?&gt;表示，?代表了任何的一种类型，能代表任何一种类型的只有null（Object本身也算是一种类型，但却不能代表任何一种类型，所以List和List的含义是不同的，前者类型是Object，也就是继承树的最上层，而后者的类型完全是未知的）。</li></ul></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;首先我们来看一段代码&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;List arrayList = new ArrayList();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;arrayList.add(&amp;quot;aaaa&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;arrayList.add(&amp;quot;bbb&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;arrayList.add(100);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;for(int i = 0; i&amp;lt; arrayList.size();i++)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	String item = (String)arrayList.get(i);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	Log.d(&amp;quot;泛型测试&amp;quot;,&amp;quot;item = &amp;quot; + item);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;毫无疑问，程序的运行结果会以崩溃结束：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;java.lang.ClassCastException: &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		java.lang.Integer cannot be cast to java.lang.String&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="java" scheme="http://yoursite.com/categories/java/"/>
    
    
      <category term="java" scheme="http://yoursite.com/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>java基础(三) 常见的api</title>
    <link href="http://yoursite.com/2018/12/16/java/java%E5%9F%BA%E7%A1%80(%E4%B8%89)%20%E5%B8%B8%E8%A7%81%E7%9A%84api/"/>
    <id>http://yoursite.com/2018/12/16/java/java基础(三) 常见的api/</id>
    <published>2018-12-16T08:14:27.428Z</published>
    <updated>2018-12-17T03:18:21.957Z</updated>
    
    <content type="html"><![CDATA[<h4 id="object类"><a href="#object类" class="headerlink" title="object类"></a>object类</h4><ul><li>Object类有那些的公用方法<ul><li>equals() : 判断两个对象是否相等</li><li>clone(): 进行对象拷贝</li><li>getClass(): 返回和当前对象相关的Class对象</li><li>notify(): notifyall,wait都是用来对给定对象进行线程同步的<a id="more"></a></li></ul></li></ul><h4 id="String类"><a href="#String类" class="headerlink" title="String类"></a>String类</h4><ul><li>String类的一些特性<ul><li>String类代表字符串.java程序中所有的字符串字面值(如: “abc”)都由此类的实例实现</li><li>字符串是常量,它的值在创建之后不可以被更改.字符串缓冲区支持可变的字符串.因为String对象不可变,所以可以被共享.</li><li>java语言提供字符串串联符号(“ + “),以及将其他对象转化成字符串的特殊支持.StringBuilder（或 StringBuffer）类及其 append 方法实现的。</li></ul></li><li><p>一旦被创建就不能改变</p><ul><li>String s = new String(“hello”)和String s = “hello”;的区别</li><li>String的特点一旦被创建就不能改变【内容不能变，引用可以变】<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">A:String的特点: 一旦被创建就不能改变</span><br><span class="line">B:案例演示   </span><br><span class="line">     a:如何理解这句话</span><br><span class="line">     String s = &quot;hello&quot; ;</span><br><span class="line">     s =  &quot;world&quot; + &quot;java&quot;; 问s的结果是多少?</span><br><span class="line"></span><br><span class="line">下面这条语句一共创建了多少个对象:String s = &quot;a&quot;+&quot;b&quot;+&quot;c&quot;; 分别都是什么？</span><br><span class="line">答案：5个对象</span><br><span class="line">分别是 &quot;a&quot; , &quot;b&quot; , &quot;c&quot; , &quot;ab&quot; , &quot;abc&quot;</span><br><span class="line">因为字符串的特点是一旦被创建就不能被改变,所有在使用常量进行相加的时候,</span><br><span class="line">都是在创建新的字符串对象</span><br><span class="line">最后在把字符串&quot;abc&quot;这个常量值赋值给引用变量s</span><br></pre></td></tr></table></figure></li></ul></li><li><p>StringBuffer类与StringBuilder类</p><ul><li>StringBuffer类概述<br>字符串缓冲区，StringBuffer是一个容器<br>我们如果对字符串进行拼接操作，每次拼接，都会构建一个新的String对象，既耗时，又浪费空间。 而StringBuffer就可以解决这个问题<br>线程安全的可变的字符序列 , 安全对应的效率比较低</li><li>StringBuffer和String的区别<br>  String是不可变的字符序列<br>  StringBuffer 是可以的字符序列</li></ul></li><li>StringBuffer和String的相互转换<ul><li>String – StringBuffer<ul><li>通过构造方法</li><li>过append()方法</li></ul></li><li>StringBuffer – String<ul><li>使用substring方法</li><li>通过构造方法</li><li>通过toString()方法</li></ul></li></ul></li><li>StringBuilder类<ul><li>StringBuilder是线程不安全的，其他跟StringBuffer一样；StringBuffer和StringBuilder底层是 char[]数组实现的</li></ul></li></ul><h4 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h4><ul><li><p>冒泡排序原理</p><ul><li>相邻的元素两两比较,大的往后放,第一次完毕后,最大值出现在最大索引处</li><li>冒泡排序代码<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">* 冒泡排序</span><br><span class="line">* @param arr</span><br><span class="line">*/</span><br><span class="line">private static void sort(int[] arr)&#123;</span><br><span class="line">for(int y = 0; y &lt; arr.length; y++)&#123;</span><br><span class="line">for(int x = 0 ; x &lt; arr.length - 1 - y ; x++ ) &#123;</span><br><span class="line">            if(arr[x] &gt; arr[x+1]) &#123;</span><br><span class="line">                int temp = arr[x] ;</span><br><span class="line">                arr[x] = arr[x+1] ;</span><br><span class="line">                arr[x+1] = temp ;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>选择排序</p><ul><li>从0索引开始，依次和后面元素比较，小的往前放，第一次完毕，最小值出现在了最小索引处</li><li>数组高级选择排序代码实现</li></ul></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">private static void selectSort(int[] arr) &#123;</span><br><span class="line">    for(int index = 0 ; index &lt; arr.length - 1 ; index++) &#123;</span><br><span class="line">        for(int x = index + 1 ; x &lt; arr.length ; x++) &#123;</span><br><span class="line">            if(arr[index] &gt; arr[x]) &#123;</span><br><span class="line">                int temp = arr[index] ;</span><br><span class="line">                arr[index] = arr[x] ;</span><br><span class="line">                arr[x] = temp ;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>数组高级二分查找<ul><li>每一次都查中间的那个元素，比较大或者小就能减少一半的元素</li><li>数组高级二分查找代码</li></ul></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 二分查找</span><br><span class="line"> * @param arr</span><br><span class="line"> * @return</span><br><span class="line"> */</span><br><span class="line">private static int binarySearch2(int[] arr , int value) &#123;</span><br><span class="line">    // 定义三个变量</span><br><span class="line">    int minIndex = 0 ;</span><br><span class="line">    int maxIndex = arr.length - 1 ;</span><br><span class="line">    while(minIndex &lt;= maxIndex) &#123;</span><br><span class="line">        int midIndex = (minIndex + maxIndex) &gt;&gt;&gt; 1 ;</span><br><span class="line">        // 比较</span><br><span class="line">        if(arr[midIndex] == value) &#123;</span><br><span class="line">            return midIndex ;</span><br><span class="line">        &#125;else if(arr[midIndex] &gt; value) &#123;</span><br><span class="line">            maxIndex = midIndex - 1 ;</span><br><span class="line">        &#125;else if(arr[midIndex] &lt; value) &#123;</span><br><span class="line">            minIndex = midIndex + 1 ;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    // 返回</span><br><span class="line">    return -1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="基本类型包装类"><a href="#基本类型包装类" class="headerlink" title="基本类型包装类"></a>基本类型包装类</h4><ul><li>为什么会有基本类型包装类<ul><li>为了对基本数据类型进行更多的操作,更方便的操作,java就针对每一种基本数据类型提供了对应的类类型.</li><li>常用操作:<ul><li>常用的操作之一：用于基本数据类型与字符串之间的转换</li></ul></li></ul></li><li>基本类型和包装类的对应</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">byte           Byte</span><br><span class="line">short          Short</span><br><span class="line">int            Integer</span><br><span class="line">long           Long</span><br><span class="line">float          Float</span><br><span class="line">double         Double</span><br><span class="line">char           Character</span><br><span class="line">boolean        Boolean</span><br></pre></td></tr></table></figure><h4 id="Math类"><a href="#Math类" class="headerlink" title="Math类"></a>Math类</h4><ul><li>Math 类包含用于执行基本数学运算的方法，如初等指数、对数、平方根和三角函数。</li><li>成员变量</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public static final double E :         自然底数</span><br><span class="line">public static final double PI:        圆周率</span><br></pre></td></tr></table></figure><ul><li>成员方法</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public static int abs(int a)               取绝对值</span><br><span class="line">public static double ceil(double a)        向上取整</span><br><span class="line">public static double floor(double a)       向下取整</span><br><span class="line">public static int max(int a,int b)         获取最大值</span><br><span class="line">public static int min(int a, int b)        获取最小值</span><br><span class="line">public static double pow(double a,double b)获取a的b次幂</span><br><span class="line">public static double random()              </span><br><span class="line">获取随机数  返回带正号的 double 值，该值大于等于 0.0 且小于 1.0。</span><br><span class="line">public static int round(float a)           四舍五入</span><br><span class="line">public static double sqrt(double a)        获取正平方根</span><br></pre></td></tr></table></figure><h4 id="Random类"><a href="#Random类" class="headerlink" title="Random类"></a>Random类</h4><ul><li>随机类<ul><li>此类用于产生随机数如果用相同的种子创建两个 Random 实例，则对每个实例进行相同的方法调用序列，它们将生成并返回相同的数字序列</li><li>构造方法<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public Random()             </span><br><span class="line">没有给定种子,使用的是默认的(当前系统的毫秒值)</span><br><span class="line">public Random(long seed) </span><br><span class="line">给定一个long类型的种子,给定以后每一次生成的随机数是相同的</span><br><span class="line">public int nextInt()</span><br><span class="line">public int nextInt(int n)</span><br></pre></td></tr></table></figure></li></ul></li></ul><h4 id="Calendar类"><a href="#Calendar类" class="headerlink" title="Calendar类"></a>Calendar类</h4><ul><li>从JDK1.1版本开始，在处理日期和时间时，系统推荐使用Calendar类进行实现(Date的一些方法都过时了)在设计上，Calendar类的功能要比Date类强大很多，而且在实现方式上也比Date类要复杂一些，<br>下面就介绍一下Calendar类的使用。Calender类是一个抽象类，在实际使用时实现特定的子类的对象，<br>创建对象的过程对程序员来说是透明的，只需要使用getInstance()方法创建即可。<br>1.使用Calendar类代表当前时间<br>Calendar c = Calendar.getInstance();<br>System.out.println(c);  //返回的是一个Calendar对象<br>由于Calendar类是抽象类，且Calendar类的构造方法是protected的，所以无法使用Calendar类的构造方法来创建对象，<br>API中提供了getInstance方法用来创建对象。使用该方法获得的Calendar对象就代表当前的系统时间，<br>由于Calendar类toString实现的没有Date类那么直观，所以直接输出Calendar类的对象意义不大。</li></ul><ul><li>获取时间<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// 使用默认时区和语言环境获得一个日历</span><br><span class="line">   Calendar cal = Calendar.getInstance();</span><br><span class="line">   // 赋值时年月日时分秒常用的6个值，注意月份下标从0开始，所以取月份要+1</span><br><span class="line">   System.out.println(&quot;年:&quot; + cal.get(Calendar.YEAR));</span><br><span class="line">   System.out.println(&quot;月:&quot; + (cal.get(Calendar.MONTH) + 1));       </span><br><span class="line">   System.out.println(&quot;日:&quot; + cal.get(Calendar.DAY_OF_MONTH));</span><br><span class="line">   System.out.println(&quot;时:&quot; + cal.get(Calendar.HOUR_OF_DAY));</span><br><span class="line">   System.out.println(&quot;分:&quot; + cal.get(Calendar.MINUTE));</span><br><span class="line">   System.out.println(&quot;秒:&quot; + cal.get(Calendar.SECOND));</span><br></pre></td></tr></table></figure></li></ul><p>今天是2018年12月16日<br>输出为:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">年:2018</span><br><span class="line">月:12</span><br><span class="line">日:16</span><br><span class="line">时:15</span><br><span class="line">分:57</span><br><span class="line">秒:39</span><br></pre></td></tr></table></figure></p><h3 id="SimpleDateFormat"><a href="#SimpleDateFormat" class="headerlink" title="SimpleDateFormat"></a>SimpleDateFormat</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">java中使用SimpleDateFormat类的构造函数</span><br><span class="line">SimpleDateFormat(String str)构造格式化日期的格式,</span><br><span class="line">通过format(Date date)方法将指定的日期对象格式化为指定格式的字符串.</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">import java.text.SimpleDateFormat;</span><br><span class="line">import java.util.Date;</span><br><span class="line"> </span><br><span class="line">public class Main&#123;</span><br><span class="line">    public static void main(String[] args)&#123;</span><br><span class="line">        Date date = new Date();</span><br><span class="line">        String strDateFormat = &quot;yyyy-MM-dd HH:mm:ss&quot;;</span><br><span class="line">        SimpleDateFormat sdf = new SimpleDateFormat(strDateFormat);</span><br><span class="line">        System.out.println(sdf.format(date));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>输出结果为:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2018年12月16日16:12:53</span><br></pre></td></tr></table></figure></p><h4 id="System类"><a href="#System类" class="headerlink" title="System类"></a>System类</h4><ul><li>系统级类<ul><li>System 类包含一些有用的类字段和方法。它不能被实例化。</li><li>系统级操作</li></ul></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;object类&quot;&gt;&lt;a href=&quot;#object类&quot; class=&quot;headerlink&quot; title=&quot;object类&quot;&gt;&lt;/a&gt;object类&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;Object类有那些的公用方法&lt;ul&gt;
&lt;li&gt;equals() : 判断两个对象是否相等&lt;/li&gt;
&lt;li&gt;clone(): 进行对象拷贝&lt;/li&gt;
&lt;li&gt;getClass(): 返回和当前对象相关的Class对象&lt;/li&gt;
&lt;li&gt;notify(): notifyall,wait都是用来对给定对象进行线程同步的
    
    </summary>
    
      <category term="java" scheme="http://yoursite.com/categories/java/"/>
    
    
      <category term="java" scheme="http://yoursite.com/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>java基础(二) 基础知识</title>
    <link href="http://yoursite.com/2018/12/16/java/java%E5%9F%BA%E7%A1%80(%E4%BA%8C)%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"/>
    <id>http://yoursite.com/2018/12/16/java/java基础(二) 基础知识/</id>
    <published>2018-12-16T07:56:38.313Z</published>
    <updated>2018-12-18T10:54:36.034Z</updated>
    
    <content type="html"><![CDATA[<h4 id="1-常量和变量"><a href="#1-常量和变量" class="headerlink" title="1.常量和变量"></a>1.常量和变量</h4><ul><li><strong>什么是常量?</strong><br>  值不会变的是常量<br>  常量在程序运行时是不能被修改的。</li><li><strong>什么是变量?</strong><br>  在作用域之间,在该数据类型范围内可以变化的的一个量.</li></ul><ul><li>声明变量(定义变量)<pre><code>格式: 数据类型 变量名;</code></pre></li><li>变量赋值:<pre><code>变量名 = 常量名;数据类型 变量名 = 常量名;</code></pre><a id="more"></a>    </li></ul><h4 id="2-进制"><a href="#2-进制" class="headerlink" title="2.进制"></a>2.进制</h4><ul><li><strong>二进制</strong><br>  0和1 前缀0B或者0b 比如：0B1001 转为十进制是9</li><li><strong>八进制</strong><br>  0-7 前缀0 比如：0103</li></ul><ul><li>十进制【我们常用的】<br>  0-9 没有前缀</li></ul><ul><li><strong>十进制</strong><br>  0-9 和 A-F 前缀0x或者0X 比如：0x123</li><li><strong>进制转换</strong><br>  任何进制转化为十进制公式：系数 * 底数 ^ 指数<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0b1010</span> = <span class="number">1</span> * <span class="number">2</span>^<span class="number">3</span> + <span class="number">0</span> *<span class="number">2</span>^<span class="number">2</span> + <span class="number">1</span>*<span class="number">2</span>^<span class="number">1</span> + <span class="number">0</span>*<span class="number">2</span>^<span class="number">0</span></span><br><span class="line">       = <span class="number">8</span> + <span class="number">0</span> + <span class="number">2</span> + <span class="number">0</span></span><br><span class="line">       = <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="number">0123</span>  = <span class="number">1</span>*<span class="number">8</span>^<span class="number">2</span> + <span class="number">2</span>*<span class="number">8</span>^<span class="number">1</span> + <span class="number">3</span>*<span class="number">8</span>^<span class="number">0</span></span><br><span class="line">       = <span class="number">64</span> + <span class="number">16</span> + <span class="number">3</span></span><br><span class="line">        = <span class="number">83</span></span><br><span class="line"></span><br><span class="line"><span class="number">0x123</span> = <span class="number">1</span>*<span class="number">16</span>^<span class="number">2</span> + <span class="number">2</span>*<span class="number">16</span>^<span class="number">1</span> + <span class="number">3</span>*<span class="number">16</span>^<span class="number">0</span></span><br><span class="line">           = <span class="number">256</span> + <span class="number">32</span> + <span class="number">3</span></span><br><span class="line">           = <span class="number">291</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="3-反码和补码"><a href="#3-反码和补码" class="headerlink" title="3.反码和补码"></a>3.反码和补码</h4><pre><code>正数的补码和原码是一样的</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">5</span><br><span class="line">原码：0000 0101</span><br><span class="line">补码：0000 0101</span><br><span class="line"></span><br><span class="line">负数的补码是它的反码加1</span><br><span class="line">-5：</span><br><span class="line">原码：1000 0101</span><br><span class="line">反码：1111 1010</span><br><span class="line">   </span><br><span class="line">   + 1</span><br><span class="line">------------------</span><br><span class="line">补码  1111 1011</span><br></pre></td></tr></table></figure><h4 id="4-Java数据类型"><a href="#4-Java数据类型" class="headerlink" title="4.Java数据类型"></a>4.Java数据类型</h4><ul><li><strong>基本数据类型</strong></li><li>byte类型<ul><li>1个字节，8位【-128到127之间】</li></ul></li><li>short类型<ul><li>2个字节，16位【-2^15 到 2^15 -1】</li></ul></li><li>int类型<ul><li>4个字节，32位【-2^31 到 2^31 -1】</li></ul></li><li>long类型<ul><li>8个字节，64位【-2^63  到 2^63 -1】</li></ul></li><li>float类型【浮点型】<ul><li>4个字节，32位</li></ul></li><li>double类型【浮点型】<ul><li>8个字节，64位</li></ul></li><li>char类型<ul><li>2个字节，16位【1个汉字刚好2个字节】</li></ul></li><li>boolean类型<ul><li>1个字节，true和false</li></ul></li><li><strong>引用类型</strong></li></ul><ul><li>在Java中，引用类型的变量非常类似于C/C++的指针。引用类型指向一个对象，指向对象的变量是引用变量。这些变量在声明时被指定为一个特定的类型，比如 Employee、Puppy 等。变量一旦声明后，类型就不能被改变了。</li><li>对象、数组都是引用数据类型。</li><li>所有引用类型的默认值都是null。</li><li>一个引用变量可以用来引用任何与之兼容的类型。</li><li>例子：Site site = new Site(“Runoob”)。</li></ul><ul><li><strong>数据类型的转换</strong></li><li>默认转换<ul><li>1：byte,short,char—int—long—float—double</li><li>2：byte,short,char相互之间补转换，他们参与运算首先转换为int类型</li></ul></li><li>向上转换: 自动转化<ul><li>double d = 1.234L;</li></ul></li><li>向下转换: 需要强制转换<ul><li>格式: 目标类型 变量名 = (目标类型)值或变量名</li><li>int a = (int) 15.7f;</li><li>注意: </li></ul></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1:在java中，任何一个整数默认为 int 类型 (1)</span><br><span class="line">2:在java种，任何一个小数，默认为 double 类型( 1.0)</span><br><span class="line">3:123L 或者 1231 编译器会将该数当成long类型</span><br><span class="line">4:12.345f 或者12.345F 编译器会将该数当成float类型</span><br></pre></td></tr></table></figure><h4 id="字节码"><a href="#字节码" class="headerlink" title="字节码"></a>字节码</h4><ul><li><strong>常见的字节码</strong></li></ul><ul><li>ASCII 码</li><li>GBK码</li><li>Unicode码【占2个字节】</li></ul><h4 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h4><ul><li><strong>常见的运算符有哪些</strong><ul><li>算术运算符</li><li>赋值运算符</li><li>关系运算符</li><li>逻辑运算符</li><li>三目运算符</li><li>特殊运算符: 位运算符</li></ul></li><li><p><strong>算术运算符</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">+,  -,  *,  /,  %(取余), ++(自加), --(自减)</span><br></pre></td></tr></table></figure></li><li><p><strong>赋值运算符</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">= ， += ， -= ， *= ， /= ， %=</span><br></pre></td></tr></table></figure></li><li><p><strong>关系运算符</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">==, &gt;, &lt;, =&gt;, &lt;=, !=</span><br></pre></td></tr></table></figure></li><li><p><strong>逻辑运算符</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&amp; ，^ ，| ，&amp;&amp; ，|| ，！ ， ^</span><br></pre></td></tr></table></figure></li><li><p><strong>三目运算符</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a == b ？ c ： d</span><br><span class="line">格式：(条件表达式)？表达式1：表达式2</span><br></pre></td></tr></table></figure></li><li><p><strong>位运算符</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&amp; , | , ^ , ~ , &lt;&lt; , &gt;&gt; , &gt;&gt;&gt;</span><br></pre></td></tr></table></figure></li></ul><h4 id="Java基本语句结构"><a href="#Java基本语句结构" class="headerlink" title="Java基本语句结构"></a>Java基本语句结构</h4><ul><li><strong>语句结构种类</strong><ul><li>顺序结构</li><li>选择结构</li><li>循环结构</li></ul></li><li><strong>顺序结构</strong><ul><li>从上到下依次执行</li></ul></li><li><strong>选择结构【可以嵌套】</strong><ul><li>if ， if else ， if else if …… else</li><li>switch case【支持byte，short，char，int，String】</li></ul></li><li><strong>循环结构</strong></li></ul><ul><li><p>for</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">for(初始化语句;判断条件语句;控制条件语句) &#123;</span><br><span class="line"> 循环体语句;</span><br><span class="line">&#125;</span><br><span class="line">第一步：先执行初始化语句，只执行一次</span><br><span class="line">第二步：执行判断条件语句</span><br><span class="line">第三部：执行循环体语句</span><br><span class="line">第四步：执行控制条件语句，然后再执行循环体语句【循环】</span><br></pre></td></tr></table></figure></li><li><p>while</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">初始化语句;</span><br><span class="line">while(判断条件语句) &#123;</span><br><span class="line">循环体语句;</span><br><span class="line">控制条件语句;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>do while</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">do &#123;</span><br><span class="line"> 循环体语句;</span><br><span class="line">&#125;while((判断条件语句);</span><br></pre></td></tr></table></figure></li></ul><h4 id="Java方法"><a href="#Java方法" class="headerlink" title="Java方法"></a>Java方法</h4><ul><li><p><strong>定义</strong><br>方法就是完成特定功能的代码块</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.系统方法，只需要会使用，不需要知道内部的结构</span><br><span class="line">2.自定义方法: 方法内部实现需要我们来写</span><br><span class="line">3.方法内部不能再嵌套方法</span><br></pre></td></tr></table></figure></li><li><p><strong>格式</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">修饰符 返回类型 方法名(参数类型 参数名,...)&#123;</span><br><span class="line">函数体</span><br><span class="line">return 返回值</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><ul><li>修饰符: public static或者直接是public或是其他的private</li><li>返回类型: 所有的数据类型(基本类型: int, long,float,char…,引用数据类型: String)</li><li>方法名: 采用驼峰式,首字母一般小写,要见名知意</li><li>参数类型: 所有的数据类型,如果一个方法没有返回值,则这个方法值类型为void</li><li>参数名: 变量</li><li>返回值: 即返回结果(这个结果必须与返回类型一致)</li></ul><h4 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h4><ul><li><strong>数组的概念</strong></li></ul><ul><li>数组是一个容器,可以储存多个变量,这些变量的数据类型必须一致</li><li>数组既可以储存基本数据类型,也可以储存引用数据类型</li></ul><ul><li><strong>一维数组</strong></li></ul><ul><li>数组格式定义<br>  格式一: 数据类型【】 数组名<br>  格式二: 数据类型 数组名【】<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">int[] a; //定义了一个int类型的数组a;</span><br><span class="line">int a[]; //定义了一个int类型的a数组;</span><br></pre></td></tr></table></figure></li></ul><ul><li>数组的初始化<ul><li>java的数组必须初始化,然后才能使用</li><li>数组初始化: 就是为数组元素中的数组分配内存空间,并为每一个数组元素赋值</li></ul></li><li>初始化分类<ul><li>动态初始化: 只指定长度,由系统给出初始值</li><li>静态初始化: 给出初始值,由系统给出长度</li><li>注意事项: 这两种方式,只能给出一种,不能动静结合</li></ul></li><li><strong>二维数组</strong></li></ul><ul><li>数组定义格式<ul><li>数据类型[][] 变量名 = new 数据类型[m][n];</li><li>m表示这个二维数组有多少个一维数组</li><li>n表示每一个一维数组的元素个数<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">int[][] arr = new int[3][2];</span><br><span class="line">定义了一个二维数组arr</span><br><span class="line">这个二维数组有3个一维数组，名称是arr[0],arr[1],arr[2]</span><br><span class="line">每个一维数组有2个元素，可以通过arr[m][n]来获取,</span><br></pre></td></tr></table></figure></li></ul></li></ul><h4 id="数据结构"><a href="#数据结构" class="headerlink" title="数据结构"></a>数据结构</h4><p><strong>枚举: Enumeration</strong><br><strong>位集合: BitSet</strong><br><strong>向量: Vector</strong><br><strong>栈: Stack</strong><br><strong>字典: Dictionary</strong><br><strong>哈希表: Hashtable</strong><br><strong>属性: Properties</strong></p><ul><li>枚举:<ul><li>枚举（Enumeration）接口虽然它本身不属于数据结构,但它在其他数据结构的范畴里应用很广。 </li><li>枚举（The Enumeration）接口定义了一种从数据结构中取回连续元素的方式。</li></ul></li><li>位集合（BitSet）<ul><li>位集合类实现了一组可以单独设置和清除的位或标志。</li><li>该类在处理一组布尔值的时候非常有用，你只需要给每个值赋值一”位”，<br>然后对位进行适当的设置或清除，就可以对布尔值进行操作了。</li></ul></li><li>向量（Vector）<ul><li>向量（Vector）类和传统数组非常相似，但是Vector的大小能根据需要动态的变化。<br>和数组一样，Vector对象的元素也能通过索引访问。</li><li>使用Vector类最主要的好处就是在创建对象的时候不必给对象指定大小，它的大小会根据需要动态的变化。</li></ul></li><li>栈（Stack）<ul><li>栈（Stack）实现了一个后进先出（LIFO）的数据结构。</li><li>你可以把栈理解为对象的垂直分布的栈，当你添加一个新元素时，就将新元素放在其他元素的顶部。</li><li>当你从栈中取元素的时候，就从栈顶取一个元素。换句话说，最后进栈的元素最先被取出。</li><li>字典（Dictionary）</li></ul></li><li>字典（Dictionary） <ul><li>类是一个抽象类，它定义了键映射到值的数据结构。<br>当你想要通过特定的键而不是整数索引来访问数据的时候，这时候应该使用Dictionary。<br>由于Dictionary类是抽象类，所以它只提供了键映射到值的数据结构，而没有提供特定的实现。</li></ul></li><li>哈希表（Hashtable）<ul><li>Hashtable类提供了一种在用户定义键结构的基础上来组织数据的手段。</li><li>例如，在地址列表的哈希表中，你可以根据邮政编码作为键来存储和排序数据，而不是通过人名。<br>哈希表键的具体含义完全取决于哈希表的使用情景和它包含的数据。</li></ul></li><li>属性（Properties）<ul><li>Properties 继承于 Hashtable.Properties 类表示了一个持久的属性集.属性列表中每个键及其对应值都是一个字符串。</li><li>Properties 类被许多Java类使用。例如，在获取环境变量时它就作为System.getProperties()方法的返回值。</li></ul></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;1-常量和变量&quot;&gt;&lt;a href=&quot;#1-常量和变量&quot; class=&quot;headerlink&quot; title=&quot;1.常量和变量&quot;&gt;&lt;/a&gt;1.常量和变量&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;什么是常量?&lt;/strong&gt;&lt;br&gt;  值不会变的是常量&lt;br&gt;  常量在程序运行时是不能被修改的。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;什么是变量?&lt;/strong&gt;&lt;br&gt;  在作用域之间,在该数据类型范围内可以变化的的一个量.&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;声明变量(定义变量)&lt;pre&gt;&lt;code&gt;格式: 数据类型 变量名;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;变量赋值:&lt;pre&gt;&lt;code&gt;变量名 = 常量名;
数据类型 变量名 = 常量名;
&lt;/code&gt;&lt;/pre&gt;
    
    </summary>
    
      <category term="java" scheme="http://yoursite.com/categories/java/"/>
    
    
      <category term="java" scheme="http://yoursite.com/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>java基础(一)  常用关键字</title>
    <link href="http://yoursite.com/2018/12/16/java/java%E5%9F%BA%E7%A1%80(%E4%B8%80)%20%20%E5%B8%B8%E7%94%A8%E5%85%B3%E9%94%AE%E5%AD%97/"/>
    <id>http://yoursite.com/2018/12/16/java/java基础(一)  常用关键字/</id>
    <published>2018-12-16T07:56:38.305Z</published>
    <updated>2018-12-17T02:56:14.351Z</updated>
    
    <content type="html"><![CDATA[<h3 id="总览"><a href="#总览" class="headerlink" title="总览"></a>总览</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">基本类型</span><br><span class="line">整数</span><br><span class="line">byte short int long</span><br><span class="line">小数</span><br><span class="line">float double</span><br><span class="line">字符</span><br><span class="line">char</span><br><span class="line">布尔类型(boolean)</span><br><span class="line">true false</span><br><span class="line">访问控制</span><br><span class="line">public protected private </span><br><span class="line">程序控制</span><br><span class="line">break    continue    return    do    </span><br><span class="line">while    if    else    for    instanceof    </span><br><span class="line">switch   case    default</span><br><span class="line">类,方法以及变量修饰符</span><br><span class="line"> class abstract finalextends staticnew  implements</span><br><span class="line">nativestrictfpsynchronized    transient    volatile</span><br><span class="line">异常处理</span><br><span class="line">try catch throw throws</span><br><span class="line">包相关的</span><br><span class="line">import package</span><br><span class="line">变量引用</span><br><span class="line">this super void</span><br><span class="line">保留字</span><br><span class="line">goto const</span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="详细说明"><a href="#详细说明" class="headerlink" title="详细说明"></a>详细说明</h3><h4 id="基本类型"><a href="#基本类型" class="headerlink" title="基本类型"></a>基本类型</h4><ul><li><strong>整数</strong></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">byte: 字节型</span><br><span class="line">short: 短整型</span><br><span class="line">int: 整型</span><br><span class="line">long; 长整型</span><br><span class="line">都是java的原始数据类型</span><br><span class="line">byte 1个字节，8位【-128到127之间】</span><br><span class="line">short 2个字节，16位【-2^15 到 2^15 -1】.</span><br><span class="line">int 4个字节，32位【-2^31 到 2^31 -1】</span><br><span class="line">long 8个字节，64位【-2^63 到 2^63 -1】</span><br><span class="line"></span><br><span class="line">包装对象类</span><br><span class="line">byte: Byte</span><br><span class="line">short: Short</span><br><span class="line">int: Integer</span><br><span class="line">long: Long</span><br><span class="line">    表示原始类型的包装对象类.它定义代表此类型值的范为:MIN_VALUE和MAX_VALUE常量</span><br><span class="line"></span><br><span class="line">java中所有的整数值都是32的int值,除非值后面有 l 或 L（如 235L），</span><br><span class="line">这表示该值应解释为 long</span><br></pre></td></tr></table></figure><ul><li><p><strong>小数</strong><br>  float: 浮点<br>  double: 双精度<br>  都是java原始数据类型<br>  float变量可以储存单精度福浮点值<br>  double变量可以储存双精度的浮点值</p><p>  注意:</p><pre><code>由于java默认的浮点为双精度,因此要指定单精度文字(即用float),应在后面加上f,F.如: 0.11f</code></pre><p>  由于浮点数据类型是实际数值的近视值,因此,一般不要对浮点数值进行相等的比较<br>java中的浮点数值可以代表无穷大和NAN(非数值).<br>  Float和Double包装对象类用来定义常量 MIN_VALUE、MAX_VALUE、NEGATIVE_INFINITY、POSITIVE_INFINITY 和 NaN。</p></li></ul><ul><li><strong>字符</strong></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">char 是 Java 原始类型。char 变量可以存储一个 Unicode 字符。 </span><br><span class="line">可以使用下列 char 常量：</span><br><span class="line">\b - 空格 </span><br><span class="line">\f - 换页</span><br><span class="line">\n - 换行</span><br><span class="line">\r - 回车</span><br><span class="line">\t - 水平制表符 </span><br><span class="line">\&apos; - 单引号</span><br><span class="line">\&quot; - 双引号</span><br><span class="line">\\ - 反斜杠</span><br><span class="line">\xxx - 采用 xxx 编码的 Latin-1 字符</span><br><span class="line">\x 和 \xx 均为合法形式，但可能引起混淆</span><br><span class="line">\uxxxx - 采用十六进制编码 xxxx 的 Unicode 字符</span><br><span class="line"></span><br><span class="line"> Character 类包含一些可用来处理 char 变量的 static 方法，</span><br><span class="line"> 这些方法包括 isDigit()、isLetter()、isWhitespace() 和 toUpperCase()。</span><br></pre></td></tr></table></figure><ul><li><strong>布尔值(boolean)</strong></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ture false</span><br><span class="line">对,错</span><br><span class="line">boolean 变量的两个合法值</span><br></pre></td></tr></table></figure><h4 id="访问控制"><a href="#访问控制" class="headerlink" title="访问控制"></a>访问控制</h4><ul><li><p><strong>public</strong>    公共的<br>  public表明该数据成员、成员函数是对所有用户开放的，所有用户都可以直接进行调用</p></li><li><p><strong>protected</strong><br>  对同一包内的类和所有子类可见。使用对象：变量、方法.protected对于子女、朋友来说，就是public的，可以自由使用，没有任何限制，而对于其他的外部class，protected就变成private。主要的作用就是用来保护子类的。它的含义在于子类可以用它修饰的成员，其他的不可以，它相当于传递给子类的一种继承的东西</p></li><li><p><strong>private</strong> 私有的<br>   private表示私有，私有的意思就是除了class自己之外，任何人都不可以直接使用<br>访问权限仅限于类的内部，是一种封装的体现，例如，大多数成员变量都是修饰符为private的，它们不希望被其他任何外部的类访问</p></li></ul><h4 id="类-方法以及变量修饰符"><a href="#类-方法以及变量修饰符" class="headerlink" title="类,方法以及变量修饰符"></a>类,方法以及变量修饰符</h4><ul><li><strong>class</strong> 类<br>  class 关键字是用来声明新的 java 类的,该类是相关变量或方法的集合.类是面向对象的程序设计方法的基本构造单位.类通常代表某种实际实体.如几何形状或人.类是对象的模板.每个对象都是类的一个实例.要使用类,通常使用  new 操作符将类的对象实例化,然后调用类的方法来访问类的功能</li></ul><ul><li><strong>abstract</strong>  抽象类<br>  在面向对象的概念中，所有的对象都是通过类来描绘的，但是反过来，并不是所有的类都是用来描绘对象的，如果一个类中没有包含足够的信息来描绘一个具体的对象，这样的类就是抽象类。抽象类除了不能实例化对象之外，类的其它功能依然存在，成员变量、成员方法和构造方法的访问方式和普通类一样。由于抽象类不能实例化对象，所以抽象类必须被继承，才能被使用。也是因为这个原因，通常在设计阶段决定要不要设计抽象类。</li></ul><ul><li><strong>final</strong> 最终的<br>  final关键字可以用于声明属性,方法和类用于类,表示类不可以扩展(不能有子类)用于方法,表示在子类中不可以重写此方法.<br>  注意:<br>  一个类不可以同时是abstract又是final.abstract意味着必须扩展类,final则不能扩展.<br>一个方法不能同时是 abstract 又是 final。abstract 意味着必须重写方法，final 则不能重写方法</li></ul><ul><li><strong>extends</strong> 继承、扩展<br>  extends关键字用在class或interface声明中,用于指示所声明的类或接口时其名称后跟有extends关键字的类或接口的子类.子类继承父类的所有的public和protected变量和方法. 子类可以重写父类的任何除了final的方法.一个类自能扩展一个其他的类.    </li></ul><ul><li><strong>static</strong> 静态<br>  static 关键字可以应用于内部类（在另一个类中定义的类）、方法或字段（类的成员变量）<br>  通常，static 关键字意味着应用它的实体在声明该实体的类的任何特定实例外部可用 static（内部）类可以被其他类实例化和引用（即使它是顶级类）。<br>在上面的示例中，<br>另一个类中的代码可以实例化 MyStaticClass 类， 方法是用包含它的类名来限定其名称，如 MyClass.MyStaticClass。 static 字段（类的成员变量）在类的所有实例中只存在一次。 可以从类的外部调用 static 方法，而不用首先实例化该类。这样的引用始终包括类名作为方法调用的限定符。<br>模式：public final static <type> varName = <value>;<br>通常用于声明可以在类的外部使用的类常量。 在引用这样的类常量时需要用类名加以限定。<br>在上面的示例中，另一个类可以用 MyClass.MAX_OBJECTS 形式来引用 MAX_OBJECTS 常量</value></type></li></ul><ul><li><p><strong>new</strong><br>  new关键字用于创建类的新实例<br>  new关键字后面的参数必须是类名,<br>  并且类名的后面必须是一组构造方法参数(必须带括号)<br>  参数集合必须与类的构造方法签名匹配<br>  左侧的变量的类型必须与要实例化的类或接口具有赋值兼容关系</p></li><li><p><strong>interface</strong> 接口<br>  interface 关键字是用来声明新的java接口,接口时方法的集合.接口是java语言的一项强大的功能.任何类都可声明它实现一个或多个接口,这意味着它实现了这些接口中所定义的所有方法实现了接口的任何类都必须提供在该接口中的所有方法实现.<br>一个类可以实现多个接口</p></li></ul><ul><li><strong>implements</strong><br>  implements关键字在class声明中使用,声明类提供了implements 关键字后面名称所指定接口所声明的所有方法.类必须实现接口的中所有方法.一个类可以实现多个接口</li></ul><h4 id="包相关"><a href="#包相关" class="headerlink" title="包相关"></a>包相关</h4><ul><li><strong>import</strong> 引入<br>  import 关键字使一个包中的一个或所有类在当前 Java 源文件中可见。可以不使用完全限定的类名来引用导入的类。 当多个包包含同名的类时，许多 Java 程序员只使用特定的 import 语句（没有“*”）来避免不确定性</li></ul><ul><li><strong>package</strong> 包<br>  package 关键字指定在 Java 源文件中声明的类所驻留的 Java 包。 package 语句（如果出现）必须是 Java 源文件中的第一个非注释性文本。 例:java.lang.Object。 如果 Java 源文件不包含 package 语句，在该文件中定义的类将位于“默认包”中。请注意，不能从非默认包中的类引用默认包中的类。</li></ul><h4 id="变量引用"><a href="#变量引用" class="headerlink" title="变量引用"></a>变量引用</h4><ul><li><p><strong>this</strong><br>  this 关键字用于引用当前实例。 当引用可能不明确时，可以使用 this 关键字来引用当前的实例。</p></li><li><p><strong>void</strong> 无返回值<br>  void 关键字表示 null 类型。 void 可以用作方法的返回类型，以指示该方法不返回值。</p></li><li><p><strong>super</strong><br>  super 关键字用于引用使用该关键字的类的超类。 作为独立语句出现的 super 表示调用超类的构造方法。 super.<methodname>() 表示调用超类的方法。只有在如下情况中才需要采用这种用法：要调用在该类中被重写的方法，以便指定应当调用在超类中的该方法。</methodname></p></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;总览&quot;&gt;&lt;a href=&quot;#总览&quot; class=&quot;headerlink&quot; title=&quot;总览&quot;&gt;&lt;/a&gt;总览&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;基本类型&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	整数&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		byte short int long&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	小数&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		float double&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	字符&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		char&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	布尔类型(boolean)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		true false&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;访问控制&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	public protected private &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;程序控制&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	break    continue    return    do    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	while    if    else    for    instanceof    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	switch   case    default&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;类,方法以及变量修饰符&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	 class abstract final	extends static	new  implements&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	native	strictfp	synchronized    transient    volatile&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;异常处理&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	try catch throw throws&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;包相关的&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	import package&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;变量引用&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	this super void&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;保留字&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	goto const&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="java" scheme="http://yoursite.com/categories/java/"/>
    
    
      <category term="java" scheme="http://yoursite.com/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>java-- String是关键字吗???</title>
    <link href="http://yoursite.com/2018/12/16/java/java--%20String%E6%98%AF%E5%85%B3%E9%94%AE%E5%AD%97%E5%90%97___/"/>
    <id>http://yoursite.com/2018/12/16/java/java-- String是关键字吗___/</id>
    <published>2018-12-16T07:56:38.303Z</published>
    <updated>2018-12-16T08:19:44.849Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Helloword</span></span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Hello world"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><a id="more"></a><ul><li>这是学java基本都会写一个例子,这里我们可以探讨几个概念性的问题,String 是关键字（keyword）吗？ </li><li>要弄清这个问题,首先我们的了解什么是String?<br>  String是一个类名，即Class java.lang.String 的类名，也就是常说的字符串类，其对象就是字符串。 </li><li>那什么又是关键字呢?<br>  关键字是电脑语言里事先定义的,有特别意义的标识符,有时又叫保留字，还有特别意义的变量。 Java的关键字对java的编译器有特殊的意义，他们用来表示一种数据类型，或者表示程序的结构等，关键字不能用作变量名、方法名、类名、包名。 </li></ul><p><strong>既然关键字不能用作类名，那么用作类名的就不是关键字，所以，String不是关键字.</strong></p><p>这里我们还可以引申另一个知识<strong>标识符</strong>,这也是一个容易与关键弄混的概念</p><ul><li>标识符（identifier)<br>  是指类名(包括接口、枚举、抽象类)、方法名、变量、常量名、包名等可以自定义的字符组合。<br>  虽然可以自定义，但是也要遵循如下规则：<br>  由字母, 下划线, 数字, $符号组成;<br>  只能以字母、下划线、$符号开头，不能以数字开头；<br>  标识符长度没有限;<br>  区分大小写<br>  不能是关键字</li></ul><p><strong>因此我们可以得出一个结论:</strong><br><strong>String 是Java基础库中的一个常用类的类名，属于标识符(identifier)，不是关键字</strong></p>]]></content>
    
    <summary type="html">
    
      &lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Helloword&lt;/span&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String[] args)&lt;/span&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        System.out.println(&lt;span class=&quot;string&quot;&gt;&quot;Hello world&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="java" scheme="http://yoursite.com/categories/java/"/>
    
    
      <category term="java Thinking" scheme="http://yoursite.com/tags/java-Thinking/"/>
    
  </entry>
  
  <entry>
    <title>ES6系列（四） for-of 循环</title>
    <link href="http://yoursite.com/2018/12/15/es6/ES6%E7%B3%BB%E5%88%97%EF%BC%88%E5%9B%9B%EF%BC%89%20for-of%20%E5%BE%AA%E7%8E%AF/"/>
    <id>http://yoursite.com/2018/12/15/es6/ES6系列（四） for-of 循环/</id>
    <published>2018-12-15T07:31:24.743Z</published>
    <updated>2017-09-17T03:56:36.157Z</updated>
    
    <content type="html"><![CDATA[<h1 id="for-of-循环"><a href="#for-of-循环" class="headerlink" title="for-of 循环"></a>for-of 循环</h1><pre><code>任何部署了Iterator接口的对象，都可以使用for-of循环遍历。我们如何遍历数组中的元素：</code></pre><h2 id="（1）-for循环"><a href="#（1）-for循环" class="headerlink" title="（1） for循环"></a>（1） for循环</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> index = <span class="number">0</span>; index &lt; myArray.length; index++) &#123;</span><br><span class="line"> <span class="built_in">console</span>.log(myArray[index]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="（2）-forEach方法遍历数组"><a href="#（2）-forEach方法遍历数组" class="headerlink" title="（2） forEach方法遍历数组"></a>（2） forEach方法遍历数组</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">myArray.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(value);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="（3）-for-in循环"><a href="#（3）-for-in循环" class="headerlink" title="（3） for-in循环"></a>（3） for-in循环</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> index <span class="keyword">in</span> myArray) &#123; <span class="comment">// 千万别这样做！！</span></span><br><span class="line">    <span class="built_in">console</span>.log(myArray[index]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这绝对是一个糟糕的选择，为什么呢？<br>    1）在这段代码中，赋给index的值不是实际的数字，而是字符串“0”、“1”、“2”，此时很可能在无意之间进行字符串算数计算，例如：“2” + 1 == “21”，这给编码过程带来极大的不便。<br>    2）作用于数组的for-in循环体除了遍历数组元素外，还会遍历自定义属性。<br>    举个例子，如果你的数组中有一个可枚举属性myArray.name，循环将额外执行一次，遍历到名为“name”的索引。就连数组原型链上的属性都能被访问到。<br>    3）最让人震惊的是，在某些情况下，这段代码可能按照随机顺序遍历数组元素。<br>    4）简而言之，for-in是为普通对象设计的，你可以遍历得到字符串类型的键，因此不适用于数组遍历。 </p><h2 id="（4）强大的for-of循环"><a href="#（4）强大的for-of循环" class="headerlink" title="（4）强大的for-of循环"></a>（4）强大的for-of循环</h2><pre><code class="javascript"><span class="keyword">for</span> (<span class="keyword">var</span> value <span class="keyword">of</span> myArray) {    <span class="built_in">console</span>.log(value);}</code></pre><p>1）这是最简洁、最直接的遍历数组元素的语法；<br>2）这个方法避开了for-in循环的所有缺陷 ；<br>3）与forEach()不同的是，它可以正确响应break、continue和return语句 ；<br>4）for-of循环也可以遍历其它的集合，for-of循环不仅支持数组，还支持大多数类数组对象，例如DOM NodeList对象；<br>5）for-of循环也支持字符串遍历，它将字符串视为一系列的Unicode字符来进行遍历。</p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;for-of-循环&quot;&gt;&lt;a href=&quot;#for-of-循环&quot; class=&quot;headerlink&quot; title=&quot;for-of 循环&quot;&gt;&lt;/a&gt;for-of 循环&lt;/h1&gt;&lt;pre&gt;&lt;code&gt;任何部署了Iterator接口的对象，都可以使用for-of循环遍历。
我们如何遍历数组中的元素：
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;（1）-for循环&quot;&gt;&lt;a href=&quot;#（1）-for循环&quot; class=&quot;headerlink&quot; title=&quot;（1） for循环&quot;&gt;&lt;/a&gt;（1） for循环&lt;/h2&gt;&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; index = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;; index &amp;lt; myArray.length; index++) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 		&lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(myArray[index]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="es6" scheme="http://yoursite.com/categories/es6/"/>
    
    
      <category term="es6" scheme="http://yoursite.com/tags/es6/"/>
    
  </entry>
  
  <entry>
    <title>node系列（一）总览一</title>
    <link href="http://yoursite.com/2018/12/15/node/node%E7%B3%BB%E5%88%97%EF%BC%88%E4%B8%80%EF%BC%89%E6%80%BB%E8%A7%88%E4%B8%80/"/>
    <id>http://yoursite.com/2018/12/15/node/node系列（一）总览一/</id>
    <published>2018-12-15T07:31:24.743Z</published>
    <updated>2017-12-24T10:46:17.392Z</updated>
    
    <content type="html"><![CDATA[<h2 id="什么是node"><a href="#什么是node" class="headerlink" title="什么是node?"></a>什么是node?</h2><ul><li>Node.js是一个让JS可以运行在浏览器之外的服务器端的平台</li><li>它实现了诸如文件系统、模块、包、操作系统API，网络通信等核心 JS没有或不完善的功能</li><li>它摒弃传统平台依赖多线程来实现高并发的设计思路，而采用单线程，异步式I/O，事件驱动式的程序设计模型</li><li>Node.js使用了来自Google ChromeV8引擎。V8是目前世界上最快的javascript引擎<a id="more"></a></li></ul><h2 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h2><ul><li>所谓特点,就是node.js如何解决服务器高性能瓶颈问题的</li></ul><h3 id="单线程"><a href="#单线程" class="headerlink" title="单线程"></a>单线程</h3><ul><li>在java,php或者.net等服务器语言中,会为客户端创建一个新的线程,而每一个线程需要消耗2mb内存.理论上,一个8GB的服务器可以同时连接最大用户为4000个左右.要让web应用程序支持更多的用户,就需要增加服务器的数量,而web应用程序的硬件成本当然也就上升了</li><li>node.js不为每一个用户创建一个新的线程,而仅仅使用一个线程.当有用户连接了,就会触发一个内部事件,通过非阻塞I/O,事件驱动机制,让node.js程序宏观上也是并行的,使用node.js,一个8GB内存的服务器,可以同时处理超过4万用户的连接</li><li>另外,单线程带来的好处就是减少内存的开销,还有操作系统完全不再有线程创建、销毁的时间开销。</li><li>坏处,就是一个用户造成的线程的崩溃,整个服务器都崩溃了,其他的人也就都崩溃了</li></ul><h3 id="非阻塞I-O-non-blocking-I-O"><a href="#非阻塞I-O-non-blocking-I-O" class="headerlink" title="非阻塞I/O  non-blocking I/O"></a>非阻塞I/O  non-blocking I/O</h3><ul><li>例如,当在访问数据库取得数据的时候,需要一段时间.当传统的单线程处理机制中,在执行了访问数据库代码之后,整个线程都将暂停下来,等待数据库返回结果,才能执行后面的代码.也就是说,I/O阻塞了代码的执行,极大的降低了程序的执行效率</li><li>由于node.js中采用了非阻塞I/O机制,因此在执行访问数据库的代码,将立即执行其他后面的代码,把数据库返回结果的处理代码放在回调函数中,从而提高了程序的执行效率.</li><li>当某个I/O执行完毕时,将以事件的形式通知执行I/O操作的线程,线程执行的这个事件的回调函数.为了处理异步I/O,线程必须有事件循环,不断的检查有没有未处理的事件,一次予以处理.</li><li>阻塞模式下,一个线程只能处理一项任务,想要提高吞吐量,必须通过多线程.而非阻塞I/O模式下,一个线程永远在执行计算操作,这个线程的CPU核心利用率永远是100%</li></ul><h3 id="事件驱动"><a href="#事件驱动" class="headerlink" title="事件驱动"></a>事件驱动</h3><ul><li>在node.js中,客户端请求建立连接,提交数据等行为会出触发相应的事件.在node中,一个时刻只能执行一个事件的回调函数,但是在执行一个事件回调函数的中途,可以转而处理其他的事情(比如,又有新用户连接了),然后返回执行原事件的回调函数,这种处理的机制,称为”事件环”机制</li><li>mode.js底层是c++写的(V8也是用C++写的).底层代码中,近半数都是用于事件队列,回调函数队列的构建.用事件驱动来完成服务的任务调用</li></ul><h2 id="node-js的优点"><a href="#node-js的优点" class="headerlink" title="node.js的优点"></a>node.js的优点</h2><pre><code>·Nodejs基于Javascript语言·统一公共类库，代码标准化·Nodejs选择了目前最快的浏览器内核V8作为执行引擎·Nodejs的社区非常活跃 www.npmjs.com</code></pre><h2 id="适用开发"><a href="#适用开发" class="headerlink" title="适用开发"></a>适用开发</h2><ul><li>node.js适用于开发什么样的应用程序?<ul><li>善用于I/O,不善于计算.因为node.js最擅长的就是任务调用.如果的你的业务有很多的CPU计算,实际上也相当于这个计算阻塞了这个单线程,就不适合node开发.<br>当应用程序需要处理大量并发的I/O,而在向客户端发出响应之前,应用程序内部并不需要进行复杂的处理时候,node.js非常合适,node.js也非常适合与web socket配合,开发长连接的实时交互应用程序.<ul><li>比如<ul><li>用户表单的收集</li><li>聊天室</li><li>图文直播</li><li>提供JSON的API</li></ul></li></ul></li></ul></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;什么是node&quot;&gt;&lt;a href=&quot;#什么是node&quot; class=&quot;headerlink&quot; title=&quot;什么是node?&quot;&gt;&lt;/a&gt;什么是node?&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;Node.js是一个让JS可以运行在浏览器之外的服务器端的平台&lt;/li&gt;
&lt;li&gt;它实现了诸如文件系统、模块、包、操作系统API，网络通信等核心 JS没有或不完善的功能&lt;/li&gt;
&lt;li&gt;它摒弃传统平台依赖多线程来实现高并发的设计思路，而采用单线程，异步式I/O，事件驱动式的程序设计模型&lt;/li&gt;
&lt;li&gt;Node.js使用了来自Google ChromeV8引擎。V8是目前世界上最快的javascript引擎
    
    </summary>
    
    
      <category term="node" scheme="http://yoursite.com/tags/node/"/>
    
  </entry>
  
  <entry>
    <title>node系列（二）总览二</title>
    <link href="http://yoursite.com/2018/12/15/node/node%E7%B3%BB%E5%88%97%EF%BC%88%E4%BA%8C%EF%BC%89%E6%80%BB%E8%A7%88%E4%BA%8C/"/>
    <id>http://yoursite.com/2018/12/15/node/node系列（二）总览二/</id>
    <published>2018-12-15T07:31:24.743Z</published>
    <updated>2017-12-28T06:20:40.754Z</updated>
    
    <content type="html"><![CDATA[<h2 id="node-js原理图"><a href="#node-js原理图" class="headerlink" title="node.js原理图"></a>node.js原理图</h2><p><img src="/img/node/node.png" alt="数值的扩展"><br><a id="more"></a></p><ul><li>单线程: 单线程的好处就是减少内存的开销,操作系统线程不在需要创建和销毁,如果某一个事情进入了,但是被I/O阻塞了.那么这个线程就阻塞了</li><li>非阻塞I/O: 不会等到I/O语句结束了,而会执行后面的语句,非阻塞I/O就能解决问题吗?比如执行A的业务,执行过程中,B的I/O回调完成了,此时怎么办??</li><li>事件机制:不管是新用户的请求,还是老用户的I/O完成,都将以事件的方式加入事件环,等待调用</li></ul><p>说是三个特点,实际上是一个特点,离开谁都不行,都玩不转<br>node.js中所有的I/O都是异步的,回调函数套用回调函数</p><h2 id="事件循环"><a href="#事件循环" class="headerlink" title="事件循环"></a>事件循环</h2><ul><li>管理异步动作,定时器和回调函数的机制叫做事件循环</li><li>异步的时候会压入到这个队列然后不停的读取事件,事件发生后会把对应的回调加入队列</li><li>队列按加入的顺序依次执行,由普通函数和回调函数组成</li></ul><h2 id="common-js规范"><a href="#common-js规范" class="headerlink" title="common.js规范"></a>common.js规范</h2><ul><li>一个node.js由大量的模块组成,每个Js都是一个模块</li><li>实现require方法,npm基于common.js实现了自动加载和安装依赖</li></ul><h2 id="node-js中的全局对象"><a href="#node-js中的全局对象" class="headerlink" title="node.js中的全局对象"></a>node.js中的全局对象</h2><ul><li>node.js中有一个特殊的对象,称为全局对象global,它及其其所有的属性都可以在程序的任何地方访问,<br>即全局变量</li><li>在浏览器JavaScript中通常window是全局对象,而node.js中全局对象为global<br><strong>filename  当前模块文件的绝对路径</strong>dirname 当前模块的所在目录的绝对路径</li></ul><h2 id="模块化优点"><a href="#模块化优点" class="headerlink" title="模块化优点"></a>模块化优点</h2><ul><li>增加内聚性</li><li>有助于分工合作,方便重构</li><li>提高代码质量</li></ul><h2 id="模块使用"><a href="#模块使用" class="headerlink" title="模块使用"></a>模块使用</h2><ul><li>定义模块</li><li>导出模块</li><li>使用模块</li></ul><h2 id="require"><a href="#require" class="headerlink" title="require"></a>require</h2><pre><code>加载模块后会缓存,多次加载会得到同一个对象</code></pre><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//加载http模块</span></span><br><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">"http"</span>) </span><br><span class="line"><span class="comment">//查看模块缓存</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">require</span>.cache)</span><br><span class="line"><span class="comment">//查看模块的绝对路径</span></span><br><span class="line"><span class="built_in">require</span>.resolve(<span class="string">'./test.js'</span>)</span><br><span class="line"><span class="comment">//查看单个模块的缓存</span></span><br><span class="line"><span class="built_in">require</span>.cache[<span class="built_in">require</span>.resolve(<span class="string">'./test.js'</span>)]</span><br><span class="line"><span class="comment">//删除模块的缓存</span></span><br><span class="line"><span class="keyword">delete</span> <span class="built_in">require</span>.cache[<span class="built_in">require</span>.resolve(<span class="string">'./test.js'</span>)]</span><br><span class="line">同步方法</span><br></pre></td></tr></table></figure><h2 id="包和npm"><a href="#包和npm" class="headerlink" title="包和npm"></a>包和npm</h2><ul><li>多个模块可以封装成一个包</li><li>npm是mode.js默认的模块管理器,用于安装和管理node模块可以用包的方式通过npm安装,卸载,发布包</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;node-js原理图&quot;&gt;&lt;a href=&quot;#node-js原理图&quot; class=&quot;headerlink&quot; title=&quot;node.js原理图&quot;&gt;&lt;/a&gt;node.js原理图&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;/img/node/node.png&quot; alt=&quot;数值的扩展&quot;&gt;&lt;br&gt;
    
    </summary>
    
    
      <category term="node" scheme="http://yoursite.com/tags/node/"/>
    
  </entry>
  
</feed>
